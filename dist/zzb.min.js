//! zzb.min.js v2.4.0 (https://github.com/jpfluger/zazzy-browser)
//! MIT License; Copyright 2017-2021 Jaret Pfluger
(()=>{var t={546:(t,e)=>{function r(){}r.prototype.ajax=function(t){return this.request(t,t.callback)},r.prototype.request=function(t,e){return zzb.types.isFunction(e)||(e=function(){}),t=zzb.types.merge({url:null,method:"GET",body:null,expectType:"text",headers:{},RAWRETURN:!1,SKIPREDIRECT:!1,SKIPFLASH:!1,SHOWCATCHMESSAGE:!1,NOCATCHLOG:!1,NOCATCHFLASH:!1,CATCHFLASHMESSAGE:""},t),zzb.types.isStringNotEmpty(t.url)?zzb.types.isStringNotEmpty(t.method)?void fetch(t.url,{method:t.method,body:t.body,headers:t.headers}).then((function(e){if(!e.ok)throw new Error("Remote service returned unexpected status "+e.status+".");switch(t.expectType){case"json":return e.json();case"text":return e.text();case"blob":return e.blob();default:throw new Error("Unknown content received from remote service.")}})).then((function(r){var o={request:t,data:r};if(!0===o.request.RAWRETURN)return e(o,null);var i=!1,n=zzb.rob.newROB();if("json"!==o.request.expectType)n.recs=[o.data];else{if(!0!==o.request.SKIPREDIRECT&&zzb.types.isStringNotEmpty(r.redirect))return zzb.types.isFunction(o.request.onRedirect)?void o.request.onRedirect(r,(function(t){t||(window.location.href=r.redirect)})):void(zzb.types.isStringNotEmpty(r.message)?zzb.dialogs.showMessage({type:zzb.types.isNonEmptyString(r.messageType)?r.messageType:null,classDialog:"zzb-dialog-flash-message zzb-dialog-flash-redirect"+zzb.strings.mergeElseEmpty(" zzb-dialog-flash-status-{0}",r.messageType),dataBackdrop:"static",body:r.message,onHide:function(t){window.location.href=r.redirect}}):window.location.href=r.redirect);r.ISROBERRORS||(r.err?(r.errs=zzb.rob.sanitizeErrors(r.err),r.err=null):r.error?(r.errs=zzb.rob.sanitizeErrors(r.error),r.err=null):r.errs&&(r.errs=zzb.rob.sanitizeErrors(r.errs),r.err=null)),r.ISROBRECS||(r.recs?r.recs=zzb.rob.sanitizeRecords(r.recs):r.rec?(r.recs=zzb.rob.sanitizeRecords(r.rec),r.rec=null):Array.isArray(r.errs)&&0!==r.errs.length||(r.recs=zzb.rob.sanitizeRecords(r))),r.paginate&&(n.paginate=r.paginate),n.errs=r.errs,n.recs=r.recs,n.columns=r.columns,n.listErrs=zzb.rob.toList(n.errs),!0!==t.SKIPFLASH&&zzb.types.isStringNotEmpty(r.message)&&(i=!0,zzb.dialogs.showMessage({type:zzb.types.isNonEmptyString(r.messageType)?r.messageType:null,classDialog:"zzb-dialog-flash-message"+zzb.strings.mergeElseEmpty(" zzb-dialog-flash-status-{0}",r.messageType,n.hasErrors()?"error":"okay"),dataBackdrop:"static",body:r.message,onHide:function(t){o.rob=n,e(o,null)}})),zzb.types.isFunction(o.request.onFinish)&&(i=!0,o.request.onFinish(n,(function(t){!0!==t&&(o.rob=n,e(o,null))})))}if(!0!==i){o.rob=n;try{e(o,null)}catch(t){throw console.log(s.APPEND_FAILED_HANDLER_UNEXPECTED,"error:",t),new Error(s.APPEND_FAILED_HANDLER_UNEXPECTED)}}})).catch((function(r){let o="";if(r&&zzb.types.isStringNotEmpty(r.message)&&(!0!==t.NOCATCHLOG&&s.APPEND_FAILED_HANDLER_UNEXPECTED!==r.message&&console.log(r.message),!0!==t.SHOWCATCHMESSAGE&&(o=r.message)),!0!==t.NOCATCHFLASH){let e="";zzb.types.isStringNotEmpty(o)&&(e=zzb.strings.format(' <span class="zzb-dialog-error-catch">{0}</span>',o)),zzb.types.isStringNotEmpty(t.CATCHFLASHMESSAGE)?zzb.ajax.showMessageFailedAction({message:t.CATCHFLASHMESSAGE+e}):zzb.ajax.showMessageFailedAction({message:s.MSG_FAILED_REQUEST_UNEXPECTED+e})}e(null,new Error(o))})):e(null,new Error("No url method defined to fetch request.")):e(null,new Error("No url defined to fetch request."))},r.prototype.get=function(t,e){t.method="GET",zzb.ajax.request(t,e)},r.prototype.post=function(t,e){t.method="POST",zzb.ajax.request(t,e)},r.prototype.getBLOB=function(t,e){t.method="GET",t.expectType="blob",zzb.ajax.request(t,e)},r.prototype.getTEXT=function(t,e){t.method="GET",t.expectType="text",zzb.ajax.request(t,e)},r.prototype.getJSON=function(t,e){t.method="GET",t.expectType="json",zzb.ajax.request(t,e)},r.prototype.postJSON=function(t,e){t.method="POST",zzb.types.isStringNotEmpty(t.expectType)||(t.expectType="json"),t.headers={"Content-Type":"application/json"},zzb.types.isStringNotEmpty(t.body)?t.body="{}":t.body=JSON.stringify(t.body),zzb.ajax.request(t,e)};var s=function(t){};s.MSG_FAILED_REQUEST_UNEXPECTED="Communications with remote service failed unexpectedly.",s.APPEND_FAILED_HANDLER_UNEXPECTED="Report this to the remote service administrator.",r.prototype.showMessageFailedAction=function(t){t=zzb.types.merge({err:null,number:null,message:s.MSG_FAILED_ACTION_UNEXPECTED},t),zzb.types.isNumber(t.number)?t.number=" ("+t.number+")":t.number="",t.err&&console.log(t.err),zzb.dialogs.showMessage({classDialog:"zzb-dialog-flash-message zzb-flash-invalid",dataBackdrop:"static",body:t.message+t.number})},e.h=r},772:(t,e)=>{class r{constructor(t){this.defaultOptions=r.getDialogDefaults(t),this.defaultOptions.onShow="function"==typeof t.onShow?t.onShow:function(){},this.defaultOptions.onShown="function"==typeof t.onShown?t.onShown:function(){},this.defaultOptions.onHide="function"==typeof t.onHide?t.onHide:function(){},this.defaultOptions.onHidden="function"==typeof t.onHidden?t.onHidden:function(){},this.isBootstrap=!0!==this.defaultOptions.forceNoBootstrap&&null!=window.bootstrap,this.modal=null,zzb.types.isStringNotEmpty(this.defaultOptions.id)&&(this.modal=document.getElementById(this.defaultOptions.id)),this.modal||(this.modal=this.createModal()),this.defaultOptions.htmlDialog="",this.defaultOptions.body="",this.isBootstrap?this.bsModal=new bootstrap.Modal(this.modal,{}):(this.closeModal=this.modal.querySelectorAll("[data-bs-dismiss]"),this.closeModal.forEach((t=>{t.addEventListener("click",(t=>{this.close()}))})));var e=this;this.modal.addEventListener("show.bs.modal",(function(t){e.defaultOptions.onShow&&zzb.types.isFunction(e.defaultOptions.onShow)&&e.defaultOptions.onShow(t)})),this.modal.addEventListener("shown.bs.modal",(function(t){if(e.defaultOptions.hasAutoBackdrop){let t=e.modal.nextElementSibling;t&&t.classList.contains("modal-backdrop")&&(e.modal.style.zIndex="2055",t.style.zIndex="2050")}e.defaultOptions.onShown&&zzb.types.isFunction(e.defaultOptions.onShown)&&e.defaultOptions.onShown(t)})),this.modal.addEventListener("hide.bs.modal",(function(t){e.defaultOptions.onHide&&zzb.types.isFunction(e.defaultOptions.onHide)&&e.defaultOptions.onHide(t)})),this.modal.addEventListener("hidden.bs.modal",(function(t){e.defaultOptions.onHidden&&zzb.types.isFunction(e.defaultOptions.onHidden)&&e.defaultOptions.onHidden(t),e.defaultOptions.doAutoDestroy&&e.bsModal&&(e.bsModal.dispose(),e.modal.remove())})),this.target=document.getElementById(t.target),this.target&&this.target.addEventListener("click",(t=>{this.open()}))}open(){this.bsModal?this.bsModal.show():(this.modal.classList.add("show-modal"),setTimeout((()=>{this.animateIn()}),10))}close(){this.bsModal?this.bsModal.hide():(this.animateOut(),setTimeout((()=>{this.modal.classList.remove("show-modal")}),250))}animateIn(){this.modal.classList.add("animate-modal")}animateOut(){this.modal.classList.remove("animate-modal")}destroy(){this.bsModal&&(this.bsModal.hide(),this.defaultOptions.doAutoDestroy||(this.bsModal.dispose(),this.modal.remove()))}static BUTTON_CLOSE="button-close";static BUTTON_OK="button-ok";static BUTTON_YES="button-yes";static BUTTON_NO="button-no";static BUTTON_CANCEL="button-cancel";static TYPE_NONE="none";static TYPE_PRIMARY="primary";static TYPE_SECONDARY="secondary";static TYPE_SUCCESS="success";static TYPE_DANGER="danger";static TYPE_WARNING="warning";static TYPE_INFO="info";static TYPE_LIGHT="light";static TYPE_DARK="dark";static TYPE_LINK="link";static getDialogDefaults(t){var e={htmlDialog:"",id:zzb.uuid.newV4(),type:r.TYPE_NONE,classDialog:"",classBackdrop:"",extraAttributes:"",noFade:!1,title:"",body:"",buttons:[],onShow:null,onShown:null,onHide:null,onHidden:null,doVerticalCenter:!0,doAutoDestroy:!0,forceNoBootstrap:!1,hasAutoBackdrop:!1};return zzb.types.isObject(t)?zzb.types.merge(e,t):e}static getButtonDefaults(t){var e={id:null,type:r.TYPE_NONE,label:"",className:"",action:null,isDismiss:!1,isOutline:!1,ztrigger:null};return zzb.types.isObject(t)?zzb.types.merge(e,t):e}static getButtonPreset(t,e,s){var o=r.getButtonDefaults();switch(o.isDismiss=!0,e===s-1?o.type=r.TYPE_PRIMARY:e===s-2&&(o.type=r.TYPE_SECONDARY),t){case"button-close":o.label="Close";break;case"button-ok":o.label="Ok";break;case"button-accept":o.label="Accept";break;case"button-yes":o.label="Yes";break;case"button-no":o.label="No";break;case"button-cancel":o.label="Cancel";break;default:o=null}return o&&o.label&&(o.ztrigger=o.label.toLowerCase()),o}static validateType(t){if(!t)return r.TYPE_NONE;switch(t){case r.TYPE_PRIMARY:case r.TYPE_SECONDARY:case r.TYPE_SUCCESS:case r.TYPE_DANGER:case r.TYPE_WARNING:case r.TYPE_INFO:case r.TYPE_LIGHT:case r.TYPE_DARK:case r.TYPE_LINK:return t;default:return r.TYPE_NONE}}static isTypeNone(t){return r.validateType(t)===r.TYPE_NONE}getId(){return zzb.types.isStringNotEmpty(this.defaultOptions.id)||(this.defaultOptions.id=zzb.uuid.newV4()),this.defaultOptions.id}getClassBackdrop(){return zzb.types.isStringNotEmpty(this.defaultOptions.classBackdrop)||(this.defaultOptions.classBackdrop=""),this.defaultOptions.classBackdrop}getClassDialog(){return zzb.types.isStringNotEmpty(this.defaultOptions.classDialog)||(this.defaultOptions.classDialog=""),this.defaultOptions.classDialog}getTitle(){return zzb.types.isStringNotEmpty(this.defaultOptions.title)||(this.defaultOptions.title=""),this.defaultOptions.title}getBody(){return zzb.types.isStringNotEmpty(this.defaultOptions.body)||(this.defaultOptions.body=""),this.defaultOptions.body}createModal(){if(this.defaultOptions.htmlDialog&&!zzb.types.isStringNotEmpty(this.defaultOptions.htmlDialog))return document.body.insertAdjacentHTML("beforeend",htmlModal),document.getElementById(this.getId());var t=zzb.types.merge({id:this.getId(),arialabel:"arialabel"+this.getId(),classBackdrop:this.getClassBackdrop(),classDialog:this.getClassDialog(),title:this.getTitle(),body:this.getBody(),classVerticalCenter:this.defaultOptions.doVerticalCenter?" modal-dialog-centered":"",classModalHeader:"",noHeaderCloseButton:!1,noHeaderCloseButtonButton:"",dataKeyboard:null},this.defaultOptions);t.classFade="fade",zzb.types.isBoolean(t.noFade)&&!0===t.noFade&&(t.classFade=""),r.isTypeNone(t.type)||(t.classModalHeader+=" alert-"+t.type),zzb.types.isNonEmptyString(t.classDialog)&&(t.classDialog=" "+t.classDialog),zzb.types.isNonEmptyString(t.classBackdrop)&&(t.classBackdrop=" "+t.classBackdrop),!0!==t.hasAutoBackdrop||zzb.types.isStringNotEmpty(t.dataBackdrop)||(t.dataBackdrop="true"),zzb.types.isStringNotEmpty(t.dataBackdrop)&&(t.hasAutoBackdrop=!0,t.extraAttributes+=' data-bs-backdrop="'+t.dataBackdrop+'"'),zzb.types.isBoolean(t.dataKeyboard)&&(t.extraAttributes+=' data-bs-keyboard="'+t.dataKeyboard+'"'),!0!==t.noHeaderCloseButton&&(t.noHeaderCloseButtonButton='<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>');document.body.insertAdjacentHTML("beforeend",zzb.strings.format('<div class="modal {classFade} modal-fullscreen{classBackdrop}" {extraAttributes} id="{id}" tabindex="-1" role="dialog" aria-labelledby="{arialabel}" aria-hidden="true"><div class="modal-dialog{classVerticalCenter}{classDialog}" role="document"><div class="modal-content"><div class="modal-header{classModalHeader}"><h5 class="modal-title" id="{arialabel}">{title}</h5>{noHeaderCloseButtonButton}</div><div class="modal-body">{body}</div><div class="modal-footer"></div></div></div></div>',t));var e=document.getElementById(this.getId());if(!e)throw new Error("unexpected that modal has not been created");var s=this;Array.isArray(t.buttons)||(t.buttons=[]);var o=t.buttons.length;return t.buttons.forEach((function(t,i){zzb.types.isStringNotEmpty(t)&&(t=r.getButtonPreset(t,i,o)),zzb.types.isObject(t)&&(zzb.types.isStringNotEmpty(t.id)||(t.id="button-"+i+"-"+s.getId()),r.isTypeNone(t.type)||(t.isOutline?t.className+=" btn-outline-"+t.type:t.className+=" btn-"+t.type),t.isDismiss&&(zzb.types.isFunction(t.action)||(t.action=function(t,e){t.close()}),zzb.dom.setAttribute(e.querySelector(".modal-header button[data-bs-dismiss]"),"aria-label",t.label)),zzb.types.isStringNotEmpty(t.ztrigger)&&(t.ztrigger=zzb.strings.format(' ztrigger="{0}"',t.ztrigger)),zzb.dom.hasElement(e.querySelector(".modal-footer"))&&(e.querySelector(".modal-footer").insertAdjacentHTML("beforeend",zzb.strings.format('<button id="{id}" type="button" class="btn {className}"{ztrigger}>{label}</button>',t)),document.getElementById(t.id).addEventListener("click",(function(e){if(t&&zzb.types.isFunction(t.action))return t.action.call(document.getElementById(t.id),s,e)}))))})),this.defaultOptions=t,document.getElementById(this.getId())}}var s=function(){this.modals={}};s.prototype.ZazzyDialog=r,s.prototype.modal=function(t){if(t&&t.id&&zzb.types.isStringNotEmpty(t.id)&&this.modals[t.id])return this.modals[t.id];var e=new r(t);if(e&&zzb.types.isStringNotEmpty(e.getId()))return e;throw new Error("Failed to create dialog")},s.prototype.showMessage=function(t){var e=zzb.dialogs.modal(zzb.types.merge({type:r.TYPE_NONE,buttons:[r.BUTTON_OK]},t));if(!0===t.noAutoOpen)return e;e.open()},s.prototype.showMessageChoice=function(t){var e=zzb.dialogs.modal(zzb.types.merge({type:r.TYPE_NONE,buttons:[r.BUTTON_CANCEL,r.getButtonDefaults({type:r.TYPE_PRIMARY,label:"Accept",action:function(t,e){t.close()}})]},t));if(!0===t.noAutoOpen)return e;e.open()},s.prototype.handleError=function(t){if((t=zzb.types.merge({log:null,type:r.TYPE_DANGER,title:"",body:'<div class="zzb-dialog-errors">{errors}</div><div class="zzb-dialog-message">{message}</div>',message:"",errs:null,errors:"",buttons:[r.getButtonDefaults({type:r.TYPE_DANGER,label:"Ok",action:function(t,e){t.close()}})]},t)).log&&console.log(t.log),!zzb.types.isStringNotEmpty(t.errors)&&zzb.types.isArray(t.errs)){var e=[];t.errs.forEach((function(t,r){t.message&&zzb.types.isStringNotEmpty(t.message)&&e.push(zzb.strings.format('<div class="zzb-dialog-error-item">{0}</div>',t.message))})),t.errors=e.join("\n")}t.body=zzb.strings.format(t.body,t),this.showMessage(t)},e.y=s},171:(t,e)=>{function r(){}r.prototype.hasElement=function(t){return t},r.prototype.setAttribute=function(t,e,r){t&&(zzb.types.isObject(t)?t.setAttribute(e,r):zzb.types.isArray(t)&&t.forEach((function(t){t.setAttribute(e,r)})))},r.prototype.getAttributeElse=function(t,e,r){if(null==r&&(r=null),!t)return r;let s=t.getAttribute(e);return zzb.types.isNonEmptyString(s)?s:r},r.prototype.getAttributes=function(t,e,r){if(!t||!e)return{};zzb.types.isNumber(r)||(r=-1);let s={};return[].forEach.call(t.attributes,(function(t){if(e.test(t.name))if(r<=0)s[t.name]=t.value;else{let e=t.name.substr(r).replace(/-(.)/g,(function(t,e){return e.toUpperCase()}));s[e]=t.value}})),s},e.v=r},154:(t,e)=>{var r=function(){};r.prototype.getPO=function(t,e){var r=t[e];return r||this.getPermObject(e+":")},r.prototype.getPermObjectFromPermkeys=function(t){var e={},r=this;if(Array.isArray(t))t.forEach((function(t){var s=r.getPermObject(t);s.key&&(e[s.key]=s)}));else if(zzb.types.isObject(t))for(const i in t){var s=t[i];s||(s="");var o=null;(o=s.indexOf(":")<0?r.getPermObject(i+":"+s):r.getPermObject(s))&&o.key&&(e[o.key]=o)}return e},r.prototype.mergePermkey=function(t,e){if(!e||!zzb.types.isStringNotEmpty(e))return t;if(!t||!zzb.types.isStringNotEmpty(t))return e;var r=null,s={},o={};if(t.indexOf(":")<=0?(s.key=t.trim(),s.perm=""):(r=t.split(":"),s.key=r[0].trim(),s.perm=r[1].trim().toUpperCase()),e.indexOf(":")<=0?(o.key=e.trim().toUpperCase(),o.perm=""):(r=e.split(":"),o.key=r[0].trim(),o.perm=r[1].trim().toUpperCase()),s.key!==o.key||s.perm===o.perm||0===o.perm.length)return t;if(0===s.key.length)return e;for(var i=0;i<o.perm.length;i++)s.perm.indexOf(o.perm[i])<0&&(s.perm+=o.perm[i]);return s.key+":"+s.perm},r.prototype.getPermObject=function(t,e,r){var s={key:null,perm:null,attr:{},toPermkey:function(){return this.key+":"+this.perm}};if((r||zzb.types.isStringNotEmpty(r))&&(t=this.mergePermkey(t,r)),!t||!zzb.types.isStringNotEmpty(t))return s.attr=this.getPermAttributes(),s;if(t.indexOf(":")<=0)return s.key=t,s.perm="",s.attr=this.getPermAttributes(),s;var o=t.split(":");if(s.key=o[0],s.perm=o[1],s.perm=s.perm.trim().toUpperCase(),s.perm.length>0&&e&&zzb.types.isStringNotEmpty(e)){e=e.trim().toUpperCase();for(var i=s.perm.length-1;i>=0;i--)e.indexOf(s.perm[i])<0&&(s.perm=s.perm.replace(s.perm[i],""))}return s.attr=this.getPermAttributes(s.toPermkey(),e),s};var s=new RegExp("^[CRUDX]*$");r.prototype.getPermAttributes=function(t){var e={canRead:!1,canCreate:!1,canUpdate:!1,canDelete:!1,canExecute:!1};return t&&zzb.types.isStringNotEmpty(t)?(t.indexOf(":")>=0&&(t=t.split(":")[1]),0===(t=t.trim().toUpperCase()).length?e:s.test(t)?(e.canRead=t.indexOf("C")>=0,e.canCreate=t.indexOf("R")>=0,e.canUpdate=t.indexOf("U")>=0,e.canDelete=t.indexOf("D")>=0,e.canExecute=t.indexOf("X")>=0,e):e):e},r.prototype.hasMatch=function(t,e){if(!t||!e)return!1;var r=t;if(zzb.types.isStringNotEmpty(t)&&(r=this.getPermObject(t)),!zzb.types.isObject(r)||!r.key||!r.perm||0===r.perm.length)return!1;var s=null;if(zzb.types.isStringNotEmpty(e))s=this.getPermObject(e);else if(Array.isArray(e)){var o=this;e.forEach((function(t){if(zzb.types.isStringNotEmpty(t)&&(t=o.getPermObject(t)),t.key===r.key)return s=t,!1}))}else{if(!zzb.types.isObject(e))return!1;if(e.key)s=e;else{if(!e[r.key])return!1;s=zzb.types.isStringNotEmpty(e[r.key])?this.getPermObject(r.key+":"+e[r.key]):e[r.key]}}if(!s||!s.key||!s.perm||0===!s.perm.length)return!1;for(var i=0;i<s.perm.length;i++)if(r.perm.indexOf(s.perm[i])>=0)return!0;return!1},e.Q=r},334:(t,e)=>{var r=function(){};function s(t){if((t=zzb.types.merge({type:"error",message:null,field:"_system",stack:null,isErr:!0,title:null},t)).isErr)switch("warn"===t.type?t.type="warning":"err"===t.type?t.type="error":"crit"===t.type?t.type="critical":"emerg"===t.type&&(t.type="emergency"),t.type){case"warning":case"notice":case"info":case"debug":t.isErr=!1;break;default:t.isErr=!0}return t}r.prototype.newROB=function(t){return zzb.types.merge({message:null,messageType:null,errs:null,recs:[],columns:[],paginate:{page:0,limit:0,count:0},hasErrors:function(){return this.errs&&Array.isArray(this.errs)&&this.errs.length>0},hasColumns:function(){return this.columns&&Array.isArray(this.columns)&&this.columns.length>0},hasRecords:function(){return this.recs&&Array.isArray(this.recs)&&this.recs.length>0},isEmpty:function(){return!this.hasRecords()||this.hasRecords()&&null===this.first()},first:function(){return this.recs&&Array.isArray(this.recs)&&this.recs.length>0?this.recs[0]:null},find:function(t,e){var r=null;return this.recs.forEach((function(s){if(s&&zzb.types.isObject(s)&&!Array.isArray(s)&&s[t]===e)return r=s,!1})),r},length:function(){return this.recs&&Array.isArray(this.recs)?this.recs.length:0}},t)},r.prototype.toObject=function(t){if(!t||!Array.isArray(t))return{_system:[t]};var e={};return t.forEach((function(t){t&&(t.field||(t.field="_system"),e[t.field]||(e[t.field]=[]),e[t.field].push(t))})),e};var o=function(t,e){if(!t)return s();if(zzb.types.isStringNotEmpty(t))return s(zzb.types.merge({message:t},e));if(!Array.isArray(t)&&zzb.types.isObject(t))return s(t);throw new Error("bad input in createError - unrecognized err datatype")};r.prototype.createError=o,r.prototype.sanitizeErrors=function(t){var e=null;return t?(Array.isArray(t)?t.length>0&&(e=[],t.forEach((function(t){e.push(o(t))}))):e=[o(t)],e):e},r.prototype.sanitizeRecords=function(t){return t?Array.isArray(t)?t:[t]:[]},r.prototype.toListErrs=function(t){return zzb.rob.toList(t)},r.prototype.toList=function(t){var e=[],r=[],s=[],o=[];return t&&Array.isArray(t)&&t.length>0&&t.forEach((function(t){!0===t.isErr?"_system"===t.system?r.push(t):zzb.types.isStringNotEmpty(t.field)?"_system"===t.field?r.push(t):e.push(t):r.push(t):"_system"===t.system?s.push(t):zzb.types.isStringNotEmpty(t.field)?"_system"===t.field?s.push(t):o.push(t):s.push(t)})),{system:r,fields:e,systemMessages:s,fieldMessages:o,hasErrors:function(){return this.hasSystemErrors()||this.hasFieldErrors()},hasSystemErrors:function(){return this.system&&this.system.length>0},hasFieldErrors:function(){return this.fields&&this.fields.length>0},combinedErrors:function(){return this.system.concat(this.fields)},hasMessages:function(){return this.hasSystemMessages()||this.hasFieldMessages()},hasSystemMessages:function(){return this.systemMessages&&this.systemMessages.length>0},hasFieldMessages:function(){return this.fieldMessages&&this.fieldMessages.length>0},combinedMessages:function(){return this.systemMessages.concat(this.fieldMessages)},getByFieldName:function(t,e){if("_system"===e)return t?this.systemMessages:this.system;let r=[];return e?((t?this.fieldMessages:this.fields).forEach((function(s){s.field===e&&(s.isMessage=t,r.push(s))})),r):r},getErrsByName:function(t){return this.getByFieldName(!1,t)},getMessagesByName:function(t){return this.getByFieldName(!0,t)},getAnyByName:function(t){let e=this.getErrsByName(t),r=this.getMessagesByName(t);return e.concat(r)}}},r.prototype.renderListErrs=function(t){return zzb.rob.renderList(t)},r.prototype.renderList=function(t){t=zzb.types.merge({targets:[],format:"text",defaultTitle:"",template:null,htmlWrapList:'<ul class="zzb-rob-{0}">{1}</ul>'},t);let e=[];if(t.errs&&zzb.types.isArrayHasRecords(t.errs)&&(t.targets=t.errs),zzb.types.isArrayHasRecords(t.targets)){let r=t.targets.length>1;if(t.targets.forEach((function(s){let o="";zzb.types.isStringNotEmpty(t.defaultTitle)?o=t.defaultTitle:zzb.types.isStringNotEmpty(s.field)&&(o=s.field),t.template?e.push(zzb.strings.format(t.template,o,s.message)):(s.type||(s.type=s.isMessage?"message":"unknown"),r||"html"!==t.format?"html"===t.format||"html-list"===t.format?e.push(zzb.strings.format('<li class="zzb-rob-list-item-{0}">{1}</li>',s.type,s.message)):"html-list-label"===t.format?e.push(zzb.strings.format('<li class="zzb-rob-list-item-{0}"><span>{1}:</span> {2}</li>',s.type,o,s.message)):"label"===t.format?e.push(zzb.strings.format("{0}: {1}",o,s.message)):"text-punctuated"===t.format?e.push(zzb.strings.toFirstCapitalEndPeriod(s.message)+" "):e.push(zzb.strings.format(s.message)):e.push(zzb.strings.format('<div class="zzb-rob-list-item-{0}">{1}</div>',s.type,s.message)))})),(r&&"html"===t.format||"html-list"===t.format||"html-list-label"===t.format)&&t.htmlWrapList)return zzb.strings.format(t.htmlWrapList,t.format,e.join(""))}return e.join("")},e.S=r},313:(t,e)=>{var r=function(){};function s(t){var e=new Error(t);return e.name="ValueError",e}var o;r.prototype.format=(o={},function(t){var e=Array.prototype.slice.call(arguments,1),r=0,i="UNDEFINED";if(Array.isArray(e)&&e.length>0&&Array.isArray(e[0])){var n=e[0].map((function(t){return t}));e=n}return t.replace(/([{}])\1|[{](.*?)(?:!(.+?))?[}]/g,(function(t,n,a,l){if(null!=n)return n;var p=a;if(p.length>0){if("IMPLICIT"===i)throw s("cannot switch from implicit to explicit numbering");i="EXPLICIT"}else{if("EXPLICIT"===i)throw s("cannot switch from explicit to implicit numbering");i="IMPLICIT",p=String(r),r+=1}var u=p.split("."),c=(/^\d+$/.test(u[0])?u:["0"].concat(u)).reduce((function(t,e){return t.reduce((function(t,r){return null!=r&&e in Object(r)?["function"==typeof r[e]?r[e]():r[e]]:[]}),[])}),[e]).reduce((function(t,e){return e}),"");if(null==l)return c;if(Object.prototype.hasOwnProperty.call(o,l))return o[l](c);throw s('no transformer named "'+l+'"')}))}),r.prototype.formatEmpty=function(t){var e=Array.prototype.slice.call(arguments,1);return Array.isArray(e)?t.replace(/{(\d+)}/g,(function(t,r){return void 0!==e[r]?e[r]:""})):t.replace(/{((?:(?=([^{}]+|{{[^}]*}}))\2)*)}/g,(function(t,r){return e.length>0&&e[0][r]?e[0][r]:""}))},r.prototype.appendIfMoreThan=function(t,e,r){return t&&t.length>r?t.substring(0,r)+e:t},r.prototype.joinArrToCommas=function(t,e){return t&&Array.isArray(t)&&0!==t.length?t.map(t,(function(r,s){var o="";return s<t.index-1&&(o=""),e?r[e]+o:r+o})).join(""):""},r.prototype.toPlural=function(t,e,r){return r=zzb.types.merge({forcePlural:!1,suffix:null},r),1!==e&&-1!==e||r.forcePlural?r.suffix?t+r.suffix:t+"s":t},r.prototype.capitalize=function(t){return zzb.types.isStringNotEmpty(t)?t.charAt(0).toUpperCase()+string.slice(1):""},r.prototype.toFirstCapitalEndPeriod=function(t){return zzb.types.isStringNotEmpty(t)&&(t=t.trim(),(t=zzb.strings.capitalize(t)).endsWith(t,".")||(t+=".")),t};var i=["K","M","G","T","P","E","Z","Y"],n=["KB","MB","GB","TB","PB","EB","ZB","YB"],a=["Kilobyte","Megabyte","Gigabyte","Terabyte","Petabyte","Exabyte","Zettabyte","Yottabyte"],l=["KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"];r.prototype.sizeToHumanReadable=function(t,e,r,s){zzb.types.isStringNotEmpty(e)||(e="single");var o=" ";!0===r&&(o=""),s||(s=1);var p,u=1024,c="B";switch(e.toLowerCase()){case"full":p=a,c="Bytes";break;case"double":p=n;break;case"eic":p=l;break;default:p=i}if(Math.abs(t)<u)return t+o+c;var d=-1,y=Math.pow(s,10);do{t/=u,++d}while(Math.round(Math.abs(t)*y)/y>=u&&d<p.length-1);var f=t.toFixed(s)+"";return(f=zzb.strings.trimSuffix(f,[".00",".0"]))+o+p[d]},r.prototype.trimPrefix=function(t,e){t=zzb.types.toString(t);var r=[];zzb.types.isArray(e)?r=e:r.push(zzb.types.toString(e));for(var s=0;s<r.length;s++)if(t.startsWith(r[s]))return t.slice(r[s]);return t},r.prototype.trimSuffix=function(t,e){t=zzb.types.toString(t);var r=[];zzb.types.isArray(e)?r=e:r.push(zzb.types.toString(e));for(var s=0;s<r.length;s++)if(t.endsWith(r[s]))return t.slice(0,-1*r[s].length);return t},r.prototype.millisecondsTimeToHumanReadable=function(t){var e=t/1e3,r=Math.floor(e/31536e3),s=Math.floor((e%=31536e3)/86400),o=Math.floor((e%=86400)/3600),i=Math.floor((e%=3600)/60),n=e%60;return s||o||n||i?(r?r+"y ":"")+(s?s+"d ":"")+(o?o+"h ":"")+(i?i+"m ":"")+Number.parseFloat(n).toFixed(2)+"s":"< 1s"},r.prototype.toBool=function(t){if(!zzb.types.isNonEmptyString(t))return t;switch(t.toLowerCase().trim()){case"true":case"yes":case"1":return!0;case"false":case"no":case"0":case null:return!1;default:return Boolean(t)}},r.prototype.parseIntOrZero=function(t,e){return zzb.strings.parseTypeElse(t,"int",0,!!e)},r.prototype.parseFloatOrZero=function(t,e){return zzb.strings.parseTypeElse(t,"float",0,!!e)},r.prototype.parseBoolOrFalse=function(t,e){return zzb.strings.parseTypeElse(t,"bool",!1,!!e)},r.prototype.parseTypeElse=function(t,e,r,s){let o=s||zzb.types.isArray(t);if(null==t)return o?[]:r;zzb.types.isArray(t)||(t=[t]);for(let s=0;s<t.length;s++)if(null==t[s]||null===t[s])t[s]=r;else{let o=!1;switch(e){case"int":parsed=parseInt(t[s]),o=!0;break;case"float":parsed=parseFloat(t[s]),o=!0;break;case"bool":t[s]=zzb.strings.toBool(t[s]);break;case"date":case"date-iso":t[s]=zzb.types.isNonEmptyString(t[s])?t[s]:r;break;default:zzb.types.isString(t[s])||zzb.types.isArray(t[s])||zzb.types.isObject(t[s])||(t[s]+="")}o&&(t[s]=isNaN(parsed)?r:parsed)}return o?t:t[0]},r.prototype.mergeElseEmpty=function(t,e,r){let s=e;return zzb.types.isStringNotEmpty(s)||(s=r,zzb.types.isStringNotEmpty(s))?zzb.strings.format(t,s):""},e.j=r},449:(t,e)=>{function r(){}r.prototype.merge=function(t,e){return s(t,e)};const s=function(...arguments){let t={};const e=e=>{for(let r in e)e.hasOwnProperty(r)&&("[object Object]"===Object.prototype.toString.call(e[r])?t[r]=s(t[r],e[r]):t[r]=e[r])};for(let t=0;t<arguments.length;t++)e(arguments[t]);return t};r.prototype.truncate=function(t,e){return t.toString().substring(0,t.toString().indexOf("."))+t.toString().substr(t.toString().indexOf("."),e+1)},r.prototype.escapeHtml=function(t){return t?t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"):""},r.prototype.baseToString=function(t){if("string"==typeof t)return t;if(zzb.types.isNumber(t)){var e=trimSuffix+"";return"0"==e&&1/t==-INFINITY?"-0":e}return""},r.prototype.toString=function(t){return null==t?"":zzb.types.baseToString(t)},r.prototype.isArray=function(t){return t&&void 0!==t&&"[object Array]"===Object.prototype.toString.call(t)},r.prototype.isArrayHasRecords=function(t){return zzb.types.isArray(t)&&t.length>0},r.prototype.isObject=function(t){return t&&"object"==typeof t},r.prototype.isNumber=function(t){return!isNaN(t-0)&&null!==t&&""!==t&&!1!==t},r.prototype.isNonEmptyString=function(t){return zzb.types.isStringNotEmpty(t)},r.prototype.isStringNotEmpty=function(t){return t&&"string"==typeof t&&t.trim().length>0},r.prototype.isEmptyString=function(t){return zzb.types.isStringEmpty(t)},r.prototype.isStringEmpty=function(t){return t&&"string"==typeof t&&0===t.trim().length},r.prototype.isString=function(t){return t&&"string"==typeof t},r.prototype.isFunction=function(t){return t&&"[object Function]"==={}.toString.call(t)},r.prototype.isBoolean=function(t){return"boolean"==typeof t},r.prototype.compare=function(t,e,r){return t===e?0:r?t>e?-1:1:t>e?1:-1},e.V=r},781:(t,e)=>{var r=function(){};r.prototype.newV4=function(){function t(t){return 0|t*Math.random()}function e(e){for(var r="",s=0;s<e;++s)r+=t(16).toString(16);return r}return e(8)+"-"+e(4)+"-4"+e(3)+"-"+(3&t(16)|8).toString(16)+e(3)+"-"+e(12)},r.prototype.isV4=function(t){return/^[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(t)},r.prototype.isValid=function(t){return/^([a-f\d]{8}(-[a-f\d]{4}){3}-[a-f\d]{12}?)$/i.test(t)},e.V=r},936:function(t,e,r){var s,o,i,n;i=this,n=function(){var t=r(449).V,e=r(781).V,s=r(313).j,o=r(171).v,i=r(772).y,n=r(154).Q,a=r(334).S,l=r(546).h;function p(){}return p.prototype.types=new t,p.prototype.uuid=new e,p.prototype.strings=new s,p.prototype.dom=new o,p.prototype.dialogs=new i,p.prototype.perms=new n,p.prototype.rob=new a,p.prototype.ajax=new l,new p},"undefined"!=typeof window?window.zzb=n():void 0!==i?i.zzb=n():void 0===(o="function"==typeof(s=n)?s.call(e,r,e,t):s)||(t.exports=o)}},e={};(function r(s){var o=e[s];if(void 0!==o)return o.exports;var i=e[s]={exports:{}};return t[s].call(i.exports,i,i.exports,r),i.exports})(936)})();