//! zzb.js
//! version: 1.0.0
//! author(s): Jaret Pfluger
//! license: MIT
//! https://github.com/jpfluger/zazzy-browser
!function s(o,a,l){function u(e,t){if(!a[e]){if(!o[e]){var r="function"==typeof require&&require;if(!t&&r)return r(e,!0);if(d)return d(e,!0);var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}var i=a[e]={exports:{}};o[e][0].call(i.exports,function(t){return u(o[e][1][t]||t)},i,i.exports,s,o,a,l)}return a[e].exports}for(var d="function"==typeof require&&require,t=0;t<l.length;t++)u(l[t]);return u}({1:[function(t,e,r){var n=window.$;function i(){this.ajax=function(o){return new Promise(function(i,s){n.ajax(o).done(function(t,e,r){if(o.RAWRETURN)return i(t);if(!t)return s(new Error("Data returned is empty when at minimum a status is required"));var n=zzb.rob.newROB();if(r.responseJSON){if(t.redirect&&0<t.redirect.length)return void(window.location.href=t.redirect);t.ISROBERRORS||(t.err?(t.errs=zzb.rob.sanitizeErrors(t.err),t.err=null):t.error?(t.error=zzb.rob.sanitizeErrors(t.error),t.error=null):t.errs&&(t.errs=zzb.rob.sanitizeErrors(t.errs),t.err=null)),t.ISROBRECS||(t.recs?t.recs=zzb.rob.sanitizeRecords(t.rec):t.rec?(t.recs=zzb.rob.sanitizeRecords(t.rec),t.rec=null):t.recs=zzb.rob.sanitizeRecords(t)),n.errs=t.errs,n.recs=t.recs,n.fields=t.fields}else n.recs=[t];i(n)}).fail(function(t,e,r){s(r),console.log(r)})})}}i.prototype.get=function(t){return t.type="GET",t.contentType="application/json; charset=UTF-8",t.data=JSON.stringify(t.data),this.ajax(t)},i.prototype.getJSON=function(t){return t.type="GET",t.dataType="json",t.contentType="application/json; charset=UTF-8",t.data=JSON.stringify(t.data),this.ajax(t)},i.prototype.postJSON=function(t){return t.type="POST",t.dataType="json",t.contentType="application/json; charset=UTF-8",t.data=JSON.stringify(t.data),this.ajax(t)},r.ajax=i},{}],2:[function(t,e,r){var s=window._,n=function(t){this.defaultOptions=s.merge({id:zzb.uuid.newV4(),className:"",title:"",body:"",buttons:[],onShow:null,onShown:null,onHide:null,onHidden:null},t),this.defaultOptions.onShow="function"==typeof t.onShow?t.onShow:function(){},this.defaultOptions.onShown="function"==typeof t.onShown?t.onShown:function(){},this.defaultOptions.onHide="function"==typeof t.onHide?t.onHide:function(){},this.defaultOptions.onHidden="function"==typeof t.onHidden?t.onHidden:function(){}};n.prototype.getId=function(){return zzb.types.isNonEmptyString(this.defaultOptions.id)||(this.defaultOptions.id=zzb.uuid.newV4()),this.defaultOptions.id},n.prototype.getClassName=function(){return zzb.types.isNonEmptyString(this.defaultOptions.className)||(this.defaultOptions.className=""),this.defaultOptions.className},n.prototype.getTitle=function(){return zzb.types.isNonEmptyString(this.defaultOptions.title)||(this.defaultOptions.title=""),this.defaultOptions.title},n.prototype.getBody=function(){return zzb.types.isNonEmptyString(this.defaultOptions.body)||(this.defaultOptions.body=""),this.defaultOptions.body},n.prototype.create$Modal=function(){var t={id:this.getId(),arialabel:"arialabel"+this.getId(),className:this.getClassName(),title:this.getTitle(),body:this.getBody()},n=$(zzb.strings.format('<div class="modal fade modal-fullscreen {cssClass}" id="{id}" tabindex="-1" role="dialog" aria-labelledby="{arialabel}" aria-hidden="true"><div class="modal-dialog" role="document"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="{arialabel}">{title}</h5><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button></div><div class="modal-body">{body}</div><div class="modal-footer"></div></div></div></div>',t));Array.isArray(this.defaultOptions.buttons)||(this.defaultOptions.buttons=[]);var i=this;return s.each(this.defaultOptions.buttons,function(t,e){if(zzb.types.isNonEmptyString(t)&&(t=i.getButtonPreset(t)),zzb.types.isObject(t)){zzb.types.isNonEmptyString(t.id)||(t.id="button-"+e+"-"+i.getId());var r=$(zzb.strings.format('<button id="{id}" type="button" class="btn btn-default {className}">{name}</button>',t));r.data("button",t),r.on("click",{dialog:i,$button:r,button:t},function(t){var e=t.data.dialog,r=t.data.$button,n=r.data("button");if("function"==typeof n.action)return n.action.call(r,e,t)}),0<n.find(".modal-footer > button").length?r.insertAfter(n.find(".modal-footer > button").last()):n.find(".modal-footer").append(r)}}),n},n.prototype.getButtonPreset=function(t){var e={id:null,name:"",className:"",action:null},r=function(t,e){t.close()};switch(t){case"BUTTON_CLOSE":e.name="Close",e.action=r;break;case"BUTTON_OK":e.name="Ok";break;case"BUTTON_YES":e.name="Yes";break;case"BUTTON_NO":e.name="No",e.autoDismiss=r;break;case"BUTTON_CANCEL":e.name="Cancel",e.autoDismiss=r;break;default:e=null}return e},n.prototype.open=function(){if(!this.$modal){this.$modal=this.create$Modal();var e=this;this.$modal.appendTo("body"),this.$modal.on("show.bs.modal",function(t){e.onShow.call(e,t)}),this.$modal.on("shown.bs.modal",function(t){e.onShown.call(e,t)}),this.$modal.on("hide.bs.modal",function(t){e.onHide.call(e,t)}),this.$modal.on("hidden.bs.modal",function(t){e.onHidden.call(e,t)})}this.$modal.modal("show")},n.prototype.onShow=function(t){this.defaultOptions.onShow(t,this,this.$modal)},n.prototype.onShown=function(t){this.defaultOptions.onShown(t,this,this.$modal)},n.prototype.onHide=function(t){this.defaultOptions.onHide(t,this,this.$modal)},n.prototype.onHidden=function(t){this.defaultOptions.onHidden(t,this,this.$modal)},n.prototype.close=function(){this.$modal.modal("hide")},n.prototype.hide=function(){this.$modal.modal("hide"),this.$modal.modal("dispose"),0<$("#"+this.getId()).length&&$("#"+this.getId()).remove(),this.$modal=null};var i=function(){this.BUTTON_CLOSE="BUTTON_CLOSE",this.BUTTON_OK="BUTTON_OK",this.BUTTON_YES="BUTTON_YES",this.BUTTON_NO="BUTTON_NO",this.BUTTON_CANCEL="BUTTON_CANCEL"};i.prototype.modal=function(t){return new n(t)},i.prototype.showMessage=function(t){t=s.merge({type:BootstrapDialog.TYPE_DEFAULT,title:"",message:"",buttonCloseName:"Ok",onShown:null},t),alert("showMessage")},i.prototype.showMessageChoice=function(t){alert("showMessageChoice")},i.prototype.handleError=function(t){if((t=s.merge({log:null,title:"",message:null,errs:null},t)).log&&console.log(t.log),t.errs&&Array.isArray(t.errs)&&0<t.errs.length&&t.errs[0]){var r=[];s.each(t.errs,function(t,e){t.message&&zzb.types.isNonEmptyString(t.message)&&r.push(zzb.strings.format("<div>{0}</div>",t.message))}),0<r.length&&(t.message||(t.message=""),t.errIntro&&(t.message+=" "+t.errIntro),t.message+=" "+r.join(""))}t.message&&this.showMessage({type:BootstrapDialog.TYPE_DANGER,title:t.title,message:t.message})},r.dialogs=i},{}],3:[function(t,e,r){var u=window.$,d=window._,n=function(){},i=function(t,n){var i=[],s=[];if(!t||0===t.length||!t[0]){if(n.hideWhenNoError)return{html:null,contentPopOver:null};t=[{type:"success",message:null}]}return d.each(t,function(t,e){if(t.field||(t.field="_system"),"_system"===t.field)i.push(zzb.strings.format("<div>{0}</div>",t.message));else{var r=n.typeFormats.error;t.type&&n.typeFormats[t.type]&&(r=n.typeFormats[t.type]),0===e&&i.push(zzb.strings.format('<span class="glyphicon {0} {1}"></span>',r.glyph,r.textClass)),t.message&&zzb.types.isNonEmptyString(t.message)&&s.push(t.message)}}),{html:i.join(" "),contentPopOver:s.join("  ")}},s=function(t){t.$elem&&0<t.$elem.length&&t&&t.contentPopOver&&zzb.types.isNonEmptyString(t.contentPopOver)&&t.$elem.popover({trigger:"hover",animation:!1,content:t.contentPopOver})};n.prototype.displayUIErrors=function(o,t){if((o=d.merge({selector:null,$form:null,selectorField:".zzb-form-field",attrFieldname:"zzb-fieldname",selectorError:".zzb-form-field-error",errs:null,err:null,hideWhenNoError:!1,typeFormats:{error:{glyph:"glyphicon-remove",textClass:"text-danger",bgClass:null},warning:{glyph:"glyphicon-warning",textClass:"text-warning",bgClass:null},success:{glyph:"glyphicon-ok",textClass:"text-success",bgClass:null},default:null},renderErrorHtml:i,afterHtmlAdded:s,handleSystemErrors:null},o)).renderErrorHtml){if(o.$form?o.selector=null:o.selector&&(o.$form=u("selector")),!o.$form||0===o.$form.length)return t&&t(!1);o.err&&!Array.isArray(o.err)?(o.errs=[zzb.rob.createError(o.err)],o.err=null):o.errs&&!Array.isArray(o.errs)&&(o.errs=[zzb.rob.createError(o.errs)],o.err=null);var a=zzb.rob.toObject(o.errs),l=!1;o.$form.find(o.selectorError).each(function(t,e){var r=u(e),n=r.closest(o.selectorField);if(0===n.length)return console.log("discovered an error field but could not determine the field to which it belongs (eg zzb-form-field)"),!0;var i=n.attr(o.attrFieldname);if(zzb.types.isEmptyString(i))return console.log('discovered an error field and its parent field (eg zzb-form-field) but the fieldname attribute is empty (eg zzb-fieldname="")'),!0;"_system"===i&&(l=!0);var s=o.renderErrorHtml(a[i],o);r.html(s.html),s.html&&zzb.types.isNonEmptyString(s.html)?r.removeClass("hidden"):r.addClass("hidden"),s.fieldname=i,s.$elem=r,o.afterHtmlAdded&&o.afterHtmlAdded(s)})}!l&&a._system&&0<a._system.length&&a._system[0]&&(o.handleSystemErrors?o.handleSystemErrors(a._system,o):zzb.dialogs.handleError({errs:a._system})),t&&t(!1)},r.forms=n},{}],4:[function(t,e,r){var o=window._,n=function(){};n.prototype.getPO=function(t,e){var r=t[e];return r||this.getPermObject(e+":")},n.prototype.getPermObjectFromPermkeys=function(t){var n={},i=this;return Array.isArray(t)?o.each(t,function(t){var e=i.getPermObject(t);e.key&&(n[e.key]=e)}):zzb.types.isObject(t)&&o.forOwn(t,function(t,e){t||(t="");var r=null;(r=t.indexOf(":")<0?i.getPermObject(e+":"+t):i.getPermObject(t))&&r.key&&(n[r.key]=r)}),n},n.prototype.mergePermkey=function(t,e){if(!e||!zzb.types.isNonEmptyString(e))return t;if(!t||!zzb.types.isNonEmptyString(t))return e;var r=null,n={},i={};if(t.indexOf(":")<=0?(n.key=t.trim(),n.perm=""):(r=t.split(":"),n.key=r[0].trim(),n.perm=r[1].trim().toUpperCase()),e.indexOf(":")<=0?(i.key=e.trim().toUpperCase(),i.perm=""):(r=e.split(":"),i.key=r[0].trim(),i.perm=r[1].trim().toUpperCase()),n.key!==i.key||n.perm===i.perm||0===i.perm.length)return t;if(0===n.key.length)return e;for(var s=0;s<i.perm.length;s++)n.perm.indexOf(i.perm[s])<0&&(n.perm+=i.perm[s]);return n.key+":"+n.perm},n.prototype.getPermObject=function(t,e,r){var n={key:null,perm:null,attr:{},toPermkey:function(){return this.key+":"+this.perm}};if((r||zzb.types.isNonEmptyString(r))&&(t=this.mergePermkey(t,r)),!t||!zzb.types.isNonEmptyString(t))return n.attr=this.getPermAttributes(),n;if(t.indexOf(":")<=0)return n.key=t,n.perm="",n.attr=this.getPermAttributes(),n;var i=t.split(":");if(n.key=i[0],n.perm=i[1],n.perm=n.perm.trim().toUpperCase(),0<n.perm.length&&e&&zzb.types.isNonEmptyString(e)){e=e.trim().toUpperCase();for(var s=n.perm.length-1;0<=s;s--)e.indexOf(n.perm[s])<0&&(n.perm=n.perm.replace(n.perm[s],""))}return n.attr=this.getPermAttributes(n.toPermkey(),e),n};var i=new RegExp("^[CRUDX]*$");n.prototype.getPermAttributes=function(t){var e={canRead:!1,canCreate:!1,canUpdate:!1,canDelete:!1,canExecute:!1};return t&&zzb.types.isNonEmptyString(t)?(0<=t.indexOf(":")&&(t=t.split(":")[1]),0===(t=t.trim().toUpperCase()).length||i.test(t)&&(e.canRead=0<=t.indexOf("C"),e.canCreate=0<=t.indexOf("R"),e.canUpdate=0<=t.indexOf("U"),e.canDelete=0<=t.indexOf("D"),e.canExecute=0<=t.indexOf("X")),e):e},n.prototype.hasMatch=function(t,e){if(!t||!e)return!1;var r=t;if(zzb.types.isNonEmptyString(t)&&(r=this.getPermObject(t)),!zzb.types.isObject(r)||!r.key||!r.perm||0===r.perm.length)return!1;var n=null;if(zzb.types.isNonEmptyString(e))n=this.getPermObject(e);else if(Array.isArray(e)){var i=this;o.each(e,function(t){if(zzb.types.isNonEmptyString(t)&&(t=i.getPermObject(t)),t.key===r.key)return n=t,!1})}else{if(!zzb.types.isObject(e))return!1;if(e.key)n=e;else{if(!e[r.key])return!1;n=zzb.types.isNonEmptyString(e[r.key])?this.getPermObject(r.key+":"+e[r.key]):e[r.key]}}if(!n||!n.key||!n.perm||0===!n.perm.length)return!1;for(var s=0;s<n.perm.length;s++)if(0<=r.perm.indexOf(n.perm[s]))return!0;return!1},r.perms=n},{}],5:[function(t,e,r){var a=window._,n=function(){};function i(t){if((t=a.merge({type:"error",message:null,field:"_system",stack:null,isErr:!0},t)).isErr)switch(t.type){case"warning":case"notice":case"info":case"debug":t.isErr=!1;break;default:t.isErr=!0}return t}n.prototype.newROB=function(t){return a.merge({errs:null,recs:[],fields:[],hasErrors:function(){return this.errs&&Array.isArray(this.errs)&&0<this.errs.length},hasFields:function(){return this.fields&&Array.isArray(this.fields)&&0<this.fields.length},hasRecords:function(){return this.recs&&Array.isArray(this.recs)&&0<this.recs.length},isEmpty:function(){return!this.hasRecords()||this.hasRecords()&&null===this.first()},first:function(){return this.recs&&Array.isArray(this.recs)&&0<this.recs.length?this.recs[0]:null},find:function(e,r){var n=null;return a.each(this.recs,function(t){if(t&&zzb.types.isObject(t)&&!Array.isArray(t)&&t[e]===r)return n=t,!1}),n},length:function(){return this.recs&&Array.isArray(this.recs)?this.recs.length:0}},t)},n.prototype.toObject=function(t){if(!t||!Array.isArray(t))return{_system:[t]};var e={};return a.each(t,function(t){t&&(t.field||(t.field="_system"),e[t.field]||(e[t.field]=[]),e[t.field].push(t))}),e};var s=function(t,e){if(!t)return i();if(zzb.types.isNonEmptyString(t))return i(a.merge({message:t},e));if(!Array.isArray(t)&&zzb.types.isObject(t))return i(t);throw new Error("bad input in createError - unrecognized err datatype")};n.prototype.createError=s,n.prototype.sanitizeErrors=function(t){var e=null;return t&&(Array.isArray(t)?0<t.length&&(e=[],a.each(t,function(t){e.push(s(t))})):e=[s(t)]),e},n.prototype.sanitizeRecords=function(t){return t?Array.isArray(t)?t:[t]:[]},n.prototype.toListErrs=function(t,n,i,e){var s=[];function o(t){return e?zzb.strings.format(e,t.message):"html"===n?zzb.strings.format("<li>{0}</li>",t.message):zzb.strings.format("System: {0}",t.message)}return n=n||"text",t&&Array.isArray(t)&&0<t.length&&a.each(t,function(t){var e,r;"_system"===t.system?s.push(o(t)):t.field?s.push((r=(e=t).title,e.title||(r=e.field),i?zzb.strings.format(i,r,e.message):"html"===n?zzb.strings.format("<li><strong>{0}</strong>: {1}</li>",r,e.message):zzb.strings.format("{0}: {1}",r,e.message))):s.push(o(t))}),{system:s,fields:[],hasSystemErrors:function(){return this.system&&0<this.system.length},hasFieldErrors:function(){return this.fields&&0<this.fields.length},combined:function(){return this.system.concat(this.fields)},hasErrors:function(){return this.hasSystemErrors()&&this.hasFieldErrors()}}},r.rob=n},{}],6:[function(t,e,r){var s=window.$,o=window._,n=function(){this.zzbStatus=null};n.prototype.get=function(t,e){var r=(t=o.merge({path:window.location.path,role:null})).path===window.location.path&&!t.role;if(r){if(this.zzbStatus)return e&&e(null,this.zzbStatus);var n=null;if("undefined"!=typeof Storage&&sessionStorage.zzbStatus){try{n=JSON.parse(sessionStorage.getItem("zzbStatus"))}catch(t){console.log("unable to parse zzbStatus from sessionStorage: "+t)}if(sessionStorage.setItem("zzbStatus",null),n)return this.zzbStatus=n,e&&e(null,this.zzbStatus)}if(0<s("#zzbStatus").length&&zzb.types.isNonEmptyString(s("#zzbStatus").attr("status"))){try{n=JSON.parse(s("#zzbStatus").attr("status"))}catch(t){console.log("unable to parse zzbStatus from embedded attribute in #zzbStatus: "+t)}if(n)return this.zzbStatus=n,e&&e(null,this.zzbStatus)}}n={user:{isLoggedIn:!1,username:null},page:{path:window.location.pathname}};var i=this;zzb.ajax.postJSON({url:"/zzb/status",data:t}).then(function(t){t.errs?e&&e(t.errs,n):(r&&(i.zzbStatus=t.one()),e&&e(null,t.one()))}).catch(function(t){console.log("failed to retrieve zzbStatus: using defaults"),e&&e(zzb.types.sanitizeErrors(t),n)})},r.status=n},{}],7:[function(t,e,r){var d,n=window._,i=function(){},p=function(t){var e=new Error(t);return e.name="ValueError",e};i.prototype.format=(d={},function(t){var a=Array.prototype.slice.call(arguments,1),l=0,u="UNDEFINED";return Array.isArray(a)&&0<a.length&&Array.isArray(a[0])&&(a=a[0].map(function(t){return t})),t.replace(/([{}])\1|[{](.*?)(?:!(.+?))?[}]/g,function(t,e,r,n){if(null!=e)return e;if(0<r.length){if("IMPLICIT"===u)throw p("cannot switch from implicit to explicit numbering");u="EXPLICIT"}else{if("EXPLICIT"===u)throw p("cannot switch from explicit to implicit numbering");u="IMPLICIT",r=String(l),l+=1}var i,s,o=(i="",null==(s=function(t,e){/^\d+$/.test(e[0])||(e=["0"].concat(e));for(var r=0;r<e.length;r+=1){var n=e[r];t="function"==typeof t[n]?t[n]():t[n]}return t}(a,r.split(".")))?i:s);if(null==n)return o;if(Object.prototype.hasOwnProperty.call(d,n))return d[n](o);throw p('no transformer named "'+n+'"')})}),i.prototype.formatEmpty=function(t){var r=Array.prototype.slice.call(arguments,1);return Array.isArray(r)?t.replace(/{(\d+)}/g,function(t,e){return void 0!==r[e]?r[e]:""}):t.replace(/{((?:(?=([^{}]+|{{[^}]*}}))\2)*)}/g,function(t,e){return 0<r.length&&r[0][e]?r[0][e]:""})},i.prototype.appendIfMoreThan=function(t,e,r){return t&&t.length>r?t.substring(0,r)+e:t},i.prototype.joinArrToCommas=function(n,i){return n&&Array.isArray(n)&&0!==n.length?n.map(n,function(t,e){var r="";return e<n.index-1&&(r=""),i?t[i]+r:t+r}).join(""):""},i.prototype.toPlural=function(t,e,r){return r=n.merge({forcePlural:!1,suffix:null},r),1!==e&&-1!==e||r.forcePlural?r.suffix?t+r.suffix:t+"s":t},r.strings=i},{}],8:[function(t,e,r){function n(){}n.prototype.escapeJqueryId=function(t,e){return(e=null==e?"#":e)+t.replace(/(:|\.|\[|\]|,)/g,"\\$1")},n.prototype.escapeHtml=function(t){return t?t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"):""},n.prototype.isArray=function(t){return t&&void 0!==t&&"[object Array]"===Object.prototype.toString.call(t)},n.prototype.isArrayHasRecords=function(t){return this.isArray(t)&&0<t.length},n.prototype.isObject=function(t){return t&&"object"==typeof t},n.prototype.isNumber=function(t){return!isNaN(t-0)&&null!==t&&""!==t&&!1!==t},n.prototype.isNonEmptyString=function(t){return t&&"string"==typeof t&&0<t.trim().length},n.prototype.isEmptyString=function(t){return t&&"string"==typeof t&&0===t.trim().length},n.prototype.isString=function(t){return t&&"string"==typeof t},n.prototype.isFunction=function(t){return t&&"[object Function]"==={}.toString.call(t)},n.prototype.compare=function(t,e,r){return t===e?0:r?e<t?-1:1:e<t?1:-1},r.types=n},{}],9:[function(t,e,r){var n=window._,i=function(){};i.prototype.createPanelGroup=function(t){t=n.merge({id:zzb.uuid.newV4(),classPanelGroup:"",innerHtml:""},t);return zzb.strings.format('<div id="panelGroup_{id}" class="panel-group {classPanelGroup}">{innerHtml}</div>',t)},i.prototype.createPanelBody=function(t){t=n.merge({id:zzb.uuid.newV4(),classPanelBody:"",innerHtml:""},t);return zzb.strings.format('<div id="panelBody_{id}" class="panel-body {classPanelBody}">{innerHtml}</div>',t)},i.prototype.createPanel=function(t){t=n.merge({id:zzb.uuid.newV4(),className:"",attributesExtra:"",classPanelHeading:"",name:"",classPanelBody:"",innerHtml:""},t);var e='<div id="panel_{id}" class="panel panel-default {className}" {attributesExtra}><div class="panel-heading {classPanelHeading}>">{name}</div><div id="panelBody_{id}" class="panel-body {classPanelBody}">'+this.createPanelBody(t)+"</div></div>";return zzb.strings.format(e,t)},i.prototype.createPanelCollapsible=function(t){(t=n.merge({id:zzb.uuid.newV4(),className:"",attributesExtra:"",name:"",classPanelBody:"",innerHtml:"",isPanelCollapsed:!1,classNamePanelCollapsed:"",titleHtmlExtra:"",titleHtmlExtraRight:""},t)).isPanelCollapsed?(t._panelCollapsedClass1="collapsed",t._panelCollapsedClass2=""):(t._panelCollapsedClass1="",t._panelCollapsedClass2="in");var e='<div id="panel_{id}" class="panel panel-default {className}" {attributesExtra}><div class="panel-heading"><h4 class="panel-title">{titleHtmlExtra}<a data-toggle="collapse" data-target="#panelCollapse_{id}" href="#panelCollapse_{id}" class="{_panelCollapsedClass1}{classNamePanelCollapsed}">{name}</a> {titleHtmlExtraRight}</h4></div><div id="panelCollapse_{id}" class="panel-collapse collapse {_panelCollapsedClass2}">'+this.createPanelBody(t)+"</div></div>";return zzb.strings.format(e,t)},i.prototype.createPanelCollapsibleBegin=function(t){(t=n.merge({id:zzb.uuid.newV4(),className:"",attributesExtra:"",name:"",classPanelBody:"",innerHtml:"",isPanelCollapsed:!1,classNamePanelCollapsed:"",titleHtmlExtra:"",titleHtmlExtraRight:""},t)).isPanelCollapsed?(t._panelCollapsedClass1="collapsed",t._panelCollapsedClass2=""):(t._panelCollapsedClass1="",t._panelCollapsedClass2="in");return zzb.strings.format('<div class="panel panel-default {className}" id="panel_{id}" {attributesExtra}><div class="panel-heading"><h4 class="panel-title">{titleHtmlExtra}<a data-toggle="collapse" data-target="#panelCollapse_{id}" href="#panelCollapse_{id}" class="{_panelCollapsedClass1}{classNamePanelCollapsed}">{name}</a> {titleHtmlExtraRight}</h4></div><div id="panelCollapse_{id}" class="panel-collapse collapse {_panelCollapsedClass2}"><div class="panel-body" id="panelBody_{id}">',t)},i.prototype.createPanelCollapsibleEnd=function(){return"</div></div></div>"},r.uib=i},{}],10:[function(t,e,r){var n=window._,i=function(){};i.prototype.newV4=function(){var r=n.now();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=(r+n.random(16))%16|0;return r=Math.floor(r/16),("x"===t?e:3&e|8).toString(16)})},i.prototype.isV4=function(t){return/^[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(t)},i.prototype.isValid=function(t){return/^([a-f\d]{8}(-[a-f\d]{4}){3}-[a-f\d]{12}?)$/i.test(t)},r.uuid=i},{}],11:[function(t,e,r){var s=window._;function i(t,e,r,n){return new o(t,e,r,n)}function o(t,e,r,n){this.parent=t,this.data=e,this.pkField=r,this.parentField=n,this.nodeConstructor=i,this.nodeItemConstructor=i,this.isDirty=!1,this.data[r]||(this.data[r]=null),this.data[n]||(this.data[n]=null),this.parent?this.parent.getId()!==this.data[n]&&(this.data[n]=this.parent.getId(),this.isDirty=!0):this.parent=null,this.children=[],this.getData=function(){return this.data},this.getId=function(){return this.data[r]},this.getParent=function(){return this.parent},this.getRoot=function(){return null===this.parent?this:this.parent.getRoot()},this.removeChild=function(e){if(0<this.children.length){var t=s.findIndex(this.children,function(t){return t.getId()===e});-1<t&&this.children.splice(t,1)}},this.addChild=function(e,t,r){var n=this,i=s.find(this.children,function(t){return t.getId()===e[n.pkField]});return i||(i=this.nodeConstructor(this,e,t||this.pkField,r||this.parentField),this.children.push(i)),i},this.findChild=function(e,r){var n=null;return this.getId()===e?n=this:(r&&0<this.items.length&&s.each(this.items,function(t){if(t.getId()===e)return n=t,!1}),!n&&0<this.children.length&&s.each(this.children,function(t){if(n=t.findChild(e,r))return!1})),n},this.items=[],this.itemOwner=null,this.getItemOwner=function(){return this.itemOwner},this.addItem=function(e,t,r){var n=this,i=s.find(this.items,function(t){return t.getId()===e[n.pkField]});return i||((i=this.nodeItemConstructor(null,e,t,r)).itemOwner=this).items.push(i),i},this.removeItem=function(e){if(0<this.items.length){var t=s.findIndex(this.items,function(t){return t.getId()===e});-1<t&&this.items.splice(t,1)}},this.findItem=function(e){var r=null;return 0<this.items.length&&s.each(this.items,function(t){if(t.getId()===e)return r=t,!1}),!r&&0<this.children.length&&s.each(this.children,function(t){if(r=t.findItem(e))return!1}),r},this.sortChildren=function(e,t){e&&0<this.children.length&&(this.children.sort(e),t||s.each(this.children,function(t){t.sortChildren(e)}))},this.sortItems=function(t,e,r){t&&0<this.items.length&&(this.items.sort(t),e&&s.each(this.items,function(t){r||t.sortChildren(e,r)}))},this.getLevelDeep=function(){var t=0;return this.parent&&(t=1,t+=this.parent.getLevelDeep()),t},this.branchCallFunction=function(t,e,r){e||t&&t(this),this.parent&&this.parent.branchCallfunction(t,e,r),r&&this.itemOwner&&this.itemOwner.branchCallfunction(t,e,r),e&&t&&t(this)},this.branchCallFunctionChildren=function(e,r){e&&e(this),0<this.children.length&&s.each(this.children,function(t){t.branchCallFunctionChildren(e,r)}),r&&0<this.items.length&&s.each(this.items,function(t){t.branchCallFunctionChildren(e,r)})}}e.exports.zzNode=o},{}],12:[function(c,r,t){if("undefined"==typeof jQuery)throw new Error("zazzy-browser's JavaScript requires jQuery. jQuery must be included before zazzy-browser's JavaScript.");if("undefined"==typeof _)throw new Error("zazzy-browser's JavaScript requires lodash. lodash must be included before zazzy-browser's JavaScript.");!function(t,e){if("undefined"!=typeof window)window.zzb=e();else if(void 0!==t)t.zzb=e();else if("function"==typeof define&&define.amd)define(e);else{if("object"!=typeof r||!r.exports)throw new Error("could not locate global cache object in which to create zzb");r.exports=e()}}(this,function(){"use strict";var t=c("./zzNode.js"),e=c("./types.js").types,r=c("./uuid.js").uuid,n=c("./strings.js").strings,i=c("./uib.js").uib,s=c("./forms.js").forms,o=c("./dialogs.js").dialogs,a=c("./perms.js").perms,l=c("./rob.js").rob,u=c("./ajax.js").ajax,d=c("./status.js").status;function p(){}return p.prototype.zzNode=t,p.prototype.types=new e,p.prototype.uuid=new r,p.prototype.strings=new n,p.prototype.uib=new i,p.prototype.forms=new s,p.prototype.dialogs=new o,p.prototype.perms=new a,p.prototype.rob=new l,p.prototype.ajax=new u,p.prototype.status=new d,new p})},{"./ajax.js":1,"./dialogs.js":2,"./forms.js":3,"./perms.js":4,"./rob.js":5,"./status.js":6,"./strings.js":7,"./types.js":8,"./uib.js":9,"./uuid.js":10,"./zzNode.js":11}]},{},[12]);