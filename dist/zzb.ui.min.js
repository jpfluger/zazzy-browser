//! zzb.ui.min.js v2.4.2 (https://github.com/jpfluger/zazzy-browser)
//! MIT License; Copyright 2017-2021 Jaret Pfluger
(()=>{var t={546:(t,e)=>{function n(){}n.prototype.ajax=function(t){return this.request(t,t.callback)},n.prototype.request=function(t,e){return zzb.types.isFunction(e)||(e=function(){}),t=zzb.types.merge({url:null,method:"GET",body:null,expectType:"text",headers:{},RAWRETURN:!1,SKIPREDIRECT:!1,SKIPFLASH:!1,SHOWCATCHMESSAGE:!1,NOCATCHLOG:!1,NOCATCHFLASH:!1,CATCHFLASHMESSAGE:""},t),zzb.types.isStringNotEmpty(t.url)?zzb.types.isStringNotEmpty(t.method)?void fetch(t.url,{method:t.method,body:t.body,headers:t.headers}).then((function(e){if(!e.ok)throw new Error("Remote service returned unexpected status "+e.status+".");switch(t.expectType){case"json":return e.json();case"text":return e.text();case"blob":return e.blob();default:throw new Error("Unknown content received from remote service.")}})).then((function(n){var o={request:t,data:n};if(!0===o.request.RAWRETURN)return e(o,null);var s=!1,i=zzb.rob.newROB();if("json"!==o.request.expectType)i.recs=[o.data];else{if(!0!==o.request.SKIPREDIRECT&&zzb.types.isStringNotEmpty(n.redirect))return zzb.types.isFunction(o.request.onRedirect)?void o.request.onRedirect(n,(function(t){t||(window.location.href=n.redirect)})):void(zzb.types.isStringNotEmpty(n.message)?zzb.dialogs.showMessage({type:zzb.types.isNonEmptyString(n.messageType)?n.messageType:null,classDialog:"zzb-dialog-flash-message zzb-dialog-flash-redirect"+zzb.strings.mergeElseEmpty(" zzb-dialog-flash-status-{0}",n.messageType),dataBackdrop:"static",body:n.message,onHide:function(t){window.location.href=n.redirect}}):window.location.href=n.redirect);n.ISROBERRORS||(n.err?(n.errs=zzb.rob.sanitizeErrors(n.err),n.err=null):n.error?(n.errs=zzb.rob.sanitizeErrors(n.error),n.err=null):n.errs&&(n.errs=zzb.rob.sanitizeErrors(n.errs),n.err=null)),n.ISROBRECS||(n.recs?n.recs=zzb.rob.sanitizeRecords(n.recs):n.rec?(n.recs=zzb.rob.sanitizeRecords(n.rec),n.rec=null):Array.isArray(n.errs)&&0!==n.errs.length||(n.recs=zzb.rob.sanitizeRecords(n))),n.paginate&&(i.paginate=n.paginate),i.errs=n.errs,i.recs=n.recs,i.columns=n.columns,i.listErrs=zzb.rob.toList(i.errs),!0!==t.SKIPFLASH&&zzb.types.isStringNotEmpty(n.message)&&(s=!0,zzb.dialogs.showMessage({type:zzb.types.isNonEmptyString(n.messageType)?n.messageType:null,classDialog:"zzb-dialog-flash-message"+zzb.strings.mergeElseEmpty(" zzb-dialog-flash-status-{0}",n.messageType,i.hasErrors()?"error":"okay"),dataBackdrop:"static",body:n.message,onHide:function(t){o.rob=i,e(o,null)}})),zzb.types.isFunction(o.request.onFinish)&&(s=!0,o.request.onFinish(i,(function(t){!0!==t&&(o.rob=i,e(o,null))})))}if(!0!==s){o.rob=i;try{e(o,null)}catch(t){throw console.log(r.APPEND_FAILED_HANDLER_UNEXPECTED,"error:",t),new Error(r.APPEND_FAILED_HANDLER_UNEXPECTED)}}})).catch((function(n){let o="";if(n&&zzb.types.isStringNotEmpty(n.message)&&(!0!==t.NOCATCHLOG&&r.APPEND_FAILED_HANDLER_UNEXPECTED!==n.message&&console.log(n.message),!0!==t.SHOWCATCHMESSAGE&&(o=n.message)),!0!==t.NOCATCHFLASH){let e="";zzb.types.isStringNotEmpty(o)&&(e=zzb.strings.format(' <span class="zzb-dialog-error-catch">{0}</span>',o)),zzb.types.isStringNotEmpty(t.CATCHFLASHMESSAGE)?zzb.ajax.showMessageFailedAction({message:t.CATCHFLASHMESSAGE+e}):zzb.ajax.showMessageFailedAction({message:r.MSG_FAILED_REQUEST_UNEXPECTED+e})}e(null,new Error(o))})):e(null,new Error("No url method defined to fetch request.")):e(null,new Error("No url defined to fetch request."))},n.prototype.get=function(t,e){t.method="GET",zzb.ajax.request(t,e)},n.prototype.post=function(t,e){t.method="POST",zzb.ajax.request(t,e)},n.prototype.getBLOB=function(t,e){t.method="GET",t.expectType="blob",zzb.ajax.request(t,e)},n.prototype.getTEXT=function(t,e){t.method="GET",t.expectType="text",zzb.ajax.request(t,e)},n.prototype.getJSON=function(t,e){t.method="GET",t.expectType="json",zzb.ajax.request(t,e)},n.prototype.postJSON=function(t,e){t.method="POST",zzb.types.isStringNotEmpty(t.expectType)||(t.expectType="json"),t.headers={"Content-Type":"application/json"},zzb.types.isStringNotEmpty(t.body)?t.body="{}":t.body=JSON.stringify(t.body),zzb.ajax.request(t,e)};var r=function(t){};r.MSG_FAILED_REQUEST_UNEXPECTED="Communications with remote service failed unexpectedly.",r.APPEND_FAILED_HANDLER_UNEXPECTED="Report this to the remote service administrator.",n.prototype.showMessageFailedAction=function(t){t=zzb.types.merge({err:null,number:null,message:r.MSG_FAILED_ACTION_UNEXPECTED},t),zzb.types.isNumber(t.number)?t.number=" ("+t.number+")":t.number="",t.err&&console.log(t.err),zzb.dialogs.showMessage({classDialog:"zzb-dialog-flash-message zzb-flash-invalid",dataBackdrop:"static",body:t.message+t.number})},e.h=n},772:(t,e)=>{class n{constructor(t){this.defaultOptions=n.getDialogDefaults(t),this.defaultOptions.onShow="function"==typeof t.onShow?t.onShow:function(){},this.defaultOptions.onShown="function"==typeof t.onShown?t.onShown:function(){},this.defaultOptions.onHide="function"==typeof t.onHide?t.onHide:function(){},this.defaultOptions.onHidden="function"==typeof t.onHidden?t.onHidden:function(){},this.isBootstrap=!0!==this.defaultOptions.forceNoBootstrap&&null!=window.bootstrap,this.modal=null,zzb.types.isStringNotEmpty(this.defaultOptions.id)&&(this.modal=document.getElementById(this.defaultOptions.id)),this.modal||(this.modal=this.createModal()),this.defaultOptions.htmlDialog="",this.defaultOptions.body="",this.isBootstrap?this.bsModal=new bootstrap.Modal(this.modal,{}):(this.closeModal=this.modal.querySelectorAll("[data-bs-dismiss]"),this.closeModal.forEach((t=>{t.addEventListener("click",(t=>{this.close()}))})));var e=this;this.modal.addEventListener("show.bs.modal",(function(t){e.defaultOptions.onShow&&zzb.types.isFunction(e.defaultOptions.onShow)&&e.defaultOptions.onShow(t)})),this.modal.addEventListener("shown.bs.modal",(function(t){if(e.defaultOptions.hasAutoBackdrop){let t=e.modal.nextElementSibling;t&&t.classList.contains("modal-backdrop")&&(e.modal.style.zIndex="2055",t.style.zIndex="2050")}e.defaultOptions.onShown&&zzb.types.isFunction(e.defaultOptions.onShown)&&e.defaultOptions.onShown(t)})),this.modal.addEventListener("hide.bs.modal",(function(t){e.defaultOptions.onHide&&zzb.types.isFunction(e.defaultOptions.onHide)&&e.defaultOptions.onHide(t)})),this.modal.addEventListener("hidden.bs.modal",(function(t){e.defaultOptions.onHidden&&zzb.types.isFunction(e.defaultOptions.onHidden)&&e.defaultOptions.onHidden(t),e.defaultOptions.doAutoDestroy&&e.bsModal&&(e.bsModal.dispose(),e.modal.remove())})),this.target=document.getElementById(t.target),this.target&&this.target.addEventListener("click",(t=>{this.open()}))}open(){this.bsModal?this.bsModal.show():(this.modal.classList.add("show-modal"),setTimeout((()=>{this.animateIn()}),10))}close(){this.bsModal?this.bsModal.hide():(this.animateOut(),setTimeout((()=>{this.modal.classList.remove("show-modal")}),250))}animateIn(){this.modal.classList.add("animate-modal")}animateOut(){this.modal.classList.remove("animate-modal")}destroy(){this.bsModal&&(this.bsModal.hide(),this.defaultOptions.doAutoDestroy||(this.bsModal.dispose(),this.modal.remove()))}static BUTTON_CLOSE="button-close";static BUTTON_OK="button-ok";static BUTTON_YES="button-yes";static BUTTON_NO="button-no";static BUTTON_CANCEL="button-cancel";static TYPE_NONE="none";static TYPE_PRIMARY="primary";static TYPE_SECONDARY="secondary";static TYPE_SUCCESS="success";static TYPE_DANGER="danger";static TYPE_WARNING="warning";static TYPE_INFO="info";static TYPE_LIGHT="light";static TYPE_DARK="dark";static TYPE_LINK="link";static getDialogDefaults(t){var e={htmlDialog:"",id:zzb.uuid.newV4(),type:n.TYPE_NONE,classDialog:"",classBackdrop:"",extraAttributes:"",noFade:!1,title:"",body:"",buttons:[],onShow:null,onShown:null,onHide:null,onHidden:null,doVerticalCenter:!0,doAutoDestroy:!0,forceNoBootstrap:!1,hasAutoBackdrop:!1};return zzb.types.isObject(t)?zzb.types.merge(e,t):e}static getButtonDefaults(t){var e={id:null,type:n.TYPE_NONE,label:"",className:"",action:null,isDismiss:!1,isOutline:!1,ztrigger:null};return zzb.types.isObject(t)?zzb.types.merge(e,t):e}static getButtonPreset(t,e,r){var o=n.getButtonDefaults();switch(o.isDismiss=!0,e===r-1?o.type=n.TYPE_PRIMARY:e===r-2&&(o.type=n.TYPE_SECONDARY),t){case"button-close":o.label="Close";break;case"button-ok":o.label="Ok";break;case"button-accept":o.label="Accept";break;case"button-yes":o.label="Yes";break;case"button-no":o.label="No";break;case"button-cancel":o.label="Cancel";break;default:o=null}return o&&o.label&&(o.ztrigger=o.label.toLowerCase()),o}static validateType(t){if(!t)return n.TYPE_NONE;switch(t){case n.TYPE_PRIMARY:case n.TYPE_SECONDARY:case n.TYPE_SUCCESS:case n.TYPE_DANGER:case n.TYPE_WARNING:case n.TYPE_INFO:case n.TYPE_LIGHT:case n.TYPE_DARK:case n.TYPE_LINK:return t;default:return n.TYPE_NONE}}static isTypeNone(t){return n.validateType(t)===n.TYPE_NONE}getId(){return zzb.types.isStringNotEmpty(this.defaultOptions.id)||(this.defaultOptions.id=zzb.uuid.newV4()),this.defaultOptions.id}getClassBackdrop(){return zzb.types.isStringNotEmpty(this.defaultOptions.classBackdrop)||(this.defaultOptions.classBackdrop=""),this.defaultOptions.classBackdrop}getClassDialog(){return zzb.types.isStringNotEmpty(this.defaultOptions.classDialog)||(this.defaultOptions.classDialog=""),this.defaultOptions.classDialog}getTitle(){return zzb.types.isStringNotEmpty(this.defaultOptions.title)||(this.defaultOptions.title=""),this.defaultOptions.title}getBody(){return zzb.types.isStringNotEmpty(this.defaultOptions.body)||(this.defaultOptions.body=""),this.defaultOptions.body}createModal(){if(this.defaultOptions.htmlDialog&&!zzb.types.isStringNotEmpty(this.defaultOptions.htmlDialog))return document.body.insertAdjacentHTML("beforeend",htmlModal),document.getElementById(this.getId());var t=zzb.types.merge({id:this.getId(),arialabel:"arialabel"+this.getId(),classBackdrop:this.getClassBackdrop(),classDialog:this.getClassDialog(),title:this.getTitle(),body:this.getBody(),classVerticalCenter:this.defaultOptions.doVerticalCenter?" modal-dialog-centered":"",classModalHeader:"",noHeaderCloseButton:!1,noHeaderCloseButtonButton:"",dataKeyboard:null},this.defaultOptions);t.classFade="fade",zzb.types.isBoolean(t.noFade)&&!0===t.noFade&&(t.classFade=""),n.isTypeNone(t.type)||(t.classModalHeader+=" alert-"+t.type),zzb.types.isNonEmptyString(t.classDialog)&&(t.classDialog=" "+t.classDialog),zzb.types.isNonEmptyString(t.classBackdrop)&&(t.classBackdrop=" "+t.classBackdrop),!0!==t.hasAutoBackdrop||zzb.types.isStringNotEmpty(t.dataBackdrop)||(t.dataBackdrop="true"),zzb.types.isStringNotEmpty(t.dataBackdrop)&&(t.hasAutoBackdrop=!0,t.extraAttributes+=' data-bs-backdrop="'+t.dataBackdrop+'"'),zzb.types.isBoolean(t.dataKeyboard)&&(t.extraAttributes+=' data-bs-keyboard="'+t.dataKeyboard+'"'),!0!==t.noHeaderCloseButton&&(t.noHeaderCloseButtonButton='<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>');document.body.insertAdjacentHTML("beforeend",zzb.strings.format('<div class="modal {classFade} modal-fullscreen{classBackdrop}" {extraAttributes} id="{id}" tabindex="-1" role="dialog" aria-labelledby="{arialabel}" aria-hidden="true"><div class="modal-dialog{classVerticalCenter}{classDialog}" role="document"><div class="modal-content"><div class="modal-header{classModalHeader}"><h5 class="modal-title" id="{arialabel}">{title}</h5>{noHeaderCloseButtonButton}</div><div class="modal-body">{body}</div><div class="modal-footer"></div></div></div></div>',t));var e=document.getElementById(this.getId());if(!e)throw new Error("unexpected that modal has not been created");var r=this;Array.isArray(t.buttons)||(t.buttons=[]);var o=t.buttons.length;return t.buttons.forEach((function(t,s){zzb.types.isStringNotEmpty(t)&&(t=n.getButtonPreset(t,s,o)),zzb.types.isObject(t)&&(zzb.types.isStringNotEmpty(t.id)||(t.id="button-"+s+"-"+r.getId()),n.isTypeNone(t.type)||(t.isOutline?t.className+=" btn-outline-"+t.type:t.className+=" btn-"+t.type),t.isDismiss&&(zzb.types.isFunction(t.action)||(t.action=function(t,e){t.close()}),zzb.dom.setAttribute(e.querySelector(".modal-header button[data-bs-dismiss]"),"aria-label",t.label)),zzb.types.isStringNotEmpty(t.ztrigger)&&(t.ztrigger=zzb.strings.format(' ztrigger="{0}"',t.ztrigger)),zzb.dom.hasElement(e.querySelector(".modal-footer"))&&(e.querySelector(".modal-footer").insertAdjacentHTML("beforeend",zzb.strings.format('<button id="{id}" type="button" class="btn {className}"{ztrigger}>{label}</button>',t)),document.getElementById(t.id).addEventListener("click",(function(e){if(t&&zzb.types.isFunction(t.action))return t.action.call(document.getElementById(t.id),r,e)}))))})),this.defaultOptions=t,document.getElementById(this.getId())}}var r=function(){this.modals={}};r.prototype.ZazzyDialog=n,r.prototype.modal=function(t){if(t&&t.id&&zzb.types.isStringNotEmpty(t.id)&&this.modals[t.id])return this.modals[t.id];var e=new n(t);if(e&&zzb.types.isStringNotEmpty(e.getId()))return e;throw new Error("Failed to create dialog")},r.prototype.showMessage=function(t){var e=zzb.dialogs.modal(zzb.types.merge({type:n.TYPE_NONE,buttons:[n.BUTTON_OK]},t));if(!0===t.noAutoOpen)return e;e.open()},r.prototype.showMessageChoice=function(t){var e=zzb.dialogs.modal(zzb.types.merge({type:n.TYPE_NONE,buttons:[n.BUTTON_CANCEL,n.getButtonDefaults({type:n.TYPE_PRIMARY,label:"Accept",action:function(t,e){t.close()}})]},t));if(!0===t.noAutoOpen)return e;e.open()},r.prototype.handleError=function(t){if((t=zzb.types.merge({log:null,type:n.TYPE_DANGER,title:"",body:'<div class="zzb-dialog-errors">{errors}</div><div class="zzb-dialog-message">{message}</div>',message:"",errs:null,errors:"",buttons:[n.getButtonDefaults({type:n.TYPE_DANGER,label:"Ok",action:function(t,e){t.close()}})]},t)).log&&console.log(t.log),!zzb.types.isStringNotEmpty(t.errors)&&zzb.types.isArray(t.errs)){var e=[];t.errs.forEach((function(t,n){t.message&&zzb.types.isStringNotEmpty(t.message)&&e.push(zzb.strings.format('<div class="zzb-dialog-error-item">{0}</div>',t.message))})),t.errors=e.join("\n")}t.body=zzb.strings.format(t.body,t),this.showMessage(t)},e.y=r},171:(t,e)=>{function n(){}n.prototype.hasElement=function(t){return t},n.prototype.setAttribute=function(t,e,n){t&&(zzb.types.isObject(t)?t.setAttribute(e,n):zzb.types.isArray(t)&&t.forEach((function(t){t.setAttribute(e,n)})))},n.prototype.getAttributeElse=function(t,e,n){if(null==n&&(n=null),!t)return n;let r=t.getAttribute(e);return zzb.types.isNonEmptyString(r)?r:n},n.prototype.getAttributes=function(t,e,n){if(!t||!e)return{};zzb.types.isNumber(n)||(n=-1);let r={};return[].forEach.call(t.attributes,(function(t){if(e.test(t.name))if(n<=0)r[t.name]=t.value;else{let e=t.name.substr(n).replace(/-(.)/g,(function(t,e){return e.toUpperCase()}));r[e]=t.value}})),r},e.v=n},154:(t,e)=>{var n=function(){};n.prototype.getPO=function(t,e){var n=t[e];return n||this.getPermObject(e+":")},n.prototype.getPermObjectFromPermkeys=function(t){var e={},n=this;if(Array.isArray(t))t.forEach((function(t){var r=n.getPermObject(t);r.key&&(e[r.key]=r)}));else if(zzb.types.isObject(t))for(const s in t){var r=t[s];r||(r="");var o=null;(o=r.indexOf(":")<0?n.getPermObject(s+":"+r):n.getPermObject(r))&&o.key&&(e[o.key]=o)}return e},n.prototype.mergePermkey=function(t,e){if(!e||!zzb.types.isStringNotEmpty(e))return t;if(!t||!zzb.types.isStringNotEmpty(t))return e;var n=null,r={},o={};if(t.indexOf(":")<=0?(r.key=t.trim(),r.perm=""):(n=t.split(":"),r.key=n[0].trim(),r.perm=n[1].trim().toUpperCase()),e.indexOf(":")<=0?(o.key=e.trim().toUpperCase(),o.perm=""):(n=e.split(":"),o.key=n[0].trim(),o.perm=n[1].trim().toUpperCase()),r.key!==o.key||r.perm===o.perm||0===o.perm.length)return t;if(0===r.key.length)return e;for(var s=0;s<o.perm.length;s++)r.perm.indexOf(o.perm[s])<0&&(r.perm+=o.perm[s]);return r.key+":"+r.perm},n.prototype.getPermObject=function(t,e,n){var r={key:null,perm:null,attr:{},toPermkey:function(){return this.key+":"+this.perm}};if((n||zzb.types.isStringNotEmpty(n))&&(t=this.mergePermkey(t,n)),!t||!zzb.types.isStringNotEmpty(t))return r.attr=this.getPermAttributes(),r;if(t.indexOf(":")<=0)return r.key=t,r.perm="",r.attr=this.getPermAttributes(),r;var o=t.split(":");if(r.key=o[0],r.perm=o[1],r.perm=r.perm.trim().toUpperCase(),r.perm.length>0&&e&&zzb.types.isStringNotEmpty(e)){e=e.trim().toUpperCase();for(var s=r.perm.length-1;s>=0;s--)e.indexOf(r.perm[s])<0&&(r.perm=r.perm.replace(r.perm[s],""))}return r.attr=this.getPermAttributes(r.toPermkey(),e),r};var r=new RegExp("^[CRUDX]*$");n.prototype.getPermAttributes=function(t){var e={canRead:!1,canCreate:!1,canUpdate:!1,canDelete:!1,canExecute:!1};return t&&zzb.types.isStringNotEmpty(t)?(t.indexOf(":")>=0&&(t=t.split(":")[1]),0===(t=t.trim().toUpperCase()).length?e:r.test(t)?(e.canRead=t.indexOf("C")>=0,e.canCreate=t.indexOf("R")>=0,e.canUpdate=t.indexOf("U")>=0,e.canDelete=t.indexOf("D")>=0,e.canExecute=t.indexOf("X")>=0,e):e):e},n.prototype.hasMatch=function(t,e){if(!t||!e)return!1;var n=t;if(zzb.types.isStringNotEmpty(t)&&(n=this.getPermObject(t)),!zzb.types.isObject(n)||!n.key||!n.perm||0===n.perm.length)return!1;var r=null;if(zzb.types.isStringNotEmpty(e))r=this.getPermObject(e);else if(Array.isArray(e)){var o=this;e.forEach((function(t){if(zzb.types.isStringNotEmpty(t)&&(t=o.getPermObject(t)),t.key===n.key)return r=t,!1}))}else{if(!zzb.types.isObject(e))return!1;if(e.key)r=e;else{if(!e[n.key])return!1;r=zzb.types.isStringNotEmpty(e[n.key])?this.getPermObject(n.key+":"+e[n.key]):e[n.key]}}if(!r||!r.key||!r.perm||0===!r.perm.length)return!1;for(var s=0;s<r.perm.length;s++)if(n.perm.indexOf(r.perm[s])>=0)return!0;return!1},e.Q=n},334:(t,e)=>{var n=function(){};function r(t){if((t=zzb.types.merge({type:"error",message:null,field:"_system",stack:null,isErr:!0,title:null},t)).isErr)switch("warn"===t.type?t.type="warning":"err"===t.type?t.type="error":"crit"===t.type?t.type="critical":"emerg"===t.type&&(t.type="emergency"),t.type){case"warning":case"notice":case"info":case"debug":t.isErr=!1;break;default:t.isErr=!0}return t}n.prototype.newROB=function(t){return zzb.types.merge({message:null,messageType:null,errs:null,recs:[],columns:[],paginate:{page:0,limit:0,count:0},hasErrors:function(){return this.errs&&Array.isArray(this.errs)&&this.errs.length>0},hasColumns:function(){return this.columns&&Array.isArray(this.columns)&&this.columns.length>0},hasRecords:function(){return this.recs&&Array.isArray(this.recs)&&this.recs.length>0},isEmpty:function(){return!this.hasRecords()||this.hasRecords()&&null===this.first()},first:function(){return this.recs&&Array.isArray(this.recs)&&this.recs.length>0?this.recs[0]:null},find:function(t,e){var n=null;return this.recs.forEach((function(r){if(r&&zzb.types.isObject(r)&&!Array.isArray(r)&&r[t]===e)return n=r,!1})),n},length:function(){return this.recs&&Array.isArray(this.recs)?this.recs.length:0}},t)},n.prototype.toObject=function(t){if(!t||!Array.isArray(t))return{_system:[t]};var e={};return t.forEach((function(t){t&&(t.field||(t.field="_system"),e[t.field]||(e[t.field]=[]),e[t.field].push(t))})),e};var o=function(t,e){if(!t)return r();if(zzb.types.isStringNotEmpty(t))return r(zzb.types.merge({message:t},e));if(!Array.isArray(t)&&zzb.types.isObject(t))return r(t);throw new Error("bad input in createError - unrecognized err datatype")};n.prototype.createError=o,n.prototype.sanitizeErrors=function(t){var e=null;return t?(Array.isArray(t)?t.length>0&&(e=[],t.forEach((function(t){e.push(o(t))}))):e=[o(t)],e):e},n.prototype.sanitizeRecords=function(t){return t?Array.isArray(t)?t:[t]:[]},n.prototype.toListErrs=function(t){return zzb.rob.toList(t)},n.prototype.toList=function(t){var e=[],n=[],r=[],o=[];return t&&Array.isArray(t)&&t.length>0&&t.forEach((function(t){!0===t.isErr?"_system"===t.system?n.push(t):zzb.types.isStringNotEmpty(t.field)?"_system"===t.field?n.push(t):e.push(t):n.push(t):"_system"===t.system?r.push(t):zzb.types.isStringNotEmpty(t.field)?"_system"===t.field?r.push(t):o.push(t):r.push(t)})),{system:n,fields:e,systemMessages:r,fieldMessages:o,hasErrors:function(){return this.hasSystemErrors()||this.hasFieldErrors()},hasSystemErrors:function(){return this.system&&this.system.length>0},hasFieldErrors:function(){return this.fields&&this.fields.length>0},combinedErrors:function(){return this.system.concat(this.fields)},hasMessages:function(){return this.hasSystemMessages()||this.hasFieldMessages()},hasSystemMessages:function(){return this.systemMessages&&this.systemMessages.length>0},hasFieldMessages:function(){return this.fieldMessages&&this.fieldMessages.length>0},combinedMessages:function(){return this.systemMessages.concat(this.fieldMessages)},getByFieldName:function(t,e){if("_system"===e)return t?this.systemMessages:this.system;let n=[];return e?((t?this.fieldMessages:this.fields).forEach((function(r){r.field===e&&(r.isMessage=t,n.push(r))})),n):n},getErrsByName:function(t){return this.getByFieldName(!1,t)},getMessagesByName:function(t){return this.getByFieldName(!0,t)},getAnyByName:function(t){let e=this.getErrsByName(t),n=this.getMessagesByName(t);return e.concat(n)}}},n.prototype.renderListErrs=function(t){return zzb.rob.renderList(t)},n.prototype.renderList=function(t){t=zzb.types.merge({targets:[],format:"text",defaultTitle:"",template:null,htmlWrapList:'<ul class="zzb-rob-{0}">{1}</ul>'},t);let e=[];if(t.errs&&zzb.types.isArrayHasRecords(t.errs)&&(t.targets=t.errs),zzb.types.isArrayHasRecords(t.targets)){let n=t.targets.length>1;if(t.targets.forEach((function(r){let o="";zzb.types.isStringNotEmpty(t.defaultTitle)?o=t.defaultTitle:zzb.types.isStringNotEmpty(r.field)&&(o=r.field),t.template?e.push(zzb.strings.format(t.template,o,r.message)):(r.type||(r.type=r.isMessage?"message":"unknown"),n||"html"!==t.format?"html"===t.format||"html-list"===t.format?e.push(zzb.strings.format('<li class="zzb-rob-list-item-{0}">{1}</li>',r.type,r.message)):"html-list-label"===t.format?e.push(zzb.strings.format('<li class="zzb-rob-list-item-{0}"><span>{1}:</span> {2}</li>',r.type,o,r.message)):"label"===t.format?e.push(zzb.strings.format("{0}: {1}",o,r.message)):"text-punctuated"===t.format?e.push(zzb.strings.toFirstCapitalEndPeriod(r.message)+" "):e.push(zzb.strings.format(r.message)):e.push(zzb.strings.format('<div class="zzb-rob-list-item-{0}">{1}</div>',r.type,r.message)))})),(n&&"html"===t.format||"html-list"===t.format||"html-list-label"===t.format)&&t.htmlWrapList)return zzb.strings.format(t.htmlWrapList,t.format,e.join(""))}return e.join("")},e.S=n},313:(t,e)=>{var n=function(){};function r(t){var e=new Error(t);return e.name="ValueError",e}var o;n.prototype.format=(o={},function(t){var e=Array.prototype.slice.call(arguments,1),n=0,s="UNDEFINED";if(Array.isArray(e)&&e.length>0&&Array.isArray(e[0])){var i=e[0].map((function(t){return t}));e=i}return t.replace(/([{}])\1|[{](.*?)(?:!(.+?))?[}]/g,(function(t,i,a,l){if(null!=i)return i;var u=a;if(u.length>0){if("IMPLICIT"===s)throw r("cannot switch from implicit to explicit numbering");s="EXPLICIT"}else{if("EXPLICIT"===s)throw r("cannot switch from explicit to implicit numbering");s="IMPLICIT",u=String(n),n+=1}var p=u.split("."),c=(/^\d+$/.test(p[0])?p:["0"].concat(p)).reduce((function(t,e){return t.reduce((function(t,n){return null!=n&&e in Object(n)?["function"==typeof n[e]?n[e]():n[e]]:[]}),[])}),[e]).reduce((function(t,e){return e}),"");if(null==l)return c;if(Object.prototype.hasOwnProperty.call(o,l))return o[l](c);throw r('no transformer named "'+l+'"')}))}),n.prototype.formatEmpty=function(t){var e=Array.prototype.slice.call(arguments,1);return Array.isArray(e)?t.replace(/{(\d+)}/g,(function(t,n){return void 0!==e[n]?e[n]:""})):t.replace(/{((?:(?=([^{}]+|{{[^}]*}}))\2)*)}/g,(function(t,n){return e.length>0&&e[0][n]?e[0][n]:""}))},n.prototype.appendIfMoreThan=function(t,e,n){return t&&t.length>n?t.substring(0,n)+e:t},n.prototype.joinArrToCommas=function(t,e){return t&&Array.isArray(t)&&0!==t.length?t.map(t,(function(n,r){var o="";return r<t.index-1&&(o=""),e?n[e]+o:n+o})).join(""):""},n.prototype.toPlural=function(t,e,n){return n=zzb.types.merge({forcePlural:!1,suffix:null},n),1!==e&&-1!==e||n.forcePlural?n.suffix?t+n.suffix:t+"s":t},n.prototype.capitalize=function(t){return zzb.types.isStringNotEmpty(t)?t.charAt(0).toUpperCase()+string.slice(1):""},n.prototype.toFirstCapitalEndPeriod=function(t){return zzb.types.isStringNotEmpty(t)&&(t=t.trim(),(t=zzb.strings.capitalize(t)).endsWith(t,".")||(t+=".")),t};var s=["K","M","G","T","P","E","Z","Y"],i=["KB","MB","GB","TB","PB","EB","ZB","YB"],a=["Kilobyte","Megabyte","Gigabyte","Terabyte","Petabyte","Exabyte","Zettabyte","Yottabyte"],l=["KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"];n.prototype.sizeToHumanReadable=function(t,e,n,r){zzb.types.isStringNotEmpty(e)||(e="single");var o=" ";!0===n&&(o=""),r||(r=1);var u,p=1024,c="B";switch(e.toLowerCase()){case"full":u=a,c="Bytes";break;case"double":u=i;break;case"eic":u=l;break;default:u=s}if(Math.abs(t)<p)return t+o+c;var d=-1,z=Math.pow(r,10);do{t/=p,++d}while(Math.round(Math.abs(t)*z)/z>=p&&d<u.length-1);var y=t.toFixed(r)+"";return(y=zzb.strings.trimSuffix(y,[".00",".0"]))+o+u[d]},n.prototype.trimPrefix=function(t,e){t=zzb.types.toString(t);var n=[];zzb.types.isArray(e)?n=e:n.push(zzb.types.toString(e));for(var r=0;r<n.length;r++)if(t.startsWith(n[r]))return t.slice(n[r]);return t},n.prototype.trimSuffix=function(t,e){t=zzb.types.toString(t);var n=[];zzb.types.isArray(e)?n=e:n.push(zzb.types.toString(e));for(var r=0;r<n.length;r++)if(t.endsWith(n[r]))return t.slice(0,-1*n[r].length);return t},n.prototype.millisecondsTimeToHumanReadable=function(t){var e=t/1e3,n=Math.floor(e/31536e3),r=Math.floor((e%=31536e3)/86400),o=Math.floor((e%=86400)/3600),s=Math.floor((e%=3600)/60),i=e%60;return r||o||i||s?(n?n+"y ":"")+(r?r+"d ":"")+(o?o+"h ":"")+(s?s+"m ":"")+Number.parseFloat(i).toFixed(2)+"s":"< 1s"},n.prototype.toBool=function(t){if(!zzb.types.isNonEmptyString(t))return t;switch(t.toLowerCase().trim()){case"true":case"yes":case"1":return!0;case"false":case"no":case"0":case null:return!1;default:return Boolean(t)}},n.prototype.parseIntOrZero=function(t,e){return zzb.strings.parseTypeElse(t,"int",0,!!e)},n.prototype.parseFloatOrZero=function(t,e){return zzb.strings.parseTypeElse(t,"float",0,!!e)},n.prototype.parseBoolOrFalse=function(t,e){return zzb.strings.parseTypeElse(t,"bool",!1,!!e)},n.prototype.parseTypeElse=function(t,e,n,r){let o=r||zzb.types.isArray(t);if(null==t)return o?[]:n;zzb.types.isArray(t)||(t=[t]);for(let r=0;r<t.length;r++)if(null==t[r]||null===t[r])t[r]=n;else{let o=!1;switch(e){case"int":parsed=parseInt(t[r]),o=!0;break;case"float":parsed=parseFloat(t[r]),o=!0;break;case"bool":t[r]=zzb.strings.toBool(t[r]);break;case"date":case"date-iso":t[r]=zzb.types.isNonEmptyString(t[r])?t[r]:n;break;default:zzb.types.isString(t[r])||zzb.types.isArray(t[r])||zzb.types.isObject(t[r])||(t[r]+="")}o&&(t[r]=isNaN(parsed)?n:parsed)}return o?t:t[0]},n.prototype.mergeElseEmpty=function(t,e,n){let r=e;return zzb.types.isStringNotEmpty(r)||(r=n,zzb.types.isStringNotEmpty(r))?zzb.strings.format(t,r):""},e.j=n},449:(t,e)=>{function n(){}n.prototype.merge=function(t,e){return r(t,e)};const r=function(...arguments){let t={};const e=e=>{for(let n in e)e.hasOwnProperty(n)&&("[object Object]"===Object.prototype.toString.call(e[n])?t[n]=r(t[n],e[n]):t[n]=e[n])};for(let t=0;t<arguments.length;t++)e(arguments[t]);return t};n.prototype.truncate=function(t,e){return t.toString().substring(0,t.toString().indexOf("."))+t.toString().substr(t.toString().indexOf("."),e+1)},n.prototype.escapeHtml=function(t){return t?t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"):""},n.prototype.baseToString=function(t){if("string"==typeof t)return t;if(zzb.types.isNumber(t)){var e=trimSuffix+"";return"0"==e&&1/t==-INFINITY?"-0":e}return""},n.prototype.toString=function(t){return null==t?"":zzb.types.baseToString(t)},n.prototype.isArray=function(t){return t&&void 0!==t&&"[object Array]"===Object.prototype.toString.call(t)},n.prototype.isArrayHasRecords=function(t){return zzb.types.isArray(t)&&t.length>0},n.prototype.isObject=function(t){return t&&"object"==typeof t},n.prototype.isNumber=function(t){return!isNaN(t-0)&&null!==t&&""!==t&&!1!==t},n.prototype.isNonEmptyString=function(t){return zzb.types.isStringNotEmpty(t)},n.prototype.isStringNotEmpty=function(t){return t&&"string"==typeof t&&t.trim().length>0},n.prototype.isEmptyString=function(t){return zzb.types.isStringEmpty(t)},n.prototype.isStringEmpty=function(t){return t&&"string"==typeof t&&0===t.trim().length},n.prototype.isString=function(t){return t&&"string"==typeof t},n.prototype.isFunction=function(t){return t&&"[object Function]"==={}.toString.call(t)},n.prototype.isBoolean=function(t){return"boolean"==typeof t},n.prototype.compare=function(t,e,n){return t===e?0:n?t>e?-1:1:t>e?1:-1},e.V=n},781:(t,e)=>{var n=function(){};n.prototype.newV4=function(){function t(t){return 0|t*Math.random()}function e(e){for(var n="",r=0;r<e;++r)n+=t(16).toString(16);return n}return e(8)+"-"+e(4)+"-4"+e(3)+"-"+(3&t(16)|8).toString(16)+e(3)+"-"+e(12)},n.prototype.isV4=function(t){return/^[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(t)},n.prototype.isValid=function(t){return/^([a-f\d]{8}(-[a-f\d]{4}){3}-[a-f\d]{12}?)$/i.test(t)},e.V=n},602:(t,e)=>{class n{constructor(t){this.options=zzb.types.merge({id:null,handler:null,namespace:null},t)}getId(){return this.options.id}getHandler(){return this.options.handler}getNameSpace(){return this.options.namespace}run(t){return!!this.options.handler&&this.options.handler(t)}}var r=function(){this.handlers=[]};function o(t,e){if(!t)return null;if(!zzb.types.isStringNotEmpty(e))return null;let n=[],r=e.split(",");for(let e=0;e<r.length;e++){let o=r[e];switch(o){case"self":case"self:":n.push({label:"self",$elem:t});break;case"none":case"none:":return"none";default:let e=[o.substring(0,o.indexOf(":")),o.substring(o.indexOf(":")+1)];if(2===e.length){if(!zzb.types.isStringNotEmpty(e[1]))return null;let r=null;e[0].indexOf(".")>1&&(r=e[0].slice(0,e[0].indexOf(".")),e[0]=e[0].slice(e[0].indexOf(".")+1));let o="inner",s=e[0];e[0].indexOf("@")>1&&(s=e[0].slice(0,e[0].indexOf("@")),o=e[0].slice(e[0].indexOf("@")+1));let i=null;"selector"===s||"s"===s?i=document.querySelector(e[1]):"closest"===s||"c"===s?i=t.closest(e[1]):"child"!==s&&"h"!==s||(i=t.querySelector(e[1])),"inner"!==o&&"outer"!==o&&(console.log('unknown placement param inside inject; defaulting to "inner"',e),o="inner"),i&&n.push({label:r,$elem:i,placement:o})}}}return n}function s(t,e,n,r){let i=!1;if(e||(i=!0,e={zaction:{method:null},zdata:{},zdlg:{tryDialog:!1},zurl:null,$data:null,arrInjects:null}),!t)return null;if(e.zaction=zzb.types.merge(zzb.dom.getAttributes(t,/^za-/,3),e.zaction),e.zdata=zzb.types.merge(zzb.dom.getAttributes(t,/^zd-/,3),e.zdata),e.forceIgnoreZUrl||((i||n)&&(e.forceIgnoreZUrl="true"===e.zaction.ignoreZurl),e.forceIgnoreZUrl||e.zurl||(e.zurl=a(t,!0))),!e.forceIgnoreZData&&!e.$data&&zzb.types.isStringNotEmpty(e.zaction.data)){let n=o(t,e.zaction.data);n&&n[0].$elem&&(e.$data=n[0].$elem,e.forceIgnoreZData="none"===e.$data,e.forceIgnoreZData?(e.$data=null,e.formData=null):"form"===e.$data.nodeName.toLowerCase()&&(e.isForm=!0,e.formData=new FormData(e.$data)))}if((i||n)&&(e.zdlg=zzb.types.merge(zzb.dom.getAttributes(t,/^zdlg-/,5),e.zdlg),zzb.types.isStringNotEmpty(e.zaction.dlg))){let n=o(t,e.zaction.dlg);n&&n[0].$elem&&(e.zdlg=zzb.types.merge(zzb.dom.getAttributes(n[0].$elem,/^zdlg-/,5),e.zdlg),e.zaction=zzb.types.merge(zzb.dom.getAttributes(n[0].$elem,/^za-/,3),e.zaction),e.zurl||(e.zurl=a(n[0].$elem,!0)))}e.forceIgnoreZInject||e.arrInjects||zzb.types.isStringNotEmpty(e.zaction.inject)&&(e.arrInjects=o(t,e.zaction.inject),e.arrInjects&&(e.forceIgnoreZInject="none"===e.arrInjects,e.forceIgnoreZInject&&(e.arrInjects=null)));let l=i&&!t.classList.contains("zaction");if(i&&"za-post-action"===r&&(l=!1),l)e=s(t.closest(".zaction"),e,l,r);else{let n=zzb.dom.getAttributeElse(t,"zclosest",null);if(n){let r=t.closest(n);r&&(e=s(r,e))}}return e}r.prototype.registerHandler=function(t){zzb.setHandler(new n(t))},r.prototype.getHandlers=function(){return this.handlers},r.prototype.getHandler=function(t){if(t)return this.handlers.forEach((function(e){if(e.getId()===t)return e})),null},r.prototype.setHandler=function(t){if(t){for(let e=0;e<this.handlers.length;e++)if(this.handlers[e].getId()===t.id)return void(this.handlers[e]=t);this.handlers.push(t)}},r.prototype.newZAction=function(t){if(!t||!t.target)return{isValid:!1};let e={isValid:!0,ev:t,zcall:t.target.getAttribute("zcall"),_options:null,_runAJAX:null,isMouseDown:function(){return"mousedown"===this.zcall},forceStopPropDef:function(e){return!(!e&&"true"!==t.target.getAttribute("force-stop-prop-def"))&&(this.ev.preventDefault(),this.ev.stopPropagation(),!0)},getZEvent:function(){return this._options||this.getOptions(),this._options.zaction.event},hasZEvent:function(){return zzb.types.isStringNotEmpty(this.getZEvent())},isZUrl:function(){return this._options||this.getOptions(),zzb.types.isStringNotEmpty(this._options.zurl)},canRunZVal:function(){return this.getOptions(),this._options&&this._options.$data&&"true"===this._options.zaction.doZval},runAJAX:function(t,e){this.getOptions(),t&&this._runAJAX?this._runAJAX(t,e):e&&e(null,new Error("_runAJAX not defined"))},buildAJAXOptions:function(){this.getOptions();let t={url:this._options.zurl};return!0===this._hasBody&&(t.body={},this._options.forceIgnoreZData||this._options.isForm&&(t.body=zzb.types.merge(function(t,e){let n={};for(let[e,r]of t)void 0!==n[e]?(Array.isArray(n[e])||(n[e]=[n[e]]),n[e].push(r)):n[e]=r;if(e){const t=Object.keys(n);for(let r=0;r<t.length;r++){let o=e.querySelector('[name="'+t[r]+'"]');if(o){let e=o.getAttribute("zf-type"),s=zzb.dom.getAttributeElse(o,"zf-cval",null);if(s&&("date-iso"===e&&""===n[t[r]].trim()?n[t[r]]=null:n[t[r]]=s),zzb.types.isNonEmptyString(e)){let o=e.startsWith("[]"),s=e.replaceAll("[]",""),i="int"===s||"float"===s?0:"";if("string"===s&&!o)continue;"bool"===s?i=!1:"date-iso"===s&&(i=null),n[t[r]]=zzb.strings.parseTypeElse(n[t[r]],s,i,o)}}}}return n}(this._options.formData,this._options.$data),t.body),t.body=zzb.types.merge(this._options.zdata,t.body),t.body=function(t){function e(t,n,r,o){return r===n.length-1?t[n[r]]=o:(t[n[r]]||(t[n[r]]={}),t[n[r]]=e(t[n[r]],n,r+1,o)),t}const n=Object.keys(t);let r={};for(let o=0;o<n.length;o++)r=e(r,n[o].split("."),0,t[n[o]]);return r}(t.body)),t.body.zaction=this._options.zaction),zzb.types.isNonEmptyString(this._options.zaction.expectType)&&(t.expectType=this._options.zaction.expectType),t},getOptions:function(){if(this._options)return this._options;if(this._options=s(this.ev.target,null,null,this.ev.zaExtraHandler),this._options.forceIgnoreZData||this._options.$data&&(this._options.zaction.zid||(this._options.zaction.zid=zzb.dom.getAttributeElse(this._options.$data,"za-zid",null)),this._options.zaction.zidParent||(this._options.zaction.zidParent=zzb.dom.getAttributeElse(this._options.$data,"za-zid-parent",null)),this._options.zurl||(this._options.zurl=a(this._options.$data,!0))),zzb.types.isStringNotEmpty(this._options.zaction.loopType)?this._options.forceIgnoreZInject||this._options.arrInjects&&("true"===this._options.zaction.loopInjectSkipInject?(console.log(new Error('skipping za-loop-type "'+this._options.zaction.loopType+'": no arrInjects identified')),this._options.zaction.loopType=null):this._options.hasLoopType=!0):this._options.loopType=null,zzb.types.isStringNotEmpty(this._options.zaction.method)||(this._options.zaction.method="postJSON"),"getJSON"===this._options.method)this._hasBody=!1,this._runAJAX=zzb.ajax.getJSON;else this._hasBody=!0,this._runAJAX=zzb.ajax.postJSON;if(this._options.zdlg&&(this._options.zdlg.tryDialog=Object.keys(this._options.zdlg).length>0,this._options.zdlg.noHeaderCloseButton="true"===this._options.zdlg.noHeaderCloseButton),!this._options.forceIgnoreZUrl){let e=this._options.zurl;if(zzb.types.isStringNotEmpty(e)){for(var t=0;t<i.length;t++)if(e.indexOf(i[t])>-1){let n=i[t].replace(":","");if(!zzb.types.isStringNotEmpty(this._options.zaction[n]))throw new Error("reserve placeholder '"+i[t]+"' not found in zurl '"+e+"'");e=e.replace(i[t],this._options.zaction[n])}this._options.zurl=e}else console.log("cannot determine zurl"),this._options.zurl=null}return this._options.zaction.pageOn=zzb.strings.parseIntOrZero(this._options.zaction.pageOn),this._options.zaction.pageLimit=zzb.strings.parseIntOrZero(this._options.zaction.pageLimit),this._options}};return e.hasZEvent()?e:{isValid:!1}};let i=[":event",":mod",":zid",":zidParent",":blobName"];function a(t,e){if(!t)return e?null:"";let n=t.getAttribute("zurl");return zzb.types.isStringNotEmpty(n)||(n=t.getAttribute("href"),zzb.types.isStringNotEmpty(n)||(n=t.getAttribute("action"),zzb.types.isStringNotEmpty(n)||(n=t.getAttribute("src")))),n&&"#"!==n?n:e?null:""}function l(t){if(!zzb.types.isStringNotEmpty(t))return null;let e=t.split("|");if(0===e.length)return null;let n={};return e.length>0&&(n.label=e[0]),e.length>1&&(n.type=e[1]),e.length>2&&(n.ztrigger=e[2]),n}function u(t,e,n){function r(e,n,r){if(!n){if(zzb.types.isNonEmptyString(t.getOptions().zdlg.postSave)){let e=t.getOptions().zdlg.postSave.split(":");if(2===e.length){let t=document.querySelector(e[1]);if(t){"true"!==t.getAttribute("za1x2")&&(t.setAttribute("za1x2","true"),t.addEventListener("za-post-action",(function(t){zzb.zaction.actionHandler(t,null,null)})));let e=new CustomEvent("za-post-action");e.zaExtraHandler="za-post-action",t.dispatchEvent(e)}}}else t.getOptions().hasLoopType&&d(t.getOptions().arrInjects,e.rob.first().dInjects);r&&r.close()}}n=zzb.types.merge({html:null,js:{title:null,altTitle:null,body:null,type:null,buttons:null,noHeaderCloseButton:!1}},n||{});let o={title:"",body:"",onShow:function(e){let o=e.target.querySelector(".modal-body");if(!o)return;if("true"===zzb.dom.getAttributeElse(o,"_zdinit",""))return;let s=e.target.querySelectorAll(".modal-footer [ztrigger]"),i=[];if(s&&s.forEach((function(t){i.push(t.getAttribute("ztrigger"))})),o){zzb.zui&&zzb.zui.onElemInit(o),zzb.zaction.addEventListeners(".zaction",n.js.actionHandler,o);let e=o.querySelectorAll("[ztrigger]");e&&e.forEach((function(e){i.includes(e.getAttribute("ztrigger"))?(t.getOptions().hasLoopType&&(zzb.types.isStringNotEmpty(e.getAttribute("za-loop-type"))||(e.setAttribute("za-loop-type",t.getOptions().zaction.loopType),e.setAttribute("za-loop-inject-skip-inject","false"))),e.addEventListener("ztrigger-dialog-button",(function(t){zzb.zaction.actionHandler(t,t.detail.altHandler,(function(e,n){r(e,n,t.detail.dialog)}))}))):console.log('no match of ztrigger handler "',e.getAttribute("ztrigger")+'"')}))}zzb.dom.setAttribute(o,"_zdinit","true"),o.classList.contains("d-none")&&o.classList.remove("d-none")},onShown:null,onHide:null,onHidden:null,buttons:[zzb.dialogs.ZazzyDialog.getButtonDefaults({type:zzb.dialogs.ZazzyDialog.TYPE_SECONDARY,label:"Cancel",ztrigger:"cancel",action:function(t,e){t.close()}}),zzb.dialogs.ZazzyDialog.getButtonDefaults({type:zzb.dialogs.ZazzyDialog.TYPE_PRIMARY,label:"Ok",ztrigger:"ok",action:function(e,n){if("zurl-confirm"===t.getZEvent())t.runAJAX(t.buildAJAXOptions(),(function(t,n){r(t,n,e)}));else{let t=function(t,e){if(!t)return null;let n=zzb.dom.getAttributeElse(t,"ztrigger");if(!n)return null;let r=t.closest(".modal-content").querySelector('.modal-body [ztrigger="'+n+'"]');if(!r)throw new Error('failed to locate modal ztrigger="'+n+'"');let o={altHandler:null,$trigger:r};return e&&zzb.types.isObject(e.ztriggers)&&(o.altHandler=e.ztriggers[n]),o}(this);t||t.$trigger?t.$trigger.dispatchEvent(new CustomEvent("ztrigger-dialog-button",{detail:{dialog:e,evOriginal:n,altHandler:t.altHandler}})):e.close()}}})]};o.title=p(t,n,"title","altTitle",!1),o.body=p(t,n,"body",null,!0),o.type=p(t,n,"type","altType",!1),o.classBackdrop=p(t,n,"classBackdrop","altClassBackdrop",!1),o.classDialog=p(t,n,"class","altClass",!1),o.dataBackdrop="",!0!==t.getOptions().zdlg.noHeaderCloseButton&&!0!==n.js.noHeaderCloseButton||(o.noHeaderCloseButton=!0);let s=null;if(s=p(t,n,"theme","altTheme",!1),s=zzb.types.isStringNotEmpty(s)?function(t){if(!zzb.types.isStringNotEmpty(t))return null;let e=t.split("|"),n={type:zzb.dialogs.ZazzyDialog.TYPE_NONE};e.length>0&&zzb.types.isStringNotEmpty(e[0])&&(n.button1={label:e[0],ztrigger:e[0].toLowerCase(),type:zzb.dialogs.ZazzyDialog.TYPE_SECONDARY}),e.length>1&&zzb.types.isStringNotEmpty(e[1])&&(n.button2={label:e[1],ztrigger:e[1].toLowerCase(),type:zzb.dialogs.ZazzyDialog.TYPE_PRIMARY}),e.length>2&&zzb.types.isStringNotEmpty(e[2])&&("default"===e[2]||(n.type=e[2],n.button2&&(n.button2.type=n.type)));return n}(s):null,zzb.types.isArrayHasRecords(n.js.buttons))o.buttons=n.js.buttons,s&&s.type&&!zzb.types.isNonEmptyString(o.type)&&(o.type=s.type);else{if(s){function i(t,e){o.buttons[e].label=t.label,o.buttons[e].ztrigger=t.ztrigger.toLowerCase(),o.buttons[e].type=t.type}s.type&&!zzb.types.isNonEmptyString(o.type)&&(o.type=s.type),s.button2?i(s.button2,1):o.buttons.splice(1),s.button1?i(s.button1,0):o.buttons.splice(0)}let a=t.getOptions().zdlg.buttons;if(zzb.types.isNonEmptyString(a))if(a=a.split(";"),a.length!==o.buttons.length)console.log("zdlg-buttons definition does not match default options/theme");else for(let u=0;u<o.buttons.length;u++){let c=l(a[u]);c&&(zzb.types.isStringNotEmpty(c.label)&&(o.buttons[u].label=c.label),zzb.types.isStringNotEmpty(c.type)&&(o.buttons[u].type=c.type),zzb.types.isStringNotEmpty(c.ztrigger)&&(o.buttons[u].ztrigger=c.ztrigger))}}zzb.dialogs.showMessage(o)}function p(t,e,n,r,o){let s="",i=zzb.types.isObject(t.getOptions().zdlg);if(zzb.types.isNonEmptyString(n)){if(i&&(s=t.getOptions().zdlg[n],zzb.types.isStringNotEmpty(s)))return s;if(e){if(o&&zzb.types.isStringNotEmpty(e.html))return e.html;if(e.js&&zzb.types.isStringNotEmpty(e.js[n]))return e.js[n]}}return i&&zzb.types.isNonEmptyString(r)&&(s=t.getOptions().zdlg[r],zzb.types.isStringNotEmpty(s))?s:""}function c(t,e){t.forceStopPropDef(!0),t.runAJAX(t.buildAJAXOptions(),(function(n,r){if(r)return void(e&&e(null,r));let o=n.rob.first();o.js=function(t,e){let n=null;return zzb.types.isNonEmptyString(t)&&(n=Function('"use strict";return ('+t+")")(e)),zzb.types.merge({actionHandler:null,onAccept:null,buttons:null},n)}(o.js,t),u(t,0,o)}))}function d(t,e){if(t&&e&&zzb.types.isArray(e)){function n(t,e,n){"outer"===n?t.outerHTML=e.html:t.innerHTML=e.html,zzb.zui&&zzb.zui.onElemInit(t),zzb.zaction.addEventListeners(".zaction",null,t),zzb.zaction.runZLoadActions(t)}if(e.length!==t.length&&console.log("inject partial success; arrInjects (len="+t.length+") is less than the number of dInjects (len="+e.length+") returned"),1===e.length)n(t[0].$elem,e[0]);else for(let r=0;r<e.length;r++)if(r<t.length)for(let o=0;o<t.length;o++)if(t[o].label===e[r].label){n(t[o].$elem,e[r],t[o].placement);break}}}function z(t,e,n){t.forceStopPropDef(!0),t.runAJAX(t.buildAJAXOptions(),(function(r,o){if(o)e&&e(null,o);else{if(r&&r.rob){if(function(t,e,n){if(t&&t.canRunZVal())try{let r=e&&e.listErrs&&(e.hasErrors()||e.hasMessages);t.getOptions().$data.querySelectorAll(".zval").forEach((function(t){let o=t.classList.contains("zval-in-place");if(o?(t.classList.remove("is-valid"),t.classList.remove("is-invalid")):t.classList.add("d-none"),!n&&e){let n=zzb.dom.getAttributes(t,/^zval-/,5);zzb.types.isNonEmptyString(n.name)||o&&(n.name=zzb.dom.getAttributeElse(t,"name"));let s=[];if(r&&zzb.types.isNonEmptyString(n.name)&&(s=e.listErrs.getAnyByName(n.name)),0===s.length)o&&t.classList.add("is-valid");else if(o)t.classList.add("is-invalid");else{let e=zzb.rob.renderList({targets:s,format:"html"});zzb.types.isNonEmptyString(e)&&(t.innerHTML=e,t.classList.remove("d-none"))}}return!0}))}catch(t){console.log("failed runZValidate",t)}}(t,r.rob),r.rob.hasErrors())return void(e&&e(null,new Error("validate has errors")));!0===n&&function(t,e){if(t&&e&&e.hasRecords()&&t.getOptions().$data&&t.getOptions().isForm&&t.getOptions().$data.elements.length>0)try{for(const[n,r]of Object.entries(e.first())){const e=t.getOptions().$data.elements.namedItem(n);void 0!==e&&zzb.types.isObject(e)&&(e.value=r)}}catch(t){console.log("failed runZFormUpdate",t)}}(t,r.rob)}e&&e(r,null)}}))}r.prototype.addEventListeners=function(t,e,n){if(!zzb.types.isStringNotEmpty(t))return;n||(n=document),n.querySelectorAll(t).forEach((function(t){if("true"===t.getAttribute("za1x"))return;let n=t.getAttribute("zcall");zzb.types.isStringNotEmpty(n)||(n="click"),t.setAttribute("za1x","true"),t.addEventListener(n,(function(t){zzb.zaction.actionHandler(t,e,null)}))}))},r.prototype.actionHandler=function(t,e,n){let r=zzb.zaction.newZAction(t);if(!0!==r.isValid)throw new Error("failed to create new zaction from event");r.forceStopPropDef();let o=!1;if(e&&(o=e(r,n),!0===o))return;let s=zzb.zaction.getHandlers();for(var i=0;i<s.length;i++)if(o=s[i].run(r,n),!0===o)return;r.isZUrl()&&zzb.zaction.handleZUrl(r,n)},r.prototype.handleZUrl=function(t,e){if(!zzb.types.isStringNotEmpty(t.getOptions().zurl))throw new Error("zurl not defined: tried zurl, href, action and src");let n=!1;switch(t.getOptions().zaction.event){case"zurl-dialog":c(t,e),n=!0;break;case"zurl-confirm":!function(t,e){t.forceStopPropDef(!0),u(t,0,null)}(t),n=!0;break;case"zurl-replace":!function(t,e){t.forceStopPropDef(!0),t.runAJAX(t.buildAJAXOptions(),(function(n,r){r?e&&e(null,r):(t.getOptions().arrInjects&&d(t.getOptions().arrInjects,n.rob.first().dInjects),e&&e(n,null))}))}(t,e),n=!0;break;case"zurl-action":z(t,e),n=!0;break;case"zurl-field-update":z(t,e,!0),n=!0;break;case"zurl-blob-download":!function(t,e){t.forceStopPropDef(!0),zzb.types.isNonEmptyString(t.getOptions().zaction.expectType)||(t.getOptions().zaction.expectType="blob"),t.runAJAX(t.buildAJAXOptions(),(function(n,r){if(r)e&&e(null,r);else{if(n.data){zzb.types.isNonEmptyString(t.getOptions().zaction.blobType)||(t.getOptions().zaction.blobType="application/octet-stream"),zzb.types.isNonEmptyString(t.getOptions().zaction.blobName)||(t.getOptions().zaction.blobName="my-file");const e=URL.createObjectURL(n.data),r=document.createElement("a");r.classList.add("d-none"),r.href=e,r.download=t.getOptions().zaction.blobName,document.body.appendChild(r),r.click()}e&&e(n,null)}}))}(t,e),n=!0;break;case"zurl-nav-tab":if(t.forceStopPropDef(!0),t.isZUrl()){n=!0;let e=t.getOptions().zurl;e.startsWith("http://")||e.startsWith("https://")||(e.startsWith("/")||(e="/"+e),e=window.location.origin+e),window.open(e,"_blank")}e&&e(null,null);break;default:t.forceStopPropDef(!0),t.isZUrl()&&(n=!0,window.location.href=t.getOptions().zurl),e&&e(null,null)}return n},r.prototype.runZLoadActions=function(t){t||(t=document);let e=t.querySelectorAll(".zload-action");e&&e.forEach((function(t){t.addEventListener("zload-action",(function(t){zzb.zaction.actionHandler(t,null,null)})),t.dispatchEvent(new CustomEvent("zload-action"))}))},document.addEventListener("DOMContentLoaded",(function(){let t=document.querySelector("body");if(t){if("true"===t.getAttribute("no-autoload-zactions"))return;zzb.zaction.addEventListeners(".zaction")}zzb.zaction.runZLoadActions()}),!1),e.n=r},844:(t,e)=>{var n=function(){this.zsplitters={}};function r(t,e,n){n?Array.isArray(n)||(n=n.split(",")):n=[];for(let t=0;t<n.length;t++)(r=n[t].slice(-1))>="0"&&r<="9"&&""!==n[t]&&(n[t]+="px");var r;zzb.types.isNonEmptyString(t.id)||(t.id="zsplitter"+zzb.zui.getZSplitters().length+e);const o="left"===e?t.previousElementSibling:t.nextElementSibling,s="left"===e?t.nextElementSibling:t.previousElementSibling;let i=0;function a(){if(n.length>0)if(n[i].endsWith("%")){let e=0,r=0;try{let e=parseFloat(n[i].slice(0,-1))/100,r=t.getBoundingClientRect().width+o.getBoundingClientRect().width+s.getBoundingClientRect().width;o.style.width=r*e+"px"}catch{console.log("failed to set targetSide width",e,r),o.style.width="200px"}}else o.style.width=n[i]}a(),t.querySelectorAll("[zsplitter-toggable]").forEach((function(t){t.addEventListener("click",(function(t){t.preventDefault(),i++,i<n.length?a():i===n.length&&(i=-1,o.style.width="0")}),!1)}));let l=n.length>0,u=!1;if(l){let e=!1;for(var p=0;p<t.attributes.length;p++)if("zsplitter-show"===t.attributes[p].nodeName){l="open"===t.attributes[p].nodeValue,l||(u="closed"===t.attributes[p].nodeValue,u&&(l=!0)),e=!0;break}e||(t.classList.contains("d-none")||o.classList.contains("d-none"))&&(l=!1),u&&(o.style.width=0,i=-1),l?(t.classList.remove("d-none"),o.classList.remove("d-none")):(t.classList.add("d-none"),o.classList.add("d-none"))}let c=zzb.zui.getZSplitter(t.id);c.toggle=function(e){"open"===e?(i=0,t.classList.remove("d-none"),o.classList.remove("d-none"),a()):"close"===e?(o.style.width=0,i=-1,t.classList.remove("d-none"),o.classList.remove("d-none")):"dismiss"===e&&(i=-1,t.classList.add("d-none"),o.classList.add("d-none"))},zzb.zui.setZSplitter(t.id,c);let d=0,z=0,y=0;const g=function(n){const r=n.clientX-d,i=(n.clientY,100*(y+r*("left"===e?1:-1))/t.parentNode.getBoundingClientRect().width);o.style.width=`${i}%`,t.style.cursor="col-resize",document.body.style.cursor="col-resize",o.style.userSelect="none",o.style.pointerEvents="none",s.style.userSelect="none",s.style.pointerEvents="none"},f=function(){t.style.removeProperty("cursor"),document.body.style.removeProperty("cursor"),o.style.removeProperty("user-select"),o.style.removeProperty("pointer-events"),s.style.removeProperty("user-select"),s.style.removeProperty("pointer-events"),document.removeEventListener("mousemove",g),document.removeEventListener("mouseup",f)};t.addEventListener("mousedown",(function(t){d=t.clientX,z=t.clientY,y=o.getBoundingClientRect().width,document.addEventListener("mousemove",g),document.addEventListener("mouseup",f)}))}n.prototype.getZSplitter=function(t){let e=this.zsplitters[t];return e||{toggle:null}},n.prototype.setZSplitter=function(t,e){t&&e&&(this.zsplitters[t]=e)},n.prototype.toggleZSplitterById=function(t,e){let n=document.getElementById(t);if(n){zzb.zui.getZSplitter(n.id).toggle(e)}},n.prototype.onLoadInit=function(){document.querySelectorAll(".zsplitter").forEach((function(t){Array.from(t.attributes).forEach((e=>{switch(e.nodeName){case"zsplitter-left":return r(t,"left",e.nodeValue),!0;case"zsplitter-right":return r(t,"right",e.nodeValue),!0}}))}))};const o={date:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",clear:"Clear",dateFormat:"MM/dd/yyyy",timeFormat:"hh:mm aa",firstDay:0}};n.prototype.setLocale=function(t){this.locale=t},n.prototype.getLocale=function(t,e){if(!e)throw new Error("no callback defined for getLocale");if(this.locale)e(this.locale);else{let t=o;zzb.zui.setLocale(t),e(t)}},n.prototype.onElemInit=function(t){if(t||(t=document.body),"undefined"!=typeof AirDatepicker){let t=document.querySelectorAll(".zdate-picker");t&&t.forEach((function(t){let e=zzb.types.merge(zzb.dom.getAttributes(t,/^zdate-/,6),{value:zzb.dom.getAttributeElse(t,"value",null),locale:"en",autoClose:!0,useISOVal:"date-iso"===zzb.dom.getAttributeElse(t,"zf-type",null)});e.autoClose=zzb.strings.toBool(e.autoClose);let n="INPUT"===t.nodeName,r=null;zzb.types.isNonEmptyString(e.value)&&(r="now"===e.value?new Date:new Date(Date.parse(e.value)));let o=zzb.dom.getAttributeElse(t,"name",null);zzb.zui.getLocale(e.locale,(function(s){let i=new AirDatepicker(t,{locale:s.date,autoClose:e.autoClose,onSelect:function(r){n&&e.useISOVal&&o&&zzb.dom.setAttribute(t,"zf-cval",r.date.toISOString())}});r&&i.selectDate(r)}))}))}},document.addEventListener("DOMContentLoaded",(function(){zzb.zui.onLoadInit(),zzb.zui.onElemInit()}),!1),e.G=n},616:function(t,e,n){var r,o,s,i;s=this,i=function(){var t=n(449).V,e=n(781).V,r=n(313).j,o=n(171).v,s=n(772).y,i=n(154).Q,a=n(334).S,l=n(546).h,u=n(602).n,p=n(844).G;function c(){}return c.prototype.types=new t,c.prototype.uuid=new e,c.prototype.strings=new r,c.prototype.dom=new o,c.prototype.dialogs=new s,c.prototype.perms=new i,c.prototype.rob=new a,c.prototype.ajax=new l,c.prototype.zaction=new u,c.prototype.zui=new p,new c},"undefined"!=typeof window?window.zzb=i():void 0!==s?s.zzb=i():void 0===(o="function"==typeof(r=i)?r.call(e,n,e,t):r)||(t.exports=o)}},e={};(function n(r){var o=e[r];if(void 0!==o)return o.exports;var s=e[r]={exports:{}};return t[r].call(s.exports,s,s.exports,n),s.exports})(616)})();