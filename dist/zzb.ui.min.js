(()=>{var t={149:(t,e)=>{class s{constructor(t){this.defaultOptions=s.getDialogDefaults(t),this.defaultOptions.onShow="function"==typeof t.onShow?t.onShow:function(){},this.defaultOptions.onShown="function"==typeof t.onShown?t.onShown:function(){},this.defaultOptions.onHide="function"==typeof t.onHide?t.onHide:function(){},this.defaultOptions.onHidden="function"==typeof t.onHidden?t.onHidden:function(){},this.isBootstrap=!0!==this.defaultOptions.forceNoBootstrap&&null!=window.bootstrap,this.modal=null,zzb.types.isStringNotEmpty(this.defaultOptions.id)&&(this.modal=document.getElementById(this.defaultOptions.id)),this.modal||(this.modal=this.createModal()),this.defaultOptions.htmlDialog="",this.defaultOptions.body="",this.isBootstrap?this.bsModal=new bootstrap.Modal(this.modal,{focus:!0===this.defaultOptions.focus,keyboard:!0===this.defaultOptions.keyboard}):(this.closeModal=this.modal.querySelectorAll("[data-bs-dismiss]"),this.closeModal.forEach((t=>{t.addEventListener("click",(t=>{this.close()}))})));const e=this;this.modal.addEventListener("show.bs.modal",(function(t){e.defaultOptions.onShow&&zzb.types.isFunction(e.defaultOptions.onShow)&&e.defaultOptions.onShow(t)})),this.modal.addEventListener("shown.bs.modal",(function(t){if(e.defaultOptions.hasAutoBackdrop){let t=e.modal.nextElementSibling;t&&t.classList.contains("modal-backdrop")&&(e.modal.style.zIndex="2055",t.style.zIndex="2050")}e.defaultOptions.onShown&&zzb.types.isFunction(e.defaultOptions.onShown)&&e.defaultOptions.onShown(t)})),this.modal.addEventListener("hide.bs.modal",(function(t){e.defaultOptions.onHide&&zzb.types.isFunction(e.defaultOptions.onHide)&&e.defaultOptions.onHide(t)})),this.modal.addEventListener("hidden.bs.modal",(function(t){e.defaultOptions.onHidden&&zzb.types.isFunction(e.defaultOptions.onHidden)&&e.defaultOptions.onHidden(t),e.defaultOptions.doAutoDestroy&&e.bsModal&&(e.bsModal.dispose(),e.modal.remove())})),this.target=document.getElementById(t.target),this.target&&this.target.addEventListener("click",(t=>{this.open()}))}open(){this.bsModal?this.bsModal.show():(this.modal.classList.add("show-modal"),setTimeout((()=>{this.animateIn()}),10))}close(){this.bsModal?this.bsModal.hide():(this.animateOut(),setTimeout((()=>{this.modal.classList.remove("show-modal")}),250))}animateIn(){this.modal.classList.add("animate-modal")}animateOut(){this.modal.classList.remove("animate-modal")}destroy(){this.bsModal&&(this.bsModal.hide(),this.defaultOptions.doAutoDestroy||(this.bsModal.dispose(),this.modal.remove()))}static BUTTON_CLOSE="button-close";static BUTTON_OK="button-ok";static BUTTON_YES="button-yes";static BUTTON_NO="button-no";static BUTTON_CANCEL="button-cancel";static TYPE_NONE="none";static TYPE_PRIMARY="primary";static TYPE_SECONDARY="secondary";static TYPE_SUCCESS="success";static TYPE_DANGER="danger";static TYPE_WARNING="warning";static TYPE_INFO="info";static TYPE_LIGHT="light";static TYPE_DARK="dark";static TYPE_LINK="link";static getDialogDefaults(t){const e={htmlDialog:"",id:zzb.uuid.newV4(),type:s.TYPE_NONE,classDialog:"",classBackdrop:"",extraAttributes:"",noFade:!1,noFocus:!1,noKeyboard:!1,title:"",body:"",buttons:[],onShow:null,onShown:null,onHide:null,onHidden:null,doVerticalCenter:!0,doAutoDestroy:!0,forceNoBootstrap:!1,hasAutoBackdrop:!1,isScrollable:!1,isNoFooter:!1,classWidthMod:"",isFullscreen:!1,classFullscreenMod:""};return zzb.types.isObject(t)?zzb.types.merge(e,t):e}static getButtonDefaults(t){const e={id:null,type:s.TYPE_NONE,label:"",className:"",action:null,isDismiss:!1,isOutline:!1,ztrigger:null};return zzb.types.isObject(t)?zzb.types.merge(e,t):e}static getButtonPreset(t,e,n){let o=s.getButtonDefaults();switch(o.isDismiss=!0,e===n-1?o.type=s.TYPE_PRIMARY:e===n-2&&(o.type=s.TYPE_SECONDARY),t){case"button-close":o.label="Close";break;case"button-ok":o.label="Ok";break;case"button-accept":o.label="Accept";break;case"button-yes":o.label="Yes";break;case"button-no":o.label="No";break;case"button-cancel":o.label="Cancel";break;default:o=null}return o&&o.label&&(o.ztrigger=o.label.toLowerCase()),o}static validateType(t){if(!t)return s.TYPE_NONE;switch(t){case s.TYPE_PRIMARY:case s.TYPE_SECONDARY:case s.TYPE_SUCCESS:case s.TYPE_DANGER:case s.TYPE_WARNING:case s.TYPE_INFO:case s.TYPE_LIGHT:case s.TYPE_DARK:case s.TYPE_LINK:return t;default:return s.TYPE_NONE}}static isTypeNone(t){return s.validateType(t)===s.TYPE_NONE}getId(){return zzb.types.isStringNotEmpty(this.defaultOptions.id)||(this.defaultOptions.id=zzb.uuid.newV4()),this.defaultOptions.id}getClassBackdrop(){return zzb.types.isStringNotEmpty(this.defaultOptions.classBackdrop)||(this.defaultOptions.classBackdrop=""),this.defaultOptions.classBackdrop}getClassDialog(){return zzb.types.isStringNotEmpty(this.defaultOptions.classDialog)||(this.defaultOptions.classDialog=""),this.defaultOptions.classDialog}getTitle(){return zzb.types.isStringNotEmpty(this.defaultOptions.title)||(this.defaultOptions.title=""),this.defaultOptions.title}getBody(){return zzb.types.isStringNotEmpty(this.defaultOptions.body)||(this.defaultOptions.body=""),this.defaultOptions.body}createModal(){if(this.defaultOptions.htmlDialog&&!zzb.types.isStringNotEmpty(this.defaultOptions.htmlDialog))return document.body.insertAdjacentHTML("beforeend",htmlModal),document.getElementById(this.getId());const t=zzb.types.merge({id:this.getId(),arialabel:"arialabel"+this.getId(),classBackdrop:this.getClassBackdrop(),classDialog:this.getClassDialog(),title:this.getTitle(),body:this.getBody(),classVerticalCenter:this.defaultOptions.doVerticalCenter?" modal-dialog-centered":"",classModalHeader:"",noHeaderCloseButton:!1,noHeaderCloseButtonButton:"",dataKeyboard:null,focus:1!=this.defaultOptions.noFocus,keyboard:1!=this.defaultOptions.noKeyboard,classScrollable:this.defaultOptions.isScrollable?" modal-dialog-scrollable":"",classNoFooter:this.defaultOptions.isNoFooter?" d-none":"",classWidthMod:"",classFullscreen:""},this.defaultOptions);t.classFade=" fade",zzb.types.isBoolean(t.noFade)&&!0===t.noFade&&(t.classFade=""),s.isTypeNone(t.type)||(t.classModalHeader+=" alert-"+t.type),zzb.types.isStringNotEmpty(t.classDialog)&&(t.classDialog=" "+t.classDialog),zzb.types.isStringNotEmpty(t.classBackdrop)&&(t.classBackdrop=" "+t.classBackdrop),!0!==t.hasAutoBackdrop||zzb.types.isStringNotEmpty(t.dataBackdrop)||(t.dataBackdrop="true"),zzb.types.isStringNotEmpty(t.dataBackdrop)&&(t.hasAutoBackdrop=!0,t.extraAttributes+=' data-bs-backdrop="'+t.dataBackdrop+'"'),zzb.types.isStringNotEmpty(t.classWidthMod)&&(t.classWidthMod=" modal-"+t.classWidthMod),1==t.isFullscreen&&(t.classFullscreen=" modal-fullscreen",zzb.types.isStringNotEmpty(t.classFullscreenMod)&&(t.classFullscreen=t.classFullscreen+"-"+t.classFullscreenMod+"-down")),zzb.types.isBoolean(t.dataKeyboard)&&(t.extraAttributes+=' data-bs-keyboard="'+t.dataKeyboard+'"'),!0!==t.noHeaderCloseButton&&(t.noHeaderCloseButtonButton='<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>');document.body.insertAdjacentHTML("beforeend",zzb.strings.format('<div class="modal{classFade}{classBackdrop}" {extraAttributes} id="{id}" tabindex="-1" role="dialog" aria-labelledby="{arialabel}" aria-hidden="true"><div class="modal-dialog{classVerticalCenter}{classFullscreen}{classWidthMod}{classScrollable}{classDialog}" role="document"><div class="modal-content"><div class="modal-header{classModalHeader}"><h5 class="modal-title" id="{arialabel}">{title}</h5>{noHeaderCloseButtonButton}</div><div class="modal-body">{body}</div><div class="modal-footer{classNoFooter}"></div></div></div></div>',t));const e=document.getElementById(this.getId());if(!e)throw new Error("unexpected that modal has not been created");const n=this;Array.isArray(t.buttons)||(t.buttons=[]);const o=t.buttons.length;return t.buttons.forEach((function(t,r){zzb.types.isStringNotEmpty(t)&&(t=s.getButtonPreset(t,r,o)),zzb.types.isObject(t)&&(zzb.types.isStringNotEmpty(t.id)||(t.id="button-"+r+"-"+n.getId()),s.isTypeNone(t.type)||(t.isOutline?t.className+=" btn-outline-"+t.type:t.className+=" btn-"+t.type),t.isDismiss&&(zzb.types.isFunction(t.action)||(t.action=function(t,e){t.close()}),zzb.dom.setAttribute(e.querySelector(".modal-header button[data-bs-dismiss]"),"aria-label",t.label)),zzb.types.isStringNotEmpty(t.ztrigger)&&(t.ztrigger=zzb.strings.format(' ztrigger="{0}"',t.ztrigger)),zzb.dom.hasElement(e.querySelector(".modal-footer"))&&(e.querySelector(".modal-footer").insertAdjacentHTML("beforeend",zzb.strings.format('<button id="{id}" type="button" class="btn {className}"{ztrigger}>{label}</button>',t)),document.getElementById(t.id).addEventListener("click",(function(e){if(t&&zzb.types.isFunction(t.action))return t.action.call(document.getElementById(t.id),n,e)}))))})),this.defaultOptions=t,document.getElementById(this.getId())}}const n=function(){this.modals={}};n.prototype.ZazzyDialog=s,n.prototype.modal=function(t){if(t&&t.id&&zzb.types.isStringNotEmpty(t.id)&&this.modals[t.id])return this.modals[t.id];const e=new s(t);if(e&&zzb.types.isStringNotEmpty(e.getId()))return e;throw new Error("Failed to create dialog")},n.prototype.showMessage=function(t){const e=zzb.dialogs.modal(zzb.types.merge({type:s.TYPE_NONE,buttons:[s.BUTTON_OK]},t));if(!0===t.noAutoOpen)return e;e.open()},n.prototype.showMessageChoice=function(t){const e=zzb.dialogs.modal(zzb.types.merge({type:s.TYPE_NONE,buttons:[s.BUTTON_CANCEL,s.getButtonDefaults({type:s.TYPE_PRIMARY,label:"Accept",action:function(t,e){t.close()}})]},t));if(!0===t.noAutoOpen)return e;e.open()},n.prototype.handleError=function(t){if((t=zzb.types.merge({log:null,type:s.TYPE_DANGER,title:"",body:'<div class="zzb-dialog-errors">{errors}</div><div class="zzb-dialog-message">{message}</div>',message:"",errs:null,errors:"",buttons:[s.getButtonDefaults({type:s.TYPE_DANGER,label:"Ok",action:function(t,e){t.close()}})]},t)).log&&console.log(t.log),!zzb.types.isStringNotEmpty(t.errors)&&zzb.types.isArray(t.errs)){const e=[];t.errs.forEach((function(t,s){t.message&&zzb.types.isStringNotEmpty(t.message)&&e.push(zzb.strings.format('<div class="zzb-dialog-error-item">{0}</div>',t.message))})),t.errors=e.join("\n")}t.body=zzb.strings.format(t.body,t),this.showMessage(t)},e.i=n},168:(t,e)=>{class s{constructor(t){this.options=zzb.types.merge({id:null,handler:null,namespace:null},t)}getId(){return this.options.id}getHandler(){return this.options.handler}getNameSpace(){return this.options.namespace}run(t){return!!this.options.handler&&this.options.handler(t)}}const n=function(){this.handlers=[]};n.prototype.ZActionHandler=s,n.prototype.registerHandler=function(t){zzb.zaction.setHandler(new s(t))},n.prototype.getHandlers=function(){return this.handlers},n.prototype.getHandler=function(t){if(t){for(const e of this.handlers)if(e.getId()===t)return e;return null}},n.prototype.setHandler=function(t){if(t){for(let e=0;e<this.handlers.length;e++)if(this.handlers[e].getId()===t.id)return void(this.handlers[e]=t);this.handlers.push(t)}},n.prototype.buildZClosest=function(t,e,s,n){return r(t,e,s,n)};class o{constructor(t){this.$elem=t,this.zaction={},this.zdata={},this.zdlg={tryDialog:!1},this.zurl=null,this.$data=null,this.arrInjects=null,this.zref={},this.zinterval={id:t.getAttribute("zi-id"),noClick:"true"===t.getAttribute("zi-noclick")},this.forceIgnoreZUrl=!1,this.forceIgnoreZData=!1,this.forceIgnoreZInject=!1,this.isForm=!1,this.formData=null,t.setAttribute("zi-noclick","false")}bld_mergeAttributes(){this.zaction=zzb.types.merge(zzb.dom.getAttributes(this.$elem,/^za-/,3),this.zaction),this.zdata=zzb.types.merge(zzb.dom.getAttributes(this.$elem,/^zd-/,3),this.zdata)}bld_addViewPort(){if("undefined"!=typeof window){this.zaction.viewPort={window:{w:Math.round(window.innerWidth)||0,h:Math.round(window.innerHeight)||0},content:{w:0,h:0}};const t=document.querySelector(".zwc-main-content");if(t){const e=t.getBoundingClientRect();this.zaction.viewPort.content={w:Math.round(e.width),h:Math.round(e.height)}}}}bld_resolveZUrl(t,e){this.forceIgnoreZUrl||((t||e)&&(this.forceIgnoreZUrl="true"===this.zaction.ignoreZurl),this.forceIgnoreZUrl||this.zurl||(this.zurl=zzb.dom.findZUrl(this.$elem,!0)))}bld_resolveZData(){if(!this.forceIgnoreZData&&!this.$data&&zzb.types.isStringNotEmpty(this.zaction.data)){const t=zzb.dom.findSelectorTargets(this.$elem,this.zaction.data);t&&t[0].$elem?(this.$data=t[0].$elem,this.forceIgnoreZData="none"===this.$data,this.forceIgnoreZData?(this.$data=null,this.formData=null):"form"===this.$data.nodeName.toLowerCase()&&(this.isForm=!0,this.formData=new FormData(this.$data))):console.warn("No matching selector found for zaction.data:",this.zaction.data)}}bld_resolveZDialog(){if(this.zref=zzb.types.merge(zzb.dom.getAttributes(this.$elem,/^zref-/,5),this.zref),this.zdlg=zzb.types.merge(zzb.dom.getAttributes(this.$elem,/^zdlg-/,5),this.zdlg),zzb.types.isStringNotEmpty(this.zaction.dlg)){const t=zzb.dom.findSelectorTargets(this.$elem,this.zaction.dlg);if(t&&t[0].$elem){const e=t[0].$elem;this.zdlg=zzb.types.merge(zzb.dom.getAttributes(e,/^zdlg-/,5),this.zdlg),this.zaction=zzb.types.merge(zzb.dom.getAttributes(e,/^za-/,3),this.zaction),this.zurl||(this.zurl=zzb.dom.findZUrl(e,!0))}}}bld_resolveInjects(){if(!this.forceIgnoreZInject&&!this.arrInjects&&zzb.types.isStringNotEmpty(this.zaction.inject)){const t=zzb.dom.findSelectorTargets(this.$elem,this.zaction.inject);"none"!==t?this.arrInjects=t:(this.forceIgnoreZInject=!0,this.arrInjects=null)}}}function r(t,e=null,s=!1,n=null){if(!t)return null;const i=!e,l=i?new o(t):e;l.$elem=t,l.bld_mergeAttributes(),i&&l.bld_addViewPort(),l.bld_resolveZUrl(i,s),l.bld_resolveZData(),(i||s)&&l.bld_resolveZDialog(),l.bld_resolveInjects();const a=i&&!t.classList.contains("zaction")&&"za-post-action"!==n;if(a){return r(t.closest(".zaction"),l,a,n)}const c=zzb.dom.getAttributeElse(t,"zclosest",null);if(c){const e=t.closest(c);if(e)return r(e,l)}return l}class i{constructor(t){this.ev=t,this.zcall=t?.target?.getAttribute("zcall")||null,this._options=null,this._runAJAX=null,this.reservePH=[":event",":mod",":zid",":zidParent",":blobName"]}isMouseDown(){return"mousedown"===this.zcall}forceStopPropDef(t){const e=t||"true"===this.ev?.target?.getAttribute("force-stop-prop-def");return e&&(this.ev.preventDefault?.(),this.ev.stopPropagation?.()),e}getZEvent(){return this.getOptions()?.zaction?.event??null}hasZEvent(){const t=this.getZEvent();return zzb.types.isStringNotEmpty(t)}isValid(){return!!this.ev?.target&&this.hasZEvent()}isZUrl(){return zzb.types.isStringNotEmpty(this.getOptions()?.zurl)}runAJAX(t,e){this.getOptions(),t&&this._runAJAX?this._runAJAX(t,e):e?.(null,new Error("_runAJAX not defined"))}runInjects(t){const e=this.getOptions().arrInjects,s=t?.rob?.first?.()?.dInjects;e&&s&&d(e,s)}getOptions(){if(this._options)return this._options;const t=this.ev?.target;if(!t)return this._options=null;const e=zzb.zaction.buildZClosest(t,null,null,this.ev.zaExtraHandler);if(!e)return this._options=null,null;this._options=e;const s=this._options;if(!s.forceIgnoreZData&&s.$data&&(s.zaction.zid??=zzb.dom.getAttributeElse(s.$data,"za-zid",null),s.zaction.zidParent??=zzb.dom.getAttributeElse(s.$data,"za-zid-parent",null),s.zurl??=zzb.dom.findZUrl(s.$data,!0)),!s.forceIgnoreZUrl&&zzb.types.isStringNotEmpty(s.zurl))for(const t of this.reservePH)if(s.zurl.includes(t)){const e=t.slice(1),n=s.zaction[e];if(!zzb.types.isStringNotEmpty(n))throw new Error(`Missing required placeholder '${t}' in zurl`);s.zurl=s.zurl.replace(t,n)}switch(s.zaction.pageOn=zzb.strings.parseIntOrZero(s.zaction.pageOn),s.zaction.pageLimit=zzb.strings.parseIntOrZero(s.zaction.pageLimit),s.zaction.method||="postJSON",s.zaction.method){case"getJSON":this._runAJAX=zzb.ajax.getJSON;break;case"postFORM":this._runAJAX=zzb.ajax.postFORM;break;default:this._runAJAX=zzb.ajax.postJSON}return s.zdlg.tryDialog=zzb.types.isObject(s.zdlg)&&Object.keys(s.zdlg).length>0,zzb.types.isStringNotEmpty(s.zaction.loopType)&&!s.forceIgnoreZInject&&s.arrInjects&&("true"===s.zaction.loopInjectSkipInject?s.zaction.loopType=null:s.hasLoopType=!0),s}buildAJAXOptions(){this.getOptions();const t=this._options,e={url:t.zurl},s=zzb.time.getInterval(t.zinterval.id),n=s&&s.hasCache();let o=!1;switch(s&&!t.zinterval.noClick&&s.setCache(null),t.zaction.method){case"postJSON":t.forceIgnoreZData||t.isForm&&(e.body=n?s.getCache():zzb.dom.formDataToJson(t.$data),t.zdata&&(e.body=zzb.types.merge(e.body,t.zdata))),e.body=e.body||{},e.body.zaction=t.zaction;break;case"postFORM":e.body=n?s.getCache():t.formData,o=!n}return o&&s&&s.setCache(e.body),zzb.types.isStringNotEmpty(t.zaction.expectType)&&(e.expectType=t.zaction.expectType),e}}function l(t,e,s){if(t&&t.canRunZVal())try{let n=e&&e.listErrs&&(e.hasErrors()||e.hasMessages);t.getOptions().$data.querySelectorAll(".zval").forEach((function(t){let o=t.classList.contains("zval-in-place");if(o?(t.classList.remove("is-valid"),t.classList.remove("is-invalid")):t.classList.add("d-none"),!s&&e){let s=zzb.dom.getAttributes(t,/^zval-/,5);zzb.types.isStringNotEmpty(s.name)||o&&(s.name=zzb.dom.getAttributeElse(t,"name"));let r=[];if(n&&zzb.types.isStringNotEmpty(s.name)&&(r=e.listErrs.getAnyByName(s.name)),0===r.length)o&&t.classList.add("is-valid");else if(o)t.classList.add("is-invalid");else{let e=zzb.rob.renderList({targets:r,format:"html"});zzb.types.isStringNotEmpty(e)&&(t.innerHTML=e,t.classList.remove("d-none"))}}return!0}))}catch(t){console.log("failed runZValidate",t)}}function a(t){if(!zzb.types.isStringNotEmpty(t))return null;let e=t.split("|");if(0===e.length)return null;let s={};return e.length>0&&(s.label=e[0]),e.length>1&&(s.type=e[1]),e.length>2&&(s.ztrigger=e[2]),s}function c(t,e,s){function n(e,s,n){s||(zzb.types.isStringNotEmpty(t.getOptions().zdlg.postSave)?y(t.getOptions().zdlg.postSave):t.getOptions().hasLoopType&&d(t.getOptions().arrInjects,e.rob.first().dInjects),n&&n.close())}s=zzb.types.merge({html:null,js:{title:null,altTitle:null,body:null,type:null,buttons:null,noHeaderCloseButton:!1,focus:!0,keyboard:!0}},s||{});let o={title:"",body:"",onShow:function(e){let o=e.target.querySelector(".modal-body");if(!o)return;if("true"===zzb.dom.getAttributeElse(o,"_zdinit",""))return;let r=e.target.querySelectorAll(".modal-footer [ztrigger]"),i=[];r&&r.forEach((function(t){i.push(t.getAttribute("ztrigger"))})),zzb.zaction.loadZInputs(o),zzb.zui&&zzb.zui.onElemInit(o),zzb.zaction.addEventListeners(".zaction",s.js.actionHandler,o);let l=o.querySelectorAll("[ztrigger]"),a=[];l&&l.forEach((function(e){let s=e.getAttribute("ztrigger");i.includes(s)?(t.getOptions().hasLoopType&&(zzb.types.isStringNotEmpty(e.getAttribute("za-loop-type"))||(e.setAttribute("za-loop-type",t.getOptions().zaction.loopType),e.setAttribute("za-loop-inject-skip-inject","false"))),e.addEventListener("ztrigger-dialog-button",(function(t){zzb.zaction.actionHandler(t,t.detail.altHandler,(function(e,s){n(e,s,t.detail.dialog)}))}))):console.log('no match of ztrigger handler "',s+'"'),a.push(s)}));r&&r.length>0&&r.forEach((t=>{const e=t.getAttribute("ztrigger")?.toLowerCase();if(!e)return console.warn("Button in footer is missing ztrigger, removing"),void t.remove();"cancel"===e||a.includes(e)||(console.warn(`Removing modal-footer button with ztrigger="${e}" â€“ no matching .zaction`),t.remove())})),zzb.dom.setAttribute(o,"_zdinit","true"),o.classList.contains("d-none")&&o.classList.remove("d-none")},onShown:null,onHide:null,onHidden:null,buttons:[zzb.dialogs.ZazzyDialog.getButtonDefaults({type:zzb.dialogs.ZazzyDialog.TYPE_SECONDARY,label:"Cancel",ztrigger:"cancel",action:function(t,e){t.close()}}),zzb.dialogs.ZazzyDialog.getButtonDefaults({type:zzb.dialogs.ZazzyDialog.TYPE_PRIMARY,label:"Ok",ztrigger:"ok",action:function(e,s){if("zurl-confirm"===t.getZEvent())t.runAJAX(t.buildAJAXOptions(),(function(t,s){n(t,s,e)}));else{let t=function(t,e){if(!t)return null;let s=zzb.dom.getAttributeElse(t,"ztrigger");if(!s)return null;let n=t.closest(".modal-content").querySelector('.modal-body [ztrigger="'+s+'"]');if(!n)throw new Error('failed to locate modal ztrigger="'+s+'"');let o={altHandler:null,$trigger:n};return e&&zzb.types.isObject(e.ztriggers)&&(o.altHandler=e.ztriggers[s]),o}(this);t||t.$trigger?t.$trigger.dispatchEvent(new CustomEvent("ztrigger-dialog-button",{detail:{dialog:e,evOriginal:s,altHandler:t.altHandler}})):e.close()}}})]};o.title=u(t,s,"title","altTitle",!1),o.body=u(t,s,"body",null,!0),o.type=u(t,s,"type","altType",!1),o.classBackdrop=u(t,s,"classBackdrop","altClassBackdrop",!1),o.classDialog=u(t,s,"class","altClass",!1),o.dataBackdrop="",o.classWidthMod=u(t,s,"classWidthMod","altClassWidthMod",!1),o.classFullscreenMod=u(t,s,"classFullscreenMod","altClassFullscreenMod",!1),o.isScrollable="true"===u(t,s,"isScrollable","altIsScrollable",!1),o.isFullscreen="true"===u(t,s,"isFullscreen","altIsFullscreen",!1),o.isNoFooter="true"===u(t,s,"isNoFooter","altIsNoFooter",!1),o.noHeaderCloseButton="true"===t.getOptions().zdlg.noHeaderCloseButton||!0===s.js.noHeaderCloseButton,o.noFocus="true"===t.getOptions().zdlg.noFocus||!0===s.js.noFocus,o.noKeyboard="true"===t.getOptions().zdlg.noKeyboard||!0===s.js.noKeyboard;let r=null;if(r=u(t,s,"theme","altTheme",!1),r=zzb.types.isStringNotEmpty(r)?function(t){if(!zzb.types.isStringNotEmpty(t))return null;let e=t.split("|"),s={type:zzb.dialogs.ZazzyDialog.TYPE_NONE};e.length>0&&zzb.types.isStringNotEmpty(e[0])&&(s.button1={label:e[0],ztrigger:e[0].toLowerCase(),type:zzb.dialogs.ZazzyDialog.TYPE_SECONDARY}),e.length>1&&zzb.types.isStringNotEmpty(e[1])&&(s.button2={label:e[1],ztrigger:e[1].toLowerCase(),type:zzb.dialogs.ZazzyDialog.TYPE_PRIMARY}),e.length>2&&zzb.types.isStringNotEmpty(e[2])&&("default"===e[2]||(s.type=e[2],s.button2&&(s.button2.type=s.type)));return s}(r):null,zzb.types.isArrayHasRecords(s.js.buttons))o.buttons=s.js.buttons,r&&r.type&&!zzb.types.isStringNotEmpty(o.type)&&(o.type=r.type);else{if(r){function i(t,e){o.buttons[e].label=t.label,o.buttons[e].ztrigger=t.ztrigger.toLowerCase(),o.buttons[e].type=t.type}r.type&&!zzb.types.isStringNotEmpty(o.type)&&(o.type=r.type),r.button2?i(r.button2,1):o.buttons.splice(1),r.button1?i(r.button1,0):o.buttons.splice(0)}let l=t.getOptions().zdlg.buttons;if(zzb.types.isStringNotEmpty(l))if(l=l.split(";"),l.length!==o.buttons.length)console.log("zdlg-buttons definition does not match default options/theme");else for(let c=0;c<o.buttons.length;c++){let p=a(l[c]);p&&(zzb.types.isStringNotEmpty(p.label)&&(o.buttons[c].label=p.label),zzb.types.isStringNotEmpty(p.type)&&(o.buttons[c].type=p.type),zzb.types.isStringNotEmpty(p.ztrigger)&&(o.buttons[c].ztrigger=p.ztrigger))}}zzb.dialogs.showMessage(o)}function u(t,e,s,n,o){let r="",i=zzb.types.isObject(t.getOptions().zdlg);if(zzb.types.isStringNotEmpty(s)){if(i&&(r=t.getOptions().zdlg[s],zzb.types.isStringNotEmpty(r)))return r;if(e){if(o&&zzb.types.isStringNotEmpty(e.html))return e.html;if(e.js&&zzb.types.isStringNotEmpty(e.js[s]))return e.js[s]}}return i&&zzb.types.isStringNotEmpty(n)&&(r=t.getOptions().zdlg[n],zzb.types.isStringNotEmpty(r))?r:""}function p(t,e){t.forceStopPropDef(!0),t.runAJAX(t.buildAJAXOptions(),(function(s,n){if(n)return void(e&&e(null,n));let o=s.rob.first();o.js=function(t,e){let s=null;return zzb.types.isStringNotEmpty(t)&&(s=Function('"use strict";return ('+t+")")(e)),zzb.types.merge({actionHandler:null,onAccept:null,buttons:null},s)}(o.js,t),c(t,0,o)}))}function d(t,e){if(t&&e&&zzb.types.isArray(e)){function s(t,e,s){"outer"===s?t.outerHTML=e.html:t.innerHTML=e.html,zzb.zui&&zzb.zui.onElemInit(t),zzb.zaction.addEventListeners(".zaction",null,t),zzb.zaction.runZLoadActions(t)}if(e.length!==t.length&&console.log("inject partial success; arrInjects (len="+t.length+") is less than the number of dInjects (len="+e.length+") returned"),1===e.length)s(t[0].$elem,e[0]);else for(let n=0;n<e.length;n++)if(n<t.length)for(let o=0;o<t.length;o++)if(t[o].label===e[n].label){s(t[o].$elem,e[n],t[o].placement);break}}}function z(t,e,s){t.forceStopPropDef(!0),t.runAJAX(t.buildAJAXOptions(),(function(n,o){if(o)e&&e(null,o);else{if(n&&n.rob){if(l(t,n.rob),n.rob.hasErrors())return void(e&&e(null,new Error("validate has errors")));!0===s&&function(t,e){if(t&&e&&e.hasRecords()&&t.getOptions().$data&&t.getOptions().isForm&&t.getOptions().$data.elements.length>0)try{for(const[s,n]of Object.entries(e.first())){const e=t.getOptions().$data.elements.namedItem(s);void 0!==e&&zzb.types.isObject(e)&&(e.value=n)}}catch(t){console.log("failed runZFormUpdate",t)}}(t,n.rob),t.getOptions().arrInjects&&n.rob.hasRecords()&&n.rob.first().dInjects&&d(t.getOptions().arrInjects,n.rob.first().dInjects);let o=t.getOptions().zref;o&&zzb.types.isStringNotEmpty(o.zinputPtr)&&zzb.zaction.loadZInputs(document.getElementById(o.zinputPtr));let r=t.getOptions().zaction;r&&zzb.types.isStringNotEmpty(r.postSave)&&y(r.postSave)}e&&e(n,null)}}))}n.prototype.ZActionEvent=i,n.prototype.newZAction=function(t){return new i(t)},n.prototype.addEventListeners=function(t,e,s){if(!zzb.types.isStringNotEmpty(t))return;s||(s=document),s.querySelectorAll(t).forEach((function(t){if("true"===t.getAttribute("za1x"))return;let s=t.getAttribute("zcall");zzb.types.isStringNotEmpty(s)||(s="click"),t.setAttribute("za1x","true"),t.addEventListener(s,(function(t){zzb.zaction.actionHandler(t,e,null)}))}))},n.prototype.actionHandler=function(t,e,s){let n=zzb.zaction.newZAction(t);if(!n.isValid())throw new Error("failed to create new zaction from event");n.forceStopPropDef();let o=!1;if(e&&(o=e(n,s),!0===o))return;let r=zzb.zaction.getHandlers();for(let t=0;t<r.length;t++)if(o=r[t].run(n,s),!0===o)return;n.isZUrl()&&zzb.zaction.handleZUrl(n,s)},n.prototype.runZValidate=function(t,e,s){l(t,e,s)};const y=function(t){if(t&&zzb.types.isStringNotEmpty(t)){let e=t.split(":");if(2===e.length){let t=document.querySelector(e[1]);if(t){"true"!==t.getAttribute("za1x2")&&(t.setAttribute("za1x2","true"),t.addEventListener("za-post-action",(function(t){zzb.zaction.actionHandler(t,null,null)})));let e=new CustomEvent("za-post-action");e.zaExtraHandler="za-post-action",t.dispatchEvent(e)}}}};n.prototype.handleZUrl=function(t,e){if(!zzb.types.isStringNotEmpty(t.getOptions().zurl))throw new Error("zurl not defined: tried zurl, href, action and src");let s=!1;switch(t.getOptions().zaction.event){case"zurl-dialog":p(t,e),s=!0;break;case"zurl-confirm":!function(t){t.forceStopPropDef(!0),c(t,0,null)}(t),s=!0;break;case"zurl-replace":!function(t,e){t.forceStopPropDef(!0),t.runAJAX(t.buildAJAXOptions(),(function(s,n){n?e&&e(null,n):(t.getOptions().arrInjects&&d(t.getOptions().arrInjects,s.rob.first().dInjects),e&&e(s,null))}))}(t,e),s=!0;break;case"zurl-search":!function(t,e){t.forceStopPropDef(!0);const s=zzb.time.getInterval(t.getOptions().zinterval.id);s&&s.clear(),t.runAJAX(t.buildAJAXOptions(),(function(n,o){o?e&&e(null,o):(n&&n.rob&&(n.rob.hasRecords()||e&&e(n,null),t.runInjects(n)),s&&s.new(),e&&e(n,!0))}))}(t,e),s=!0;break;case"zurl-action":z(t,e),s=!0;break;case"zurl-field-update":z(t,e,!0),s=!0;break;case"zurl-blob-download":!function(t,e){t.forceStopPropDef(!0),zzb.types.isStringNotEmpty(t.getOptions().zaction.expectType)||(t.getOptions().zaction.expectType="blob"),t.runAJAX(t.buildAJAXOptions(),(function(s,n){if(n)e&&e(null,n);else{if(s.data){zzb.types.isStringNotEmpty(t.getOptions().zaction.blobType)||(t.getOptions().zaction.blobType="application/octet-stream"),zzb.types.isStringNotEmpty(t.getOptions().zaction.blobName)||(t.getOptions().zaction.blobName="my-file");const e=URL.createObjectURL(s.data),n=document.createElement("a");n.classList.add("d-none"),n.href=e,n.download=t.getOptions().zaction.blobName,document.body.appendChild(n),n.click()}e&&e(s,null)}}))}(t,e),s=!0;break;case"zurl-nav-tab":if(t.forceStopPropDef(!0),t.isZUrl()){s=!0;let e=t.getOptions().zurl;e.startsWith("http://")||e.startsWith("https://")||(e.startsWith("/")||(e="/"+e),e=window.location.origin+e),window.open(e,"_blank")}e&&e(null,null);break;default:t.forceStopPropDef(!0),t.isZUrl()&&(s=!0,window.location.href=t.getOptions().zurl),e&&e(null,null)}return s},n.prototype.runZLoadActions=function(t){t||(t=document);let e=t.querySelectorAll(".zload-action");if(e&&e.length>0&&e.forEach((function(t){t.addEventListener("zload-action",(function(t){zzb.zaction.actionHandler(t,null,null)})),t.dispatchEvent(new CustomEvent("zload-action"))})),zzb.zaction.loadZInputs(t),t.tagName&&zzb.types.isStringNotEmpty(t.tagName)){const e=t.querySelector(".zui-autofocus");e&&zzb.types.isObject(e)&&e.focus()}t.querySelectorAll(".zzb-zui-navtab-buttons").forEach((function(t){t.querySelectorAll("button").forEach((function(t){const e=new bootstrap.Tab(t);t.addEventListener("click",(function(s){if(s.preventDefault(),"true"===t.getAttribute("za1x"))return void e.show();let n=t.getAttribute("za-event");zzb.types.isStringNotEmpty(n)?(t.setAttribute("za1x","true"),zzb.zaction.actionHandler(s,null,(function(t,s){s||e.show()}))):e.show()}))}))}))};const f={};n.prototype.loadZInputs=function(t){if(t||(t=document),t.tagName&&t.classList.contains("zinput"))zzb.zaction.detectFieldChanges(t);else{const e=t.querySelectorAll(".zinput");e&&e.length>0&&e.forEach(zzb.zaction.detectFieldChanges)}},n.prototype.detectFieldChanges=function(t){const e=function(t,e,s){s?e?t.disabled=!0:t.classList.add("d-none"):e?t.disabled=!1:t.classList.remove("d-none")};let s=t.getAttribute("id");zzb.types.isStringNotEmpty(s)||(s=zzb.uuid.newV4().replace(/-/g,""),t.setAttribute("id",s));let n=document.getElementById(t.getAttribute("ztoggler"));if(zzb.types.isObject(n)){n.setAttribute("zref-zinput-ptr",s);const o="disabled"===n.getAttribute("ztoggler-display");e(n,o,!0),f[s]={originals:{},changes:{}};t.querySelectorAll(".zinput-field").forEach((function(t){const r=t.getAttribute("name");if(!zzb.types.isStringNotEmpty(r))return;const i=function(t){let e=t.getAttribute("type");return e?e.toLowerCase():t.tagName.toLowerCase()}(t);f[s].originals[r]="checkbox"===i||"radio"===i?t.checked+"":t.value;const l=t.getAttribute("zinput-event")||"input";t.addEventListener(l,(function(t){const l="checkbox"===i||"radio"===i?f[s].originals[r]===this.checked+"":f[s].originals[r]===this.value;f[s].changes[r]=l,function(t,s,n){let o=!0;for(const[e,s]of Object.entries(f[t].changes))!1===s&&(o=!1);e(s,n,o)}(s,n,o)}))}))}},document.addEventListener("DOMContentLoaded",(function(){const t=()=>{zzb.zaction&&zzb.zaction.addEventListeners&&(zzb.zaction.addEventListeners(".zaction"),zzb.zaction.runZLoadActions()),zzb.zui&&"function"==typeof zzb.zui.onZUIReady&&zzb.zui.onZUIReady()};if("function"==typeof window.zzbReady)try{window.zzbReady(t)}catch(e){console.warn("zzbReady() threw error; falling back to default bootstrap.",e),t()}else t()}),!1),e.j=n},169:(t,e)=>{const s=function(){};s.prototype.newV4=function(){function t(t){return 0|t*Math.random()}function e(e){let s="";for(let n=0;n<e;++n)s+=t(16).toString(16);return s}return e(8)+"-"+e(4)+"-4"+e(3)+"-"+(3&t(16)|8).toString(16)+e(3)+"-"+e(12)},s.prototype.isV4=function(t){return/^[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(t)},s.prototype.isValid=function(t){return/^([a-f\d]{8}(-[a-f\d]{4}){3}-[a-f\d]{12}?)$/i.test(t)},e.u=s},204:(t,e)=>{const s=function(){this.zsplitters={},this.elemIniters=[],this.defaultRWidth=576,this.handlers=[],this.breakpoints={xs:576,sm:768,md:992,lg:1200,xl:1400}};function n(){return Math.max(document.documentElement.clientWidth,window.innerWidth||0)}s.prototype.getDefaultRWidth=function(){return this.defaultRWidth},s.prototype.isViewportGTRSize=function(t){const e=this.breakpoints;return"string"==typeof t&&e[t]&&(t=e[t]),(!zzb.types.isNumber(t)||t<=0)&&(t=this.defaultRWidth),n()>t},s.prototype.getViewportLabel=function(){const t=n(),e=this.breakpoints;return t<=e.xs?"xs":t<=e.sm?"sm":t<=e.md?"md":t<=e.lg?"lg":"xl"},s.prototype.registerZSplitterResize=function(t){let e=new zzb.zaction.ZActionHandler(t);for(let t=0;t<this.handlers.length;t++)if(this.handlers[t].getId()===e.id)return void(this.handlers[t]=e);this.handlers.push(e)},s.prototype.triggerZSplitterResize=function(){for(let t=0;t<this.handlers.length;t++)this.handlers[t].getHandler()()},s.prototype.initZSplitter=function(t,e,s){const n=this.zsplitter.loadConfig(t);this.zsplitter.normalizeConfig(n),s?Array.isArray(s)||(s=s.split(",")):s=[];const o=this.zsplitter.normalizeWidths(s),r="left"===e?t.previousElementSibling:t.nextElementSibling,i="left"===e?t.nextElementSibling:t.previousElementSibling,l={current:0};zzb.types.isStringNotEmpty(t.id)||(t.id=`zsplitter${Object.keys(this.zsplitters).length}${e}`);const a=()=>this.zsplitter.setStaticWidth(o,l.current,r,i,t),c=t=>this.zsplitter.updateCache(n,a,t);a(),this.zsplitter.applyInitialVisibility(n,o,t,r,l),this.zsplitter.attachTogglers(t,o,l,a,c,r),this.zsplitter.attachDragHandlers(t,e,r,i);const u=this.getZSplitter(t.id);u.toggle=function(t,e,s,n){return e&&t&&"function"==typeof s&&"function"==typeof n?function(o){let r=0;switch(o){case"open":r=0,t.classList.remove("d-none"),e.classList.remove("d-none"),n(o),s();break;case"close":e.style.width=0,r=-1,t.classList.remove("d-none"),e.classList.remove("d-none"),n(o);break;case"dismiss":r=-1,t.classList.add("d-none"),e.classList.add("d-none")}zzb.zui.triggerZSplitterResize()}:function(){}}(t,r,a,c),this.setZSplitter(t.id,u)},s.prototype.zsplitter={loadConfig(t){let e=zzb.dom.getAttributes(t,/^zsplitter-/,10);e.id=t.getAttribute("id");if(!zzb.types.isStringNotEmpty(e.id))return e;const s=zzb.dom.cache.get("zuiC",{mode:"persist"})||{zsplitter:{}};return s.zsplitter[e.id]?e=s.zsplitter[e.id]:(s.zsplitter[e.id]=e,zzb.dom.cache.set("zuiC",s,{mode:"persist"})),e},normalizeConfig(t){"open"!==t.show&&"close"!==t.show&&(t.show=null),zzb.types.isStringNotEmpty(t.rsize)&&(t.rsize=Number(t.rsize)),(!zzb.types.isNumber(t.rsize)||t.rsize<0)&&(t.rsize=zzb.zui.getDefaultRWidth())},normalizeWidths:t=>t.map((t=>t&&"string"==typeof t&&/^\d+$/.test(t)?`${t}px`:t)),setStaticWidth(t,e,s,n,o){if(0===t.length)return;const r=t[e],i=r.endsWith("%"),l=o.parentNode.getBoundingClientRect().width;o.getBoundingClientRect();const a=o.offsetWidth||6;if(i)try{const t=parseFloat(r),e=l-a;s.style.width=t/100*e+"px"}catch(t){console.warn("Failed to set width",t),s.style.width="200px"}else s.style.width=r},updateCache(t,e,s){if(zzb.types.isStringNotEmpty(t.id)){t.show=s;const e=zzb.dom.cache.get("zuiC",{mode:"persist"})||{zsplitter:{}};e.zsplitter[t.id]=t,zzb.dom.cache.set("zuiC",e,{mode:"persist"})}},applyInitialVisibility(t,e,s,n,o){const r=e.length>0;("open"===t.show||"close"===t.show)&&("close"===t.show&&(n.style.width=0,o.current=-1),s.classList.toggle("d-none",!r),n.classList.toggle("d-none",!r))},attachTogglers(t,e,s,n,o,r){t.querySelectorAll("[zsplitter-toggable]").forEach((t=>{t.addEventListener("click",(t=>{t.preventDefault(),s.current++,s.current<e.length?(o("open"),n()):s.current===e.length&&(o("close"),s.current=-1,r.style.width="0"),zzb.zui.triggerZSplitterResize()}),!1)}))},attachDragHandlers(t,e,s,n){let o=0,r=0,i=0;const l=r=>{const l=r.clientX-o,a="left"===e?1:-1,c=t.parentNode.getBoundingClientRect().width,u=100*(i+l*a)/c;s.style.width=`${u}%`,t.style.cursor="col-resize",document.body.style.cursor="col-resize",s.style.userSelect="none",s.style.pointerEvents="none",n.style.userSelect="none",n.style.pointerEvents="none",zzb.zui.triggerZSplitterResize()},a=()=>{document.removeEventListener("mousemove",l),document.removeEventListener("mouseup",a),t.style.removeProperty("cursor"),document.body.style.removeProperty("cursor"),s.style.removeProperty("user-select"),s.style.removeProperty("pointer-events"),n.style.removeProperty("user-select"),n.style.removeProperty("pointer-events"),zzb.zui.triggerZSplitterResize()};t.addEventListener("mousedown",(t=>{t.target.closest("[zsplitter-toggable]")||(o=t.clientX,r=t.clientY,i=s.getBoundingClientRect().width,document.addEventListener("mousemove",l),document.addEventListener("mouseup",a))}))}},s.prototype.getZSplitter=function(t){let e=this.zsplitters[t];return e||{toggle:null}},s.prototype.setZSplitter=function(t,e){t&&e&&(this.zsplitters[t]=e)},s.prototype.destroyZSplitter=function(t){this.zsplitters[t]&&delete this.zsplitters[t]},s.prototype.toggleZSplitterById=function(t,e){let s=document.getElementById(t);if(s){zzb.zui.getZSplitter(s.id).toggle(e)}},s.prototype.onLoadInit=function(){document.querySelectorAll(".zsplitter").forEach((function(t){Array.from(t.attributes).forEach((e=>{switch(e.nodeName){case"zsplitter-left":return zzb.zui.initZSplitter(t,"left",e.nodeValue),!0;case"zsplitter-right":return zzb.zui.initZSplitter(t,"right",e.nodeValue),!0}}))})),zzb.zui.triggerZSplitterResize(),document.querySelectorAll(".zuit-eo").forEach((function(t){let e=t.getAttribute("zuitEO1");if(zzb.types.isStringNotEmpty(e)){let s=t.getAttribute("zuitEO2");zzb.types.isStringNotEmpty(s)&&(t.innerHTML=e+"@"+s)}})),document.querySelectorAll(".zuit-year").forEach((function(t){t.innerHTML=(new Date).getFullYear()}))};const o={date:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",clear:"Clear",dateFormat:"MM/dd/yyyy",timeFormat:"hh:mm aa",firstDay:0}};function r(t,e,s){let n,o,r;if(s.startsWith("custom:")){const[,l,a="text"]=s.split(":");r=a,n=i(t,l),o=i(e,l)}else r=s,n=t?.textContent?.trim()||"",o=e?.textContent?.trim()||"";return zzb.types.compareValues(n,o,r)}function i(t,e){if(!t||"function"!=typeof t.querySelector)return"";const s=t.querySelector(`[zui-sort-id="${e}"]`);return s?s.textContent.trim():""}s.prototype.setLocale=function(t){this.locale=t},s.prototype.getLocale=function(t,e){if(!e)throw new Error("no callback defined for getLocale");if(this.locale)e(this.locale);else{let t=o;zzb.zui.setLocale(t),e(t)}},s.prototype.setElemIniter=function(t){let e=zzb.types.merge({name:null,fn:null},t);if(e.name&&e.fn){let t=!1;for(let s=0;s<this.elemIniters.length;s++)if(this.elemIniters[s].name===e.name){this.elemIniters[s]=e,t=!0;break}t||this.elemIniters.push(e)}},s.prototype.onElemInit=function(t){t||(t=document.body);for(let e=0;e<this.elemIniters.length;e++)this.elemIniters[e].fn(t);if("undefined"!=typeof Autocomplete){let t=document.querySelectorAll(".zautocomplete");t&&t.length>0&&t.forEach((function(t){let e=zzb.types.merge({data:[],locale:"en",maximumItems:7,threshold:3,zurl:t.getAttribute("zurl"),zmod:t.getAttribute("zmod")},zzb.dom.getAttributes(t,/^zacom-/,6));if(zzb.types.isArray(e.data)||(e.data=[]),e.maximumItems=zzb.strings.parseIntOrZero(e.maximumItems),e.maximumItems<=0&&(e.maximumItems=7),e.threshold=zzb.strings.parseIntOrZero(e.threshold),e.threshold<=0&&(e.threshold=3),!zzb.types.isStringNotEmpty(e.zurl))return void console.log("zautocomplete zurl not found");zzb.types.isStringNotEmpty(e.zmod)&&(e.zurl=e.zurl.replace(":mod",e.zmod));const s=new Autocomplete(t,{data:e.data,locale:e.locale,maximumItems:e.maximumItems,threshold:e.threshold,onSelectItem:function(t,e){},onInput:function(t){zzb.ajax.postJSON({url:e.zurl,body:{input:t,limit:e.maximumItems}},(function(t,e){!e&&t.rob.hasRecords()&&s.setData(t.rob.recs)}))}})}))}if("undefined"!=typeof AirDatepicker){let t=document.querySelectorAll(".zdate-picker");t&&t.forEach((function(t){let e=zzb.types.merge({value:zzb.dom.getAttributeElse(t,"value",null),locale:"en",autoClose:!0,useISOVal:"date-iso"===zzb.dom.getAttributeElse(t,"zf-type",null),addBtnToday:!0,addBtnClear:!0,autoEvInput:!1,autoEvBlur:!1},zzb.dom.getAttributes(t,/^zdate-/,6));e.autoClose=zzb.strings.toBool(e.autoClose),e.addBtnToday=zzb.strings.toBool(e.addBtnToday),e.addBtnClear=zzb.strings.toBool(e.addBtnClear),e.autoEvInput=zzb.strings.toBool(e.autoEvInput),e.autoEvBlur=zzb.strings.toBool(e.autoEvBlur);let s=[];e.addBtnToday&&s.push("today"),e.addBtnClear&&s.push("clear");let n="INPUT"===t.nodeName,o=null;const r=t.getAttribute("zf-cval");zzb.types.isStringNotEmpty(e.value)&&(zzb.types.isStringNotEmpty(r)||(o="now"===e.value?new Date:new Date(Date.parse(e.value)),zzb.dom.setAttribute(t,"zdate-value",""))),zzb.types.isStringNotEmpty(r)&&(o="now"===e.value?new Date:new Date(Date.parse(r)));let i=zzb.dom.getAttributeElse(t,"name",null);zzb.zui.getLocale(e.locale,(function(r){let l=new AirDatepicker(t,{locale:r.date,autoClose:e.autoClose,buttons:s,onSelect:function(s){n&&e.useISOVal&&i&&s&&s.date&&zzb.dom.setAttribute(t,"zf-cval",s.date.toISOString())}});o&&l.selectDate(o),luxon?(!0===e.autoEvInput&&t.addEventListener("input",(function(e){const s=t.value;if(zzb.types.isStringNotEmpty(s)){let t=luxon.DateTime.fromFormat(s,r.date.dateFormat);t.isValid&&l.selectDate(t.toJSDate())}})),!0===e.autoEvBlur&&t.addEventListener("blur",(function(e){t.getAttribute("zf-cval");const s=t.value;luxon.DateTime.fromFormat(s,r.date.dateFormat).isValid||(zzb.dom.setAttribute(t,"zf-cval",""),t.value="")}))):!0!==e.autoEvInput&&!0!==e.autoEvBlur||console.log('advanced date processing using "luxon.js"')}))}))}},s.prototype.onZLoadSection=function(t,e){t||(t=document.body);let s="zinterval"+(!0===e?"-custom":"");t.querySelectorAll("."+s).forEach((function(t){t.classList.remove(s),t.classList.contains("zaction")&&zzb.time.newUIInterval(t)}));let n="zloadsection"+(!0===e?"-custom":"");t.querySelectorAll("."+n).forEach((function(t){t.classList.remove(n),t.classList.contains("zaction")&&t.click()}))},s.prototype.__registerBuiltins=function(){this.isRegisteredBuiltins||(this.isRegisteredBuiltins=!0,this.setElemIniter({name:"zuiTableFilter",fn:function(t){const e=t.querySelector(".zui-tablecard-filter")||document.querySelector(".zui-tablecard-filter"),s=t.querySelector(".zui-tablecard-table"),n=t.querySelector(".zui-tablecard-cards");if(!s&&!n)return;const o=s?s.querySelectorAll("tbody tr"):[],i=n?n.querySelectorAll(".zui-tablecard-card"):[];if(e){function l(t){const e=t.toLowerCase();o&&o.forEach((t=>{t.style.display=t.textContent.toLowerCase().includes(e)?"":"none"})),i&&i.forEach((t=>{t.style.display=t.textContent.toLowerCase().includes(e)?"":"none"}))}if(e.addEventListener("input",(function(){l(this.value)})),s||n){const a=e.value.trim();a.length>0&&l(a)}}if(s){const c=s.querySelectorAll("thead th"),u=s.getAttribute("id")||s.dataset.sortKey||"__default_table__";zzb.dom.cache.get(u,{mode:"mem"})||zzb.dom.cache.set(u,{index:null,direction:1},{mode:"mem"});const p=zzb.dom.cache.get(u,{mode:"mem"});if(c.forEach(((t,e)=>{t.addEventListener("click",(()=>{const n=t.getAttribute("zui-sort-type")||"text",o=s.querySelector("tbody");if(!o)return;const i=Array.from(o.querySelectorAll("tr"));if(!i||0===i.length)return;p.index===e?p.direction*=-1:(p.index=e,p.direction=-1);const l=p.direction;c.forEach((t=>t.classList.remove("sort-asc","sort-desc"))),t.classList.add(1===l?"sort-asc":"sort-desc");const a=i.sort(((t,s)=>r(t.children[e],s.children[e],n)*l));zzb.dom.cache.set(u,p,{mode:"mem"}),a.forEach((t=>o.appendChild(t)))}))})),null!==p.index){const d=c[p.index];if(d){const z=d.getAttribute("zui-sort-type")||"text",y=s.querySelector("tbody");if(!y)return;const f=Array.from(y.querySelectorAll("tr"));if(!f||0===f.length)return;c.forEach((t=>t.classList.remove("sort-asc","sort-desc"))),d.classList.add(1===p.direction?"sort-asc":"sort-desc");f.sort(((t,e)=>r(t.children[p.index],e.children[p.index],z)*p.direction)).forEach((t=>y.appendChild(t)))}}}}}))},s.prototype.onZUIReady=function(){"function"==typeof this.__registerBuiltins&&this.__registerBuiltins(),this.onLoadInit(),this.onElemInit(),this.onZLoadSection()},e.T=s},247:(t,e)=>{function s(){}class n{constructor(t){this.options=n.getDefaults(t),this.options.autostart&&this.start()}static getDefaults(t){const e={interval:6e4,autostart:!1,id:null,targetClick:null,datacache:!1,action:function(){console.log("ZazzyInterval no-op")},_cache:null,_itoken:null,_isPaused:!1};if((t=zzb.types.isObject(t)?zzb.types.merge(e,t):e).autostart=!0===t.autostart,zzb.types.isStringNotEmpty(t.id)||(t.id=zzb.uuid.newV4()),!zzb.types.isFunction(t.action))throw new Error('The "action" option must be a function.');return t.new=t.new||function(){t._itoken=setInterval(t.refresh,t.interval),t._isPaused=!1},t.clear=t.clear||function(e){null!=t._itoken&&(clearInterval(t._itoken),t._itoken=null,e&&(t._isPaused=!0))},t.unpause=t.unpause||function(){t._isPaused&&(t._itoken=setInterval(t.refresh,t.interval),t._isPaused=!1)},t.refresh=t.refresh||function(){null!=t._itoken&&(t._isPaused=!1,t.action&&t.action())},t}start(){zzb.types.isFunction(this.options.new)&&this.options.new()}clear(t){zzb.types.isFunction(this.options.clear)&&this.options.clear(t)}unpause(){zzb.types.isFunction(this.options.unpause)&&this.options.unpause()}refresh(){zzb.types.isFunction(this.options.refresh)&&this.options.refresh()}setCache(t){this.options._cache=this.options.datacache?t:null}getCache(){return this.options.datacache?this.options._cache:null}hasCache(){return this.options.datacache&&null!=this.options._cache}}s.prototype.ZazzyInterval=n,s.prototype.getInterval=function(t){return this.myIntervals&&zzb.types.isStringNotEmpty(t)&&this.myIntervals[t]?this.myIntervals[t]:null},s.prototype.clearAll=function(t){if(this.myIntervals&&zzb.types.isObject(this.myIntervals))for(const e in this.myIntervals)this.myIntervals[e]instanceof n&&this.myIntervals[e].clear(t)},s.prototype.unpauseAll=function(){if(this.myIntervals&&zzb.types.isObject(this.myIntervals))for(const t in this.myIntervals)this.myIntervals[t].unpause()},s.prototype.newInterval=function(t){if(this.myIntervals||(this.myIntervals={}),t&&t.id&&zzb.types.isStringNotEmpty(t.id)&&this.myIntervals[t.id])return this.myIntervals[t.id];const e=new n(t);if(e&&e.options&&zzb.types.isStringNotEmpty(e.options.id))return this.myIntervals[e.options.id]=e,e;throw new Error("Failed to create ZazzyInterval")},s.prototype.newUIInterval=function(t){if(!t)return;if("true"===t.getAttribute("zi-inited"))return;zzb.types.isStringNotEmpty(t.getAttribute("id"))||t.setAttribute("id",zzb.uuid.newV4()),t.setAttribute("zi-inited","true");const e=t.getAttribute("id"),s=zzb.dom.getAttributeElse(t,"zi-interval",6e4),n=parseInt(t.getAttribute("zi-run-limit"))||1/0;let o=0;const r=setInterval((()=>{if(document.querySelectorAll(".modal.show").length>0)return;const t=document.getElementById(e);t?(t.setAttribute("zi-noclick","true"),t.click(),o++,o>=n&&clearInterval(r)):console.warn("Element not found:",e)}),s);t.setAttribute("zi-interval-id",r);const i=t.getAttribute("id");this.myIntervals||(this.myIntervals={}),this.myIntervals[i]=r},e.k=s},305:(t,e)=>{function s(){}function n(t,...e){return e.forEach((e=>{e&&"object"==typeof e&&Object.keys(e).forEach((s=>{const o=e[s];"object"!=typeof o||Array.isArray(o)||null===o?t[s]=o:t[s]=n(t[s]||{},o)}))})),t}s.prototype.merge=function(t,e){return n({},t,e)},s.prototype.truncate=function(t,e){if("number"!=typeof t||"number"!=typeof e||e<0)return"";const s=t.toString(),n=s.indexOf(".");return-1===n||0===e?s.split(".")[0]:s.substring(0,n+e+1)},s.prototype.escapeHtml=function(t){if("string"!=typeof t)return"";const e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"};return t.replace(/[&<>"']/g,(t=>e[t]))},s.prototype.baseToString=function(t){return"string"==typeof t?t:"number"==typeof t?""+t:null==t?"":""+t},s.prototype.toString=function(t){return null==t?"":zzb.types.baseToString(t)},s.prototype.isArray=function(t){return Array.isArray(t)},s.prototype.isArrayHasRecords=function(t){return zzb.types.isArray(t)&&t.length>0},s.prototype.isObject=function(t){return null!==t&&"object"==typeof t&&!Array.isArray(t)},s.prototype.isNumber=function(t){return"number"==typeof t&&!isNaN(t)},s.prototype.isStringNotEmpty=function(t){return"string"==typeof t&&t.trim().length>0},s.prototype.isStringEmpty=function(t){return"string"==typeof t&&0===t.trim().length},s.prototype.isString=function(t){return"string"==typeof t},s.prototype.isFunction=function(t){return"function"==typeof t},s.prototype.isBoolean=function(t){return"boolean"==typeof t},s.prototype.isDigit=function(t){return"number"==typeof t?Number.isInteger(t)&&t>=0&&t<=9:"string"==typeof t&&1===t.length&&(t>="0"&&t<="9")},s.prototype.compare=function(t,e,s=!1){return t===e?0:void 0===t?s?1:-1:void 0===e?s?-1:1:null===t?s?1:-1:null===e?s?-1:1:s?t>e?-1:1:t>e?1:-1};const o={int:"integer",integer:"integer",str:"string",string:"string",bool:"boolean",boolean:"boolean",float:"float",number:"float",obj:"object",object:"object",null:"null"};function r(t){const e=t.split("::");let s=e[0]?e[0].split(":"):[],n=e[1]?e[1].split(":"):[];s=s.map((t=>t.padStart(4,"0"))),n=n.map((t=>t.padStart(4,"0")));const o=new Array(8-s.length-n.length).fill("0000");return[...s,...o,...n]}s.prototype.normalizeType=function(t){return"string"!=typeof t&&(t=String(t??"string")),o[t.toLowerCase()]||t},s.prototype.compareValues=function(t,e,s){switch(s){case"int":return parseInt(t,10)-parseInt(e,10);case"float":return parseFloat(t)-parseFloat(e);case"ip":case"ipv4":case"ipv6":return this.compareIP(t,e);default:return(t||"").toString().toLowerCase().localeCompare((e||"").toString().toLowerCase())}},s.prototype.compareIP=function(t,e){const s=this.detectIPType(t),n=this.detectIPType(e);return"ipv4"===s&&"ipv4"===n?this.compareIPv4(t,e):"ipv6"===s&&"ipv6"===n?this.compareIPv6(t,e):"ipv4"===s?-1:1},s.prototype.detectIPType=function(t){return t.includes(".")?"ipv4":t.includes(":")?"ipv6":"unknown"},s.prototype.compareIPv4=function(t,e){const s=t.split(".").map((t=>parseInt(t,10)||0)),n=e.split(".").map((t=>parseInt(t,10)||0));for(let t=0;t<4;t++){if(s[t]<n[t])return-1;if(s[t]>n[t])return 1}return 0},s.prototype.compareIPv6=function(t,e){const s=r(t),n=r(e);for(let t=0;t<8;t++){const e=parseInt(s[t],16),o=parseInt(n[t],16);if(e<o)return-1;if(e>o)return 1}return 0},e.g=s},462:(t,e)=>{const s=function(){};var n;s.prototype.format=(n={},function(t){let e=Array.prototype.slice.call(arguments,1),s=0,o="UNDEFINED";return 1===e.length&&Array.isArray(e[0])&&(e=e[0]),t.replace(/([{}])\1|[{](.*?)(?:!(.+?))?[}]/g,(function(t,r,i,l){if(null!=r)return r;let a=i;if(a.length>0){if("IMPLICIT"===o)throw new Error("Cannot switch from implicit to explicit numbering");o="EXPLICIT"}else{if("EXPLICIT"===o)throw new Error("Cannot switch from explicit to implicit numbering");o="IMPLICIT",a=String(s++)}const c=a.split(".");let u=(/^\d+$/.test(c[0])?c:["0"].concat(c)).reduce(((t,e)=>t.reduce(((t,s)=>{if(null!=s&&e in Object(s)){const t=s[e];return["function"==typeof t?t():t]}return[]}),[])),[e]).reduce(((t,e)=>e),"");if(null==l)return u;if(Object.prototype.hasOwnProperty.call(n,l))return n[l](u);throw new Error('No transformer named "'+l+'"')}))}),s.prototype.formatEmpty=function(t){let e=Array.prototype.slice.call(arguments,1);if(1===e.length&&Array.isArray(e[0])&&(e=e[0]),1===e.length&&"object"==typeof e[0]&&!Array.isArray(e[0])){const s=e[0];return t.replace(/{([^{}]+)}/g,(function(t,e){return null!=s[e]?s[e]:""}))}return t.replace(/{(\d+)}/g,(function(t,s){return void 0!==e[s]&&null!==e[s]?String(e[s]):""}))},s.prototype.appendIfMoreThan=function(t,e,s){return t&&t.length>s?t.substring(0,s)+e:t},s.prototype.joinArr=function(t,e,s){if(!Array.isArray(t)||0===t.length)return"";const n=null!=s?s:", ";return t.map((t=>{if(e&&"object"==typeof t&&null!==t){const n=(s=t,e.split(".").reduce(((t,e)=>t&&"object"==typeof t?t[e]:void 0),s));return null!=n?String(n):""}var s;return String(t)})).join(n)},s.prototype.toPlural=function(t,e,s){return s=zzb.types.merge({forcePlural:!1,suffix:null},s),1!==e&&-1!==e||s.forcePlural?t+(s.suffix||"s"):t},s.prototype.capitalize=function(t){return zzb.types.isStringNotEmpty(t)?t.charAt(0).toUpperCase()+t.slice(1):""},s.prototype.toFirstCapitalEndPeriod=function(t){return zzb.types.isStringNotEmpty(t)&&(t=t.trim(),(t=zzb.strings.capitalize(t)).endsWith(".")||(t+=".")),t};const o=["K","M","G","T","P","E","Z","Y"],r=["KB","MB","GB","TB","PB","EB","ZB","YB"],i=["Kilobyte","Megabyte","Gigabyte","Terabyte","Petabyte","Exabyte","Zettabyte","Yottabyte"],l=["KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"];s.prototype.sizeToHumanReadable=function(t,e,s,n){zzb.types.isStringNotEmpty(e)||(e="single"),n||(n=1);let a,c=!0===s?"":" ",u=1024,p="B";switch(e.toLowerCase()){case"full":a=i,p="Bytes";break;case"double":a=r;break;case"eic":a=l;break;default:a=o}if(Math.abs(t)<u)return t+c+p;let d=-1,z=Math.pow(n,10);do{t/=u,++d}while(Math.round(Math.abs(t)*z)/z>=u&&d<a.length-1);let y=t.toFixed(n)+"";return y=zzb.strings.trimSuffix(y,[".00",".0"]),y+c+a[d]},s.prototype.trimPrefix=function(t,e){t=zzb.types.toString(t);let s=Array.isArray(e)?e:[zzb.types.toString(e)];for(let e=0;e<s.length;e++)if(t.startsWith(s[e]))return t.slice(s[e].length);return t},s.prototype.trimSuffix=function(t,e){t=zzb.types.toString(t);let s=Array.isArray(e)?e:[zzb.types.toString(e)];for(let e=0;e<s.length;e++)if(t.endsWith(s[e]))return t.slice(0,-s[e].length);return t},s.prototype.millisecondsTimeToHumanReadable=function(t){let e=t/1e3;const s=Math.floor(e/31536e3),n=Math.floor((e%=31536e3)/86400),o=Math.floor((e%=86400)/3600),r=Math.floor((e%=3600)/60),i=e%60;return n||o||i||r?(s?s+"y ":"")+(n?n+"d ":"")+(o?o+"h ":"")+(r?r+"m ":"")+Number.parseFloat(i).toFixed(2)+"s":"< 1s"},s.prototype.toBool=function(t){if("boolean"==typeof t)return t;if("number"==typeof t)return 1===t;if(!zzb.types.isStringNotEmpty(t))return!1;switch(t.toLowerCase().trim()){case"true":case"yes":case"1":return!0;case"false":case"no":case"0":case"":return!1;default:return Boolean(t)}},s.prototype.parseIntOrZero=function(t,e){return this.parseTypeElse(t,"int",0,!!e)},s.prototype.parseFloatOrZero=function(t,e){return this.parseTypeElse(t,"float",0,!!e)},s.prototype.parseBoolOrFalse=function(t,e){return this.parseTypeElse(t,"bool",!1,!!e)},s.prototype.parseTypeElse=function(t,e,s,n){const o=n||zzb.types.isArray(t),r=zzb.types.isArray(t)?t.slice():[t],i=zzb.types.normalizeType(e),l=r.map((t=>{if(null==t)return s;let e;switch(i){case"integer":return e=parseInt(t),isNaN(e)?s:e;case"float":return e=parseFloat(t),isNaN(e)?s:e;case"boolean":return zzb.strings.toBool(t);case"string":default:return zzb.types.isString(t)?t:String(t??s);case"object":return"object"==typeof t?t:s;case"null":return null;case"date":case"date-iso":return zzb.types.isStringNotEmpty(t)?t:s}}));return o?l:l[0]},s.prototype.formatElseEmpty=function(t,e,s){let n=e;return zzb.types.isStringNotEmpty(n)||(n=s,zzb.types.isStringNotEmpty(n))?zzb.strings.format(t,n):""},e.P=s},531:(t,e)=>{const s=function(){};s.prototype.getPO=function(t,e){let s=t[e];return s||this.getPermObject(e+":")},s.prototype.getPermObjectFromPermkeys=function(t){const e={},s=this;if(Array.isArray(t))t.forEach((function(t){let n=s.getPermObject(t);n.key&&(e[n.key]=n)}));else if(zzb.types.isObject(t))for(const n in t){let o=t[n];o||(o="");let r=null;r=o.indexOf(":")<0?s.getPermObject(n+":"+o):s.getPermObject(o),r&&r.key&&(e[r.key]=r)}return e},s.prototype.mergePermkey=function(t,e){if(!e||!zzb.types.isStringNotEmpty(e))return t;if(!t||!zzb.types.isStringNotEmpty(t))return e;let s=null,n={},o={};if(t.indexOf(":")<=0?(n.key=t.trim(),n.perm=""):(s=t.split(":"),n.key=s[0].trim(),n.perm=s[1].trim().toUpperCase()),e.indexOf(":")<=0?(o.key=e.trim().toUpperCase(),o.perm=""):(s=e.split(":"),o.key=s[0].trim(),o.perm=s[1].trim().toUpperCase()),n.key!==o.key||n.perm===o.perm||0===o.perm.length)return t;if(0===n.key.length)return e;for(let t=0;t<o.perm.length;t++)n.perm.indexOf(o.perm[t])<0&&(n.perm+=o.perm[t]);return n.key+":"+n.perm},s.prototype.getPermObject=function(t,e,s){let n={key:null,perm:null,attr:{},toPermkey:function(){return this.key+":"+this.perm}};if((s||zzb.types.isStringNotEmpty(s))&&(t=this.mergePermkey(t,s)),!t||!zzb.types.isStringNotEmpty(t))return n.attr=this.getPermAttributes(),n;if(t.indexOf(":")<=0)return n.key=t,n.perm="",n.attr=this.getPermAttributes(),n;let o=t.split(":");if(n.key=o[0],n.perm=o[1],n.perm=n.perm.trim().toUpperCase(),n.perm.length>0&&e&&zzb.types.isStringNotEmpty(e)){e=e.trim().toUpperCase();for(let t=n.perm.length-1;t>=0;t--)e.indexOf(n.perm[t])<0&&(n.perm=n.perm.replace(n.perm[t],""))}return n.attr=this.getPermAttributes(n.toPermkey(),e),n};const n=new RegExp("^[CRUDXL]*$");s.prototype.getPermAttributes=function(t){let e={canRead:!1,canCreate:!1,canUpdate:!1,canDelete:!1,canExecute:!1,canList:!1};return t&&zzb.types.isStringNotEmpty(t)?(t.indexOf(":")>=0&&(t=t.split(":")[1]),0===(t=t.trim().toUpperCase()).length?e:n.test(t)?(e.canRead=t.indexOf("C")>=0,e.canCreate=t.indexOf("R")>=0,e.canUpdate=t.indexOf("U")>=0,e.canDelete=t.indexOf("D")>=0,e.canExecute=t.indexOf("X")>=0,e.canList=t.indexOf("L")>=0,e):e):e},s.prototype.hasMatch=function(t,e){if(!t||!e)return!1;let s=t;if(zzb.types.isStringNotEmpty(t)&&(s=this.getPermObject(t)),!zzb.types.isObject(s)||!s.key||!s.perm||0===s.perm.length)return!1;let n=null;if(zzb.types.isStringNotEmpty(e))n=this.getPermObject(e);else if(Array.isArray(e)){const t=this;e.forEach((function(e){if(zzb.types.isStringNotEmpty(e)&&(e=t.getPermObject(e)),e.key===s.key)return n=e,!1}))}else{if(!zzb.types.isObject(e))return!1;if(e.key)n=e;else{if(!e[s.key])return!1;n=zzb.types.isStringNotEmpty(e[s.key])?this.getPermObject(s.key+":"+e[s.key]):e[s.key]}}if(!n||!n.key||!n.perm||0===!n.perm.length)return!1;for(let t=0;t<n.perm.length;t++)if(s.perm.indexOf(n.perm[t])>=0)return!0;return!1},e.k=s},628:(t,e)=>{const s=function(){};function n(t){if((t=zzb.types.merge({type:"error",message:null,field:"_system",stack:null,isErr:!0,title:null},t)).isErr)switch("warn"===t.type?t.type="warning":"err"===t.type?t.type="error":"crit"===t.type?t.type="critical":"emerg"===t.type&&(t.type="emergency"),t.type){case"warning":case"notice":case"info":case"debug":t.isErr=!1;break;default:t.isErr=!0}return t}s.prototype.newROB=function(t){return zzb.types.merge({message:null,messageType:null,errs:null,recs:[],columns:[],paginate:{page:0,limit:0,count:0},hasErrors:function(){return this.errs&&Array.isArray(this.errs)&&this.errs.length>0},hasColumns:function(){return this.columns&&Array.isArray(this.columns)&&this.columns.length>0},hasRecords:function(){return this.recs&&Array.isArray(this.recs)&&this.recs.length>0},isEmpty:function(){return!this.hasRecords()||this.hasRecords()&&null===this.first()},first:function(){return this.recs&&Array.isArray(this.recs)&&this.recs.length>0?this.recs[0]:null},find:function(t,e){let s=null;return this.recs.forEach((function(n){if(n&&zzb.types.isObject(n)&&!Array.isArray(n)&&n[t]===e)return s=n,!1})),s},length:function(){return this.recs&&Array.isArray(this.recs)?this.recs.length:0}},t)},s.prototype.toObject=function(t){if(!t||!Array.isArray(t))return{_system:[t]};let e={};return t.forEach((function(t){t&&(t.field||(t.field="_system"),e[t.field]||(e[t.field]=[]),e[t.field].push(t))})),e};const o=function(t,e){if(!t)return n();if(zzb.types.isStringNotEmpty(t))return n(zzb.types.merge({message:t},e));if(!Array.isArray(t)&&zzb.types.isObject(t))return n(t);throw new Error("bad input in createError - unrecognized err datatype")};s.prototype.createError=o,s.prototype.sanitizeErrors=function(t){let e=null;return t?(Array.isArray(t)?t.length>0&&(e=[],t.forEach((function(t){e.push(o(t))}))):e=[o(t)],e):e},s.prototype.sanitizeRecords=function(t){return t?Array.isArray(t)?t:[t]:[]},s.prototype.toListErrs=function(t){return zzb.rob.toList(t)},s.prototype.toList=function(t){let e=[],s=[],n=[],o=[];return t&&Array.isArray(t)&&t.length>0&&t.forEach((function(t){!0===t.isErr?"_system"===t.system?s.push(t):zzb.types.isStringNotEmpty(t.field)?"_system"===t.field?s.push(t):e.push(t):s.push(t):"_system"===t.system?n.push(t):zzb.types.isStringNotEmpty(t.field)?"_system"===t.field?n.push(t):o.push(t):n.push(t)})),{system:s,fields:e,systemMessages:n,fieldMessages:o,hasErrors:function(){return this.hasSystemErrors()||this.hasFieldErrors()},hasSystemErrors:function(){return this.system&&this.system.length>0},hasFieldErrors:function(){return this.fields&&this.fields.length>0},combinedErrors:function(){return this.system.concat(this.fields)},hasMessages:function(){return this.hasSystemMessages()||this.hasFieldMessages()},hasSystemMessages:function(){return this.systemMessages&&this.systemMessages.length>0},hasFieldMessages:function(){return this.fieldMessages&&this.fieldMessages.length>0},combinedMessages:function(){return this.systemMessages.concat(this.fieldMessages)},getByFieldName:function(t,e){if("_system"===e)return t?this.systemMessages:this.system;let s=[];return e?((t?this.fieldMessages:this.fields).forEach((function(n){n.field===e&&(n.isMessage=t,s.push(n))})),s):s},getErrsByName:function(t){return this.getByFieldName(!1,t)},getMessagesByName:function(t){return this.getByFieldName(!0,t)},getAnyByName:function(t){let e=this.getErrsByName(t),s=this.getMessagesByName(t);return e.concat(s)}}},s.prototype.renderListErrs=function(t){return zzb.rob.renderList(t)},s.prototype.renderList=function(t){t=zzb.types.merge({targets:[],format:"text",defaultTitle:"",template:null,htmlWrapList:'<ul class="zzb-rob-{0}">{1}</ul>'},t);let e=[];if(t.errs&&zzb.types.isArrayHasRecords(t.errs)&&(t.targets=t.errs),zzb.types.isArrayHasRecords(t.targets)){let s=t.targets.length>1;if(t.targets.forEach((function(n){let o="";zzb.types.isStringNotEmpty(t.defaultTitle)?o=t.defaultTitle:zzb.types.isStringNotEmpty(n.field)&&(o=n.field),t.template?e.push(zzb.strings.format(t.template,o,n.message)):(n.type||(n.type=n.isMessage?"message":"unknown"),s||"html"!==t.format?"html"===t.format||"html-list"===t.format?e.push(zzb.strings.format('<li class="zzb-rob-list-item-{0}">{1}</li>',n.type,n.message)):"html-list-label"===t.format?e.push(zzb.strings.format('<li class="zzb-rob-list-item-{0}"><span>{1}:</span> {2}</li>',n.type,o,n.message)):"label"===t.format?e.push(zzb.strings.format("{0}: {1}",o,n.message)):"text-punctuated"===t.format?e.push(zzb.strings.toFirstCapitalEndPeriod(n.message)+" "):e.push(zzb.strings.format(n.message)):e.push(zzb.strings.format('<div class="zzb-rob-list-item-{0}">{1}</div>',n.type,n.message)))})),(s&&"html"===t.format||"html-list"===t.format||"html-list-label"===t.format)&&t.htmlWrapList)return zzb.strings.format(t.htmlWrapList,t.format,e.join(""))}return e.join("")},e.I=s},636:(t,e)=>{function s(){}s.prototype.hasUIHover=function(){return!window.matchMedia("(hover: none)").matches},s.prototype.hasElement=function(t){return!!t},s.prototype.setAttribute=function(t,e,s){t&&(zzb.types.isObject(t)?t.setAttribute(e,s):zzb.types.isArray(t)&&t.forEach((function(t){t.setAttribute(e,s)})))},s.prototype.getAttributeElse=function(t,e,s){if(null==s&&(s=null),!t)return s;let n=t.getAttribute(e);return zzb.types.isStringNotEmpty(n)?n:s},s.prototype.getAttributes=function(t,e,s){if(!t||!e)return{};zzb.types.isNumber(s)||(s=-1);let n={};return[].forEach.call(t.attributes,(function(t){if(e.test(t.name))if(s<=0)n[t.name]=t.value;else{let e=t.name.substr(s).replace(/-(.)/g,(function(t,e){return e.toUpperCase()}));n[e]=t.value}})),n},s.prototype.setPath=function(t,e,s){let n=t;const o=zzb.types.toString(e).split(".");for(let t=0;t<o.length;t++){const e=o[t],r=e.match(/^(\w+)\[(\d*)\]$/);let i=e,l=!1,a=0;if(r&&(l=!0,i=r[1],a=""===r[2]?null:parseInt(r[2],10)),t===o.length-1)if(l)if(zzb.types.isArray(n[i])||(n[i]=[]),null!==a){for(;n[i].length<=a;)n[i].push(null);n[i][a]=s}else n[i]=s;else n[i]=s;else l?(zzb.types.isArray(n[i])||(n[i]=[]),zzb.types.isObject(n[i][0])||(n[i][0]={}),n=n[i][0]):(zzb.types.isObject(n[i])||(n[i]={}),n=n[i])}},s.prototype.formDataToJson=function(t){const e=new FormData(t),s={},n={};for(let[t,n]of e)void 0!==s[t]?(zzb.types.isArray(s[t])||(s[t]=[s[t]]),s[t].push(n)):s[t]=n;for(const e in s){const o=t.querySelector(`[name="${e}"]`);let r=s[e],i="string",l=!1,a=!1;if(o){const t=o.getAttribute("zf-cval");null!==t&&(r=t);let e=o.getAttribute("zf-type")||"string";e.startsWith("[]")&&(l=!0,e=e.slice(2));const s=e.split("|").map((t=>zzb.types.normalizeType(t)));i=s[0],a=s.includes("null");const n="integer"===i||"float"===i?0:"boolean"!==i&&"";r=(""===r||null==r)&&a?null:zzb.types.isArray(r)?r.map((t=>zzb.strings.parseTypeElse(t,i,n,!1))):zzb.strings.parseTypeElse(r,i,n,!1)}else r=""===r?"":r;l&&!zzb.types.isArray(r)&&(r=[r]),zzb.dom.setPath(n,e,r)}return n},s.prototype.findSelectorTargets=function(t,e){if(!t||!zzb.types.isStringNotEmpty(e))return null;const s=[],n=e.split(",");for(let e of n){if(e=e.trim(),"self"===e||"self:"===e){s.push({label:"self",$elem:t});continue}if("none"===e||"none:"===e)return"none";const n=e.indexOf(":");if(-1===n)continue;const o=e.slice(0,n),r=e.slice(n+1);if(!zzb.types.isStringNotEmpty(r))return null;let i=null,l=o,a="inner";const c=l.indexOf(".");c>0&&(i=l.slice(0,c),l=l.slice(c+1));const u=l.indexOf("@");u>0&&(a=l.slice(u+1),l=l.slice(0,u));let p=null;switch(l){case"selector":case"s":p=document.querySelector(r);break;case"closest":case"c":p=t.closest(r);break;case"child":case"h":p=t.querySelector(r);break;default:console.warn("Unknown selector method:",l)}"inner"!==a&&"outer"!==a&&(console.warn('Unknown placement param; defaulting to "inner":',a),a="inner"),p&&s.push({label:i,$elem:p,placement:a})}return s},s.prototype.findZUrl=function(t,e){!t||t.getAttribute;const s=t.nodeName?.toLowerCase(),n=["zurl","href","action"];"img"!==s&&n.push("src");for(const e of n){const s=t.getAttribute(e);if(zzb.types.isStringNotEmpty(s)&&"#"!==s)return s}return e?null:""};const n={};s.prototype.cache={get(t,{mode:e="mem",rootKey:s="zuiC"}={}){if(!t)return null;if("persist"===e)try{return JSON.parse(localStorage.getItem(s)||"{}")[t]??null}catch(t){return console.warn("ZUI persistent cache read error:",t),null}return n[t]??null},set(t,e,{mode:s="mem",rootKey:o="zuiC"}={}){if(t)if("persist"===s)try{const s=JSON.parse(localStorage.getItem(o)||"{}");s[t]=e,localStorage.setItem(o,JSON.stringify(s))}catch(t){console.warn("ZUI persistent cache write error:",t)}else n[t]=e},clear({key:t=null,mode:e="mem",rootKey:s="zuiC"}={}){if("persist"===e)if(t)try{const e=JSON.parse(localStorage.getItem(s)||"{}");delete e[t],localStorage.setItem(s,JSON.stringify(e))}catch(t){console.warn("ZUI persistent cache clear error:",t)}else localStorage.removeItem(s);else if(t)delete n[t];else for(const t in n)delete n[t]}},e.t=s},856:function(t,e,s){var n,o,r,i;r=this,i=function(){const t=s(305).g,e=s(169).u,n=s(462).P,o=s(636).t,r=s(247).k,i=s(149).i,l=s(531).k,a=s(628).I,c=s(964).R,u=s(168).j,p=s(204).T;function d(){}return d.prototype.types=new t,d.prototype.uuid=new e,d.prototype.strings=new n,d.prototype.dom=new o,d.prototype.time=new r,d.prototype.dialogs=new i,d.prototype.perms=new l,d.prototype.rob=new a,d.prototype.ajax=new c,d.prototype.zaction=new u,d.prototype.zui=new p,new d},"undefined"!=typeof window?window.zzb=i():void 0!==r?r.zzb=i():void 0===(o="function"==typeof(n=i)?n.call(e,s,e,t):n)||(t.exports=o)},964:(t,e)=>{function s(){}s.prototype.ajax=function(t){return this.request(t,t.callback)},s.prototype.request=function(t,e){return zzb.types.isFunction(e)||(e=function(){}),t=zzb.types.merge({url:null,method:"GET",body:null,expectType:"text",headers:{},RAWRETURN:!1,SKIPREDIRECT:!1,SKIPFLASH:!1,SHOWCATCHMESSAGE:!1,NOCATCHLOG:!1,NOCATCHFLASH:!1,CATCHFLASHMESSAGE:""},t),zzb.types.isStringNotEmpty(t.url)?zzb.types.isStringNotEmpty(t.method)?void fetch(t.url,{method:t.method,body:t.body,headers:t.headers}).then((function(e){if(!e.ok)throw new Error("Remote service returned unexpected status "+e.status+".");switch(t.expectType){case"json":return e.json();case"text":return e.text();case"blob":return e.blob();default:throw new Error("Unknown content received from remote service.")}})).then((function(s){const o={request:t,data:s};if(!0===o.request.RAWRETURN)return e(o,null);let r=!1;const i=zzb.rob.newROB();if("json"!==o.request.expectType)i.recs=[o.data];else{if(!0!==o.request.SKIPREDIRECT&&zzb.types.isStringNotEmpty(s.redirect))return zzb.types.isFunction(o.request.onRedirect)?void o.request.onRedirect(s,(function(t){t||(window.location.href=s.redirect)})):void(zzb.types.isStringNotEmpty(s.message)?zzb.dialogs.showMessage({type:zzb.types.isStringNotEmpty(s.messageType)?s.messageType:null,classDialog:"zzb-dialog-flash-message zzb-dialog-flash-redirect"+zzb.strings.formatElseEmpty(" zzb-dialog-flash-status-{0}",s.messageType),dataBackdrop:"static",title:zzb.types.isStringNotEmpty(s.messageTitle)?s.messageTitle:"",body:s.message,onHide:function(t){window.location.href=s.redirect}}):window.location.href=s.redirect);s.ISROBERRORS||(s.err?(s.errs=zzb.rob.sanitizeErrors(s.err),s.err=null):s.error?(s.errs=zzb.rob.sanitizeErrors(s.error),s.err=null):s.errs&&(s.errs=zzb.rob.sanitizeErrors(s.errs),s.err=null));let n=s.recs;s.ISROBRECS||(s.recs?n=zzb.rob.sanitizeRecords(s.recs):s.rec?(n=zzb.rob.sanitizeRecords(s.rec),s.rec=null):Array.isArray(s.errs)&&0!==s.errs.length||(n=zzb.rob.sanitizeRecords(s))),s.paginate&&(i.paginate=s.paginate),i.errs=s.errs,i.recs=n,n=null,i.columns=s.columns,i.listErrs=zzb.rob.toList(i.errs),!0!==t.SKIPFLASH&&zzb.types.isStringNotEmpty(s.message)&&(r=!0,zzb.dialogs.showMessage({type:zzb.types.isStringNotEmpty(s.messageType)?s.messageType:null,classDialog:"zzb-dialog-flash-message"+zzb.strings.formatElseEmpty(" zzb-dialog-flash-status-{0}",s.messageType,i.hasErrors()?"error":"okay"),dataBackdrop:"static",title:zzb.types.isStringNotEmpty(s.messageTitle)?s.messageTitle:"",body:s.message,onHide:function(t){o.rob=i,e(o,null)}})),zzb.types.isFunction(o.request.onFinish)&&(r=!0,o.request.onFinish(i,(function(t){!0!==t&&(o.rob=i,e(o,null))})))}if(!0!==r){o.rob=i;try{e(o,null)}catch(t){throw console.log(n.APPEND_FAILED_HANDLER_UNEXPECTED,"error:",t),new Error(n.APPEND_FAILED_HANDLER_UNEXPECTED)}}})).catch((function(s){let o="";if(s&&zzb.types.isStringNotEmpty(s.message)&&(!0!==t.NOCATCHLOG&&n.APPEND_FAILED_HANDLER_UNEXPECTED!==s.message&&console.log(s.message),!0!==t.SHOWCATCHMESSAGE&&(o=s.message)),!0!==t.NOCATCHFLASH){let e="";zzb.types.isStringNotEmpty(o)&&(e=zzb.strings.format(' <span class="zzb-dialog-error-catch">{0}</span>',o)),zzb.types.isStringNotEmpty(t.CATCHFLASHMESSAGE)?zzb.ajax.showMessageFailedAction({message:t.CATCHFLASHMESSAGE+e}):zzb.ajax.showMessageFailedAction({message:n.MSG_FAILED_REQUEST_UNEXPECTED+e})}e(null,new Error(o))})):e(null,new Error("No url method defined to fetch request.")):e(null,new Error("No url defined to fetch request."))},s.prototype.get=function(t,e){t.method="GET",zzb.ajax.request(t,e)},s.prototype.post=function(t,e){t.method="POST",zzb.ajax.request(t,e)},s.prototype.getBLOB=function(t,e){t.method="GET",t.expectType="blob",zzb.ajax.request(t,e)},s.prototype.getTEXT=function(t,e){t.method="GET",t.expectType="text",zzb.ajax.request(t,e)},s.prototype.getJSON=function(t,e){t.method="GET",t.expectType="json",zzb.ajax.request(t,e)},s.prototype.postJSON=function(t,e){t.method="POST",zzb.types.isStringNotEmpty(t.expectType)||(t.expectType="json"),t.headers={"Content-Type":"application/json"},zzb.types.isStringNotEmpty(t.body)?t.body="{}":t.body=JSON.stringify(t.body),zzb.ajax.request(t,e)},s.prototype.postFORM=function(t,e){t.method="POST",t.expectType="json",zzb.ajax.request(t,e)};const n=function(t){};n.MSG_FAILED_REQUEST_UNEXPECTED="Communications with remote service failed unexpectedly.",n.APPEND_FAILED_HANDLER_UNEXPECTED="Report this to the remote service administrator.",s.prototype.showMessageFailedAction=function(t){t=zzb.types.merge({err:null,number:null,message:n.MSG_FAILED_ACTION_UNEXPECTED},t),zzb.types.isNumber(t.number)?t.number=" ("+t.number+")":t.number="",t.err&&console.log(t.err),zzb.dialogs.showMessage({classDialog:"zzb-dialog-flash-message zzb-flash-invalid",dataBackdrop:"static",body:t.message+t.number})},e.R=s}},e={};(function s(n){var o=e[n];if(void 0!==o)return o.exports;var r=e[n]={exports:{}};return t[n].call(r.exports,r,r.exports,s),r.exports})(856)})();